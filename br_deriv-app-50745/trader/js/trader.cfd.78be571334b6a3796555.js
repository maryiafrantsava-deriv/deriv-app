"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["cfd"],{"./Modules/CFD/index.js":(e,t,a)=>{a.r(t),a.d(t,{CFDPasswordModal:()=>R,CFDServerErrorDialog:()=>U,default:()=>Ta});var n=a("../../../node_modules/formik/dist/formik.esm.js"),r=a("../../../node_modules/prop-types/index.js"),o=a.n(r),i=a("react"),c=a("react-router"),l=a("@deriv/account/dist/account/js/sent-email-modal"),s=a.n(l),d=a("./Stores/Modules/CFD/Helpers/cfd-config.js"),u=a("@deriv/components"),_=a("@deriv/shared"),m=a("@deriv/translations"),p=a("../../../node_modules/classnames/index.js"),f=a.n(p);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var h=function(e){var t=e.className;return i.createElement(u.Icon,{className:t,icon:"IcCheckmarkCircle",custom_color:"var(--status-success)",size:24})},b=function(e){var t=e.classNameMessage,a=void 0===t?void 0:t,n=e.has_cancel,r=e.has_submit,o=e.icon,c=e.message,l=e.onCancel,s=e.onSubmit,d=e.heading,_=e.icon_size,p=e.text_submit,b=e.text_cancel,v=e.is_open,y=e.toggleModal,w=e.title,E=e.has_close_icon,z=e.width,x=void 0===z?void 0:z,S=e.is_medium_button;return i.createElement(u.Modal,{className:"cfd-success-dialog",is_open:v,toggleModal:y,has_close_icon:E,small:!w,title:w,width:x},i.createElement(u.Modal.Body,null,i.createElement("div",{className:f()("success-change__icon-area",{"success-change__icon-area--large":"large"===_,"success-change__icon-area--xlarge":"xlarge"===_})},o,i.createElement(h,{className:"bottom-right-overlay"})),!d&&i.createElement(u.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},i.createElement(m.Localize,{i18n_default_text:"Success!"})),d&&d,i.isValidElement(c)&&c,!i.isValidElement(c)&&i.createElement("p",{className:a},c)),i.createElement(u.Modal.Footer,null,n&&i.createElement(u.Button,g({onClick:l,has_effect:!0,text:b||(0,m.localize)("Maybe later"),secondary:!0},S?{medium:!0}:{large:!0})),r&&i.createElement(u.Button,g({has_effect:!0,onClick:s,text:p,primary:!0},S?{medium:!0}:{large:!0}))))};b.defaultProps={icon_size:"large",has_cancel:!1,has_submit:!0},b.propTypes={classNameMessage:o().string,has_cancel:o().bool,has_submit:o().bool,heading:o().oneOfType([o().string,o().object]),icon:o().object,icon_size:o().string,icon_type:o().string,message:o().oneOfType([o().string,o().object]),onCancel:o().func,onSubmit:o().func,text_submit:o().string};const v=b;var y=a("./Stores/connect.js"),w=function(e){var t=e.confirm_label,a=e.className,r=e.platform,o=e.onConfirm,c=e.onCancel;return i.createElement(n.J9,{initialValues:{},onSubmit:o},(function(e){var n,o,l,s=e.isSubmitting,d=e.handleSubmit;return i.createElement("form",{onSubmit:d},i.createElement("div",{className:f()("cfd-change-password-confirmation__wrapper",(n={},o="".concat(a,"-wrapper"),l=a,o in n?Object.defineProperty(n,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[o]=l,n))},i.createElement("div",{className:f()("cfd-change-password-confirmation",a)},i.createElement(u.Icon,{className:"cfd-change-password__icon",icon:r===_.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),i.createElement(u.Text,{as:"p",align:"center",size:"s",weight:"bold"},i.createElement(m.Localize,{i18n_default_text:"Confirm to change your {{platform}} password",values:{platform:(0,_.getCFDPlatformLabel)(r)}})),i.createElement(u.Text,{className:"cfd-change-password-confirmation__description",as:"p",align:"center",color:"loss-danger",size:"xs"},i.createElement(m.Localize,{i18n_default_text:"This will change the password to all of your {{platform}} accounts.",values:{platform:(0,_.getCFDPlatformLabel)(r)}})),i.createElement(u.FormSubmitButton,{is_center:!0,label:t||(0,m.localize)("Create"),cancel_label:(0,m.localize)("Cancel"),is_loading:s,has_cancel:!0,onCancel:c}))))}))};w.propTypes={confirm_label:o().string,onConfirm:o().func,onCancel:o().func,platform:o().string};const E=w;function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return T(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var P=function(e){var t=e.should_set_trading_password,a=e.should_show_server_form,n=e.account_title,r=e.is_password_reset_error,o=e.platform,c=(0,_.isMobile)()?"p":"span",l=(0,_.isMobile)()?{padding:"2rem"}:{};return i.createElement(u.Text,{styles:l,as:c,line_height:"m",weight:"bold",size:"s",align:"center"},!a&&!t&&!r&&i.createElement(m.Localize,{i18n_default_text:"Enter your {{platform}} password",values:{platform:(0,_.getCFDPlatformLabel)(o)}}),!a&&r&&i.createElement(m.Localize,{i18n_default_text:"Too many attempts"}),a&&i.createElement(m.Localize,{i18n_default_text:"Choose a region for your DMT5 real {{ account_type }} account",values:{account_type:n}}))},F=function(e,t,a,n,r){if(!t&&!e)return"";var o="real"===t?(0,m.localize)("real"):(0,m.localize)("demo"),c=(0,d.o)(n)[t][e].short_title;return"real"===t?r?(0,m.localize)("We need proof of your identity and address before you can start trading."):i.createElement(m.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}}</1> account. To start trading, transfer funds from your Deriv account into this account.",values:{type:c,platform:(0,_.getCFDPlatformLabel)(a),category:o},components:[i.createElement("i",{className:"cfd-account__platform",key:0}),i.createElement("strong",{key:1})]}):i.createElement(m.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}}</1> account.",values:{type:c,platform:(0,_.getCFDPlatformLabel)(a),category:o},components:[i.createElement("i",{className:"cfd-account__platform",key:0}),i.createElement("strong",{key:1})]})},N=i.memo((function(e){var t=e.platform,a=e.type,n=e.is_eu;if(t===_.CFD_PLATFORMS.DXTRADE){if("synthetic"===a)return i.createElement(u.Icon,{icon:"IcDxtradeSyntheticPlatform",size:128});if("financial"===a)return i.createElement(u.Icon,{icon:"IcDxtradeFinancialPlatform",size:128})}switch(a){case"synthetic":return i.createElement(u.Icon,{icon:"IcMt5SyntheticPlatform",size:128});case"financial":return n?i.createElement(u.Icon,{icon:"IcMt5Cfds",size:128}):i.createElement(u.Icon,{icon:"IcMt5FinancialPlatform",size:128});default:return i.createElement(u.Icon,{icon:"IcMt5FinancialStpPlatform",size:128})}}));N.displayName="IconType";var O=function(e){var t=e.password,a=e.platform,r=e.validatePassword,o=e.onSubmit,c=e.error_message;return i.createElement(n.J9,{initialValues:{password:t},enableReinitialize:!0,validate:r,onSubmit:o},(function(e){var t=e.errors,n=e.isSubmitting,r=e.handleBlur,o=e.handleChange,l=e.handleSubmit,s=e.setFieldTouched,d=e.touched,p=e.values,f=e.validateForm;return i.createElement("form",{onSubmit:l},i.createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body cfd-password-modal__create-password-content"},i.createElement(u.Icon,{icon:a===_.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),i.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-password-modal__create-password-title"},i.createElement(m.Localize,{i18n_default_text:"Create a {{platform}} password",values:{platform:(0,_.getCFDPlatformLabel)(a)}})),i.createElement(u.Text,{size:"xs",align:"center",className:"cfd-password-modal__create-password-description"},i.createElement(m.Localize,{i18n_default_text:"You can use this password for all your {{platform}} accounts.",values:{platform:(0,_.getCFDPlatformLabel)(a)}})),i.createElement("div",{className:"input-element"},i.createElement(u.PasswordMeter,{input:p.password,has_error:!(!d.password||!t.password),custom_feedback_messages:(0,_.getErrorMessages)().password_warnings},(function(){return i.createElement(u.PasswordInput,{autoComplete:"new-password",label:(0,m.localize)("{{platform}} password",{platform:(0,_.getCFDPlatformLabel)(a)}),error:d.password&&t.password||(0===p.password.length?c:""),name:"password",value:p.password,onBlur:r,onChange:function(e){o(e),f().then((function(){s("password",!0)}))}})}))),i.createElement(u.FormSubmitButton,{is_disabled:!p.password||Object.keys(t).length>0,is_loading:n,label:(0,m.localize)("Create {{platform}} password",{platform:(0,_.getCFDPlatformLabel)(a)}),is_center:!0})))}))},A=function(e){var t=e.has_mt5_account,a=e.platform,n=e.error_message,r=e.validatePassword,o=e.submitPassword,c=i.useRef(),l=C(i.useState(""),2),s=l[0],d=l[1],m=[{component:i.createElement(O,{password:s,platform:a,error_message:n,validatePassword:r,onSubmit:function(e,n){var r;a===_.CFD_PLATFORMS.MT5&&t?(d(e.password),null===(r=c.current)||void 0===r||r.goNextStep()):o(e,n)}})},{component:i.createElement(E,{className:"cfd-password-modal__change-password-confirmation",platform:a,onConfirm:function(e,t){return o({password:s},t)},onCancel:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.goPrevStep()}})}];return i.createElement(u.MultiStep,{ref:c,steps:m})},k=function(e){var t,a,r,o,c=i.useMemo((function(){return e.should_show_server_form?(0,m.localize)("Next"):"PasswordReset"===e.error_type?(0,m.localize)("Try later"):(0,m.localize)("Add account")}),[e.should_show_server_form,e.error_type]),l=e.should_show_server_form||!(0,_.isDesktop)()||!e.should_set_trading_password||"PasswordReset"===e.error_type,s=(a=(t=e).should_set_trading_password,r=t.error_type,o=t.should_show_server_form,a&&"PasswordReset"!==r?(0,_.isDesktop)()?null:(0,m.localize)("Cancel"):o?(0,m.localize)("Back"):(0,m.localize)("Forgot password?")),d=function(){if(l)return e.should_set_trading_password?e.onCancel():e.onForgotPassword()};return"PasswordReset"===e.error_type?i.createElement(i.Fragment,null,i.createElement("div",{className:"cfd-password-reset"},i.createElement("div",{className:"cfd-password-modal__content cfd-password-modal__content--password-reset"},i.createElement(u.Text,{as:"p",line_height:"24",size:"xs"},i.createElement(m.Localize,{i18n_default_text:"Please try again in a minute."}))),i.createElement(n.J9,{onSubmit:e.closeModal,initialValues:{}},(function(e){var t=e.handleSubmit;return i.createElement("form",{onSubmit:t},i.createElement(u.FormSubmitButton,{has_cancel:l,cancel_label:s,onCancel:d,is_absolute:(0,_.isMobile)(),label:c}))})))):e.should_set_trading_password?i.createElement(A,{platform:e.platform,error_message:e.error_message,validatePassword:e.validatePassword,submitPassword:e.submitPassword,has_mt5_account:e.has_mt5_account}):i.createElement(n.J9,{initialValues:{password:""},enableReinitialize:!0,validate:e.validatePassword,onSubmit:e.submitPassword},(function(t){var a=t.errors,n=t.isSubmitting,r=t.handleBlur,o=t.handleChange,p=t.handleSubmit,f=t.setFieldTouched,g=t.touched,h=t.values,b=t.validateForm;return i.createElement("form",{onSubmit:p},i.createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body"},!e.should_set_trading_password&&i.createElement(u.Text,{size:"xs",className:"dc-modal__container_cfd-password-modal__account-title"},i.createElement(m.Localize,{i18n_default_text:"Enter your {{platform}} password to add a {{platform}} {{account}} account.",values:{platform:(0,_.getCFDPlatformLabel)(e.platform),account:e.account_title}})),i.createElement("div",{className:"input-element"},i.createElement(u.PasswordInput,{autoComplete:"new-password",label:(0,m.localize)("{{platform}} password",{platform:(0,_.getCFDPlatformLabel)(e.platform)}),error:g.password&&a.password||(0===h.password.length?e.error_message:""),name:"password",value:h.password,onBlur:r,onChange:function(e){o(e),b().then((function(){f("password",!0)}))}})),e.is_real_financial_stp&&!e.is_bvi&&i.createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},i.createElement(m.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (FX) Ltd. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA)."})),e.is_real_financial_stp&&e.is_bvi&&i.createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},i.createElement(m.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (BVI) Ltd. All trading in this account is subject to the regulations and guidelines of the British Virgin Islands Financial Services Commission (BVIFSC). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the British Virgin Islands Financial Services Commission (BVIFSC)."})),"PasswordError"===e.error_type&&i.createElement(u.Text,{size:"xs",as:"p",className:"dc-modal__container_mt5-password-modal__hint"},i.createElement(m.Localize,{i18n_default_text:"Hint: You may have entered your Deriv password, which is different from your {{platform}} password.",values:{platform:(0,_.getCFDPlatformLabel)(e.platform)}}))),i.createElement(u.FormSubmitButton,{is_disabled:!h.password,has_cancel:l,cancel_label:s,onCancel:d,is_absolute:(0,_.isMobile)(),is_loading:n,label:c,is_center:e.should_set_trading_password,form_error:e.form_error}))}))},L=function(e){var t=e.show_warning,a=void 0===t||t,n=e.platform;return a?i.createElement("div",{className:"cfd-password-modal__warning"},i.createElement(u.Text,{as:"p",className:"cfd-password-modal__warning-text",lineHeight:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},i.createElement(m.Localize,{i18n_default_text:"Due to an issue on our server, some of your {{platform}} accounts are unavailable at the moment. Please bear with us and thank you for your patience.",values:{platform:n===_.CFD_PLATFORMS.MT5?"DMT5":"Deriv X"}}))):null},j=function(e){var t,a,r=M({},e),o=i.useMemo((function(){return function(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.mt5_trading_servers).map((function(e){return x(x({},e),{label:"".concat(e.geolocation.region," ").concat(1===e.geolocation.sequence?"":e.geolocation.sequence," ").concat(e.disabled?"(".concat(e.message_to_client,")"):""),value:e.id,disabled:e.disabled})})).sort((function(e,t){return e.recommended?e:t})).sort((function(e,t){return e.disabled-t.disabled}))}),[r.mt5_trading_servers]);return i.createElement(i.Fragment,null,i.createElement(L,{platform:r.platform,show_warning:r.has_error}),i.createElement(n.J9,{initialValues:{server:null!==(t=null===(a=r.mt5_trading_servers.find((function(e){return!e.disabled})))||void 0===a?void 0:a.id)&&void 0!==t?t:""},validate:r.validateServer,onSubmit:function(e){return r.submitMt5Server(e.server)}},(function(e){var t,a=e.handleSubmit,n=e.setFieldValue,c=e.errors,l=e.values,s=e.isSubmitting;return i.createElement("form",{onSubmit:a},i.createElement("div",{className:"cfd-password-modal__content"},i.createElement("div",{className:"dc-modal__container_cfd-password-modal__body"},i.createElement("div",{className:"input-element"},i.createElement(u.RadioGroup,{className:"cfd-password-modal__radio",name:"server",required:!0,selected:null===(t=r.mt5_trading_servers.find((function(e){return!e.disabled})))||void 0===t?void 0:t.id,onToggle:function(e){e.persist(),n("server",e.target.value)}},o.map((function(e){return i.createElement(u.RadioGroup.Item,{key:e.value,label:e.label,value:e.value,disabled:e.disabled})})))))),i.createElement(u.FormSubmitButton,{is_disabled:s||!l.server||Object.keys(c).length>0,has_cancel:!0,cancel_label:(0,m.localize)("Cancel"),onCancel:r.closeModal,is_absolute:(0,_.isMobile)(),is_loading:s,label:(0,m.localize)("Next"),form_error:r.form_error}))})))},I=function(e){var t,a,n=e.account_title,r=e.account_type,o=e.account_status,c=e.disableCFDPasswordModal,l=e.email,d=e.error_message,p=e.error_type,f=e.form_error,g=e.getAccountStatus,h=e.history,b=e.is_eu,y=e.is_eu_country,w=e.is_fully_authenticated,E=e.is_logged_in,z=e.is_cfd_password_modal_enabled,S=e.is_cfd_success_dialog_enabled,M=e.is_dxtrade_allowed,D=e.platform,T=e.has_cfd_error,O=e.has_suspended_account,A=e.landing_companies,L=e.mt5_login_list,I=e.cfd_new_account,R=e.setCFDSuccessDialog,B=e.setMt5Error,U=e.submitMt5Password,V=e.submitCFDPassword,W=e.mt5_trading_servers,X=C(i.useState(""),2),q=X[0],$=X[1],H=C(i.useState(!0),2),Y=H[0],K=H[1],G="bvi"===(null==A||null===(t=A.mt_financial_company)||void 0===t||null===(a=t.financial_stp)||void 0===a?void 0:a.shortcode),J=Boolean(null==L?void 0:L.length),Z=Array.isArray(null==o?void 0:o.status)&&o.status.includes(D===_.CFD_PLATFORMS.MT5?"mt5_password_not_set":"dxtrade_password_not_set"),Q="PasswordError"===p,ee="PasswordReset"===p,te=C(i.useState(!1),2),ae=te[0],ne=te[1],re=function(){R(!1),B(!1),setTimeout((function(){return $("")}),300)},oe=function(){re(),c()},ie=function(){oe();var e=D===_.CFD_PLATFORMS.MT5?1:2;"real"===r.category?e=Number("".concat(e,"0")):"demo"===r.category&&(e=Number("".concat(e,"1")));var t=D===_.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";_.WS.verifyEmail(l,t,{url_parameters:{redirect_to:e}}),ne(!0)},ce=z&&!S&&(!T||Q||ee),le=!T&&S&&z&&Y,se=ae&&Y,de="real_financial_stp"===[r.category,r.type].join("_"),ue="real_synthetic"===[r.category,r.type].join("_"),_e=i.useMemo((function(){return(E?!b:!y)&&ue&&L.some((function(e){return"real"===e.account_type&&("gaming"===e.market_type||"synthetic"===e.market_type)}))&&!q&&D===_.CFD_PLATFORMS.MT5}),[b,y,E,ue,q,L,D]),me=i.useMemo((function(){return!!ce&&(_e?(0,_.isDesktop)():!!Z||(0,_.isDesktop)())}),[Z,ce,_e]),pe=i.useMemo((function(){return!(!ce||!_e&&Z)&&(0,_.isMobile)()}),[Z,ce,_e]),fe=b&&!w,ge=i.useMemo((function(){return"real"===r.category?fe?(0,m.localize)("Submit proof"):(0,m.localize)("Transfer now"):(0,m.localize)("Continue")}),[r,fe]);i.useEffect((function(){(!Q&&!ee&&T||S)&&$("")}),[T,S,Q,ee]);var he=i.createElement(k,{is_bvi:G,account_title:n,closeModal:oe,error_type:p,error_message:d,has_mt5_account:J,form_error:f,should_set_trading_password:Z,is_real_financial_stp:de,validatePassword:function(e){var t={};return(0,_.validLength)(e.password,{min:8,max:25})?(0,_.validPassword)(e.password)||(t.password=(0,_.getErrorMessages)().password()):t.password=(0,m.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.password.toLowerCase()===l.toLowerCase()&&(t.password=(0,m.localize)("Your password cannot be the same as your email address.")),t},should_show_server_form:_e,onForgotPassword:ie,submitPassword:function(e,t){D===_.CFD_PLATFORMS.MT5?U(x(x({},e),{},{server:q}),t):(e.platform=D,V(e,t))},platform:D,is_dxtrade_allowed:M,onCancel:oe}),be=i.createElement(j,{mt5_trading_servers:W,mt5_login_list:L,account_title:n,closeModal:oe,submitMt5Server:$,platform:D,has_error:O}),ve=i.createElement(u.Modal,{className:"cfd-password-modal",has_close_icon:!_e||Z,is_open:me,toggleModal:oe,should_header_stick_body:!0,renderTitle:function(){return i.createElement(P,{should_show_server_form:_e,should_set_trading_password:Z,account_title:n,is_password_reset_error:ee,platform:D})},onUnmount:function(){return g(D)},onExited:function(){return K(!0)},onEntered:function(){return K(!1)},width:(0,_.isMobile)()?"32.8rem":"auto"},_e?be:he),ye=i.createElement(u.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:pe,onClose:oe,wrapper_classname:"cfd-password-modal"},i.createElement(P,{should_show_server_form:_e,should_set_trading_password:Z,account_title:n,has_mt5_account:J,is_password_reset_error:ee,platform:D}),_e?be:he),we=fe?i.createElement(u.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},(0,m.localize)("Your account is ready")):"";return i.createElement(i.Fragment,null,ve,ye,i.createElement(v,{is_open:le,toggleModal:oe,onCancel:oe,onSubmit:function(){c(),re(),"real"===r.category&&(fe?h.push(_.routes.proof_of_identity):(sessionStorage.setItem("cfd_transfer_to_login_id",I.login),h.push(_.routes.cashier_acc_transfer)))},classNameMessage:"cfd-password-modal__message",heading:we,message:F(r.type,r.category,D,b,fe),icon:i.createElement(N,{platform:D,type:r.type,is_eu:b}),icon_size:"xlarge",text_submit:ge,has_cancel:"real"===r.category,has_close_icon:!1,width:(0,_.isMobile)()?"32.8rem":"auto",is_medium_button:(0,_.isMobile)()}),i.createElement(s(),{is_open:se,identifier_title:"trading_password",onClose:function(){return ne(!1)},onClickSendEmail:ie}))};I.propTypes={account_title:o().string,account_type:o().object,disableCFDPasswordModal:o().func,email:o().string,error_message:o().string,has_cfd_error:o().bool,is_eu:o().bool,is_eu_country:o().bool,is_logged_in:o().bool,is_cfd_password_modal_enabled:o().bool,is_cfd_success_dialog_enabled:o().bool,is_dxtrade_allowed:o().bool,platform:o().string,setMt5Error:o().func,setCFDSuccessDialog:o().func,submitMt5Password:o().func,submitCFDPassword:o().func,cfd_new_account:o().object};const R=(0,y.$j)((function(e){var t=e.client,a=e.modules;return{email:t.email,account_title:a.cfd.account_title,account_type:a.cfd.account_type,account_status:t.account_status,clearCFDError:a.cfd.clearCFDError,disableCFDPasswordModal:a.cfd.disableCFDPasswordModal,error_message:a.cfd.error_message,error_type:a.cfd.error_type,getAccountStatus:a.cfd.getAccountStatus,has_cfd_error:a.cfd.has_cfd_error,landing_companies:t.landing_companies,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_logged_in:t.is_logged_in,is_cfd_success_dialog_enabled:a.cfd.is_cfd_success_dialog_enabled,is_cfd_password_modal_enabled:a.cfd.is_cfd_password_modal_enabled,is_dxtrade_allowed:t.is_dxtrade_allowed,setMt5Error:a.cfd.setError,setCFDSuccessDialog:a.cfd.setCFDSuccessDialog,submitMt5Password:a.cfd.submitMt5Password,submitCFDPassword:a.cfd.submitCFDPassword,cfd_new_account:a.cfd.new_account_response,mt5_trading_servers:t.mt5_trading_servers,mt5_login_list:t.mt5_login_list,is_fully_authenticated:t.is_fully_authenticated}}))((0,c.withRouter)(I));var B=function(e){var t=e.clearCFDError,a=e.disableApp,n=e.enableApp,r=e.error_message,o=e.error_type,c=e.has_cfd_error,l=e.is_cfd_success_dialog_enabled,s=c&&!l&&!["PasswordReset","PasswordError"].includes(o);return i.createElement(u.Dialog,{title:(0,m.localize)("Somethingâ€™s not right"),confirm_button_text:(0,m.localize)("OK"),onConfirm:t,disableApp:a,enableApp:n,is_visible:s},r||i.createElement(m.Localize,{i18n_default_text:"Sorry, an error occured while processing your request."}))};B.propTypes={clearCFDError:o().func,disableApp:o().func,enableApp:o().func,error_message:o().string,has_cfd_error:o().bool,is_cfd_success_dialog_enabled:o().bool};const U=(0,y.$j)((function(e){var t=e.ui,a=e.modules;return{clearCFDError:a.cfd.clearCFDError,disableApp:t.disableApp,enableApp:t.enableApp,error_message:a.cfd.error_message,error_type:a.cfd.error_type,has_cfd_error:a.cfd.has_cfd_error,is_cfd_success_dialog_enabled:a.cfd.is_cfd_success_dialog_enabled}}))(B);var V=a("react-router-dom"),W=a("@deriv/account/dist/account/js/reset-trading-password-modal"),X=a.n(W),q=(a("@deriv/account/dist/account/css/reset-trading-password-modal.css"),a("./templates/_common/components/loading.jsx"));const $=function(){return i.createElement("div",{className:"cfd-real-accounts-display"},i.createElement(q.Z,null))};var H=function(e){var t=e.onClickSignup,a=e.platform;return i.createElement("div",{className:"cfd-dashboard__missing-real"},i.createElement("h1",{className:"cfd-dashboard__missing-real--heading"},a===_.CFD_PLATFORMS.MT5?i.createElement(m.Localize,{i18n_default_text:"You need a real account (fiat currency or cryptocurrency) in Deriv to create a real DMT5 account."}):i.createElement(m.Localize,{i18n_default_text:"To create a Deriv X real account, create a Deriv real account first."})),i.createElement(u.Button,{className:"cfd-dashboard__missing-real--button",onClick:t,type:"button",primary:!0},i.createElement("span",{className:"btn__text"},i.createElement(m.Localize,{i18n_default_text:"Create a Deriv account"}))))};H.propTypes={onClickSignup:o().func,platform:o().string};const Y=H;var K=a("@deriv/account/dist/account/js/file-uploader-container"),G=a.n(K),J=a("@deriv/account/dist/account/js/form-sub-header"),Z=a.n(J),Q=a("@deriv/account/dist/account/js/poa-expired"),ee=a.n(Q),te=a("@deriv/account/dist/account/js/poa-needs-review"),ae=a.n(te),ne=a("@deriv/account/dist/account/js/poa-verified"),re=a.n(ne),oe=a("@deriv/account/dist/account/js/poa-unverified"),ie=a.n(oe),ce=a("@deriv/account/dist/account/js/poa-submitted"),le=a.n(ce),se=a("@deriv/account/dist/account/js/poa-status-codes"),de=a.n(se),ue=["maxLength","name","optional"],_e=["citizen","tax_residence"];function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function be(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ve=function(e){var t=e.maxLength,a=e.name,r=e.optional,o=void 0!==r&&r,c=be(e,ue);return i.createElement(n.gN,{name:a},(function(e){var n=e.field,r=e.form,l=r.errors,s=r.touched;return i.createElement(u.Input,he({type:"text",required:!o,name:a,autoComplete:"off",maxLength:t||"30",error:s[n.name]&&l[n.name]},n,c))}))},ye=function(e){var t,a,r=e.onSave,o=e.is_fully_authenticated,c=e.is_loading,l=e.landing_company,s=e.residence_list,d=e.onCancel,p=e.onSubmit,f=e.value,g=e.index,h=e.form_error,b=[{text:(0,m.localize)("Hedging"),value:"Hedging"},{text:(0,m.localize)("Income Earning"),value:"Income Earning"},{text:(0,m.localize)("Speculative"),value:"Speculative"},{text:(0,m.localize)("Peer-to-peer exchange"),value:"Peer-to-peer exchange"}],v=null!==(t=null==l||null===(a=l.config)||void 0===a?void 0:a.tax_details_required)&&void 0!==t&&t,y=function(e){r(g,e),d()};return 0===s.length||c?i.createElement(u.Loading,{is_fullscreen:!1}):i.createElement(n.J9,{initialValues:{citizen:f.citizen,tax_residence:f.tax_residence,tax_identification_number:f.tax_identification_number,account_opening_reason:f.account_opening_reason},validateOnMount:!0,validateOnChange:!0,validateOnBlur:!0,validate:function(e){return function(e){var t,a=e.values,n=e.residence_list,r=e.account_opening_reason,o=e.is_tin_required,c=fe(n.filter((function(e){return e.text===a.tax_residence&&e.tin_format})),1)[0],l=fe(null!==(t=null==c?void 0:c.tin_format)&&void 0!==t?t:[],1)[0],s=l||"^[A-Za-z0-9./s-]{0,25}$",d={citizen:[function(e){return!!e},function(e){return n.map((function(e){return e.text})).includes(e)}],tax_residence:[function(e){return!!e},function(e){return n.map((function(e){return e.text})).includes(e)}],tax_identification_number:[function(e){return!(!a.tax_residence&&o||l)||!!e},function(e){return!s||e.match(s)}],account_opening_reason:[function(e){return!!e},function(e){return r.map((function(e){return e.value})).includes(e)}]},u={citizen:(0,m.localize)("Citizenship"),tax_residence:(0,m.localize)("Tax residence"),tax_identification_number:(0,m.localize)("Tax identification number"),account_opening_reason:(0,m.localize)("Account opening reason")},_={};return Object.entries(d).forEach((function(e){var t,n=fe(e,2),r=n[0],o=n[1].findIndex((function(e){return!e(a[r])}));-1!==o&&(_[r]=i.createElement(i.Fragment,null,(t=u[r],[(0,m.localize)("{{field_name}} is required",{field_name:t}),(0,m.localize)("{{field_name}} is not properly formatted.",{field_name:t})])[o]))})),_}({values:e,residence_list:s,account_opening_reason:b,is_tin_required:v})},onSubmit:function(e,t){return function(e,t,a,n,r,o){var i=e.citizen,c=e.tax_residence,l=be(e,_e),s=function(e,t,a){var n,r;return a.forEach((function(a){a.text===e&&(n=a),a.text===t&&(r=a)})),{citizen:n,tax_residence:r}}(i,c,o),d=s.citizen,u=s.tax_residence;n(a,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(Object(a),!0).forEach((function(t){pe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({citizen:void 0!==d?d.value:"",tax_residence:void 0!==u?u.value:""},l),t.setSubmitting,r)}(e,t,g,p,!(0,_.isDeepEqual)(f,e),s)}},(function(e){var t=e.handleSubmit,a=e.isSubmitting,r=e.handleChange,c=e.handleBlur,l=e.errors,d=e.touched,p=e.values,g=e.setFieldValue,v=e.isValid;return i.createElement(u.AutoHeightWrapper,{default_height:200,height_offset:(0,_.isDesktop)()?148:null},(function(e){var w=e.height,E=e.setRef;return i.createElement("form",{className:"cfd-financial-stp-modal__form",ref:E,onSubmit:t,autoComplete:"off"},i.createElement(u.Div100vhContainer,{className:"details-form",max_autoheight_offset:"179px",is_disabled:(0,_.isDesktop)()},i.createElement(u.Text,{as:"p",size:"xxxs",align:"center",className:"details-form__description"},i.createElement(m.Localize,{i18n_default_text:"Any information you provide is confidential and will be used for verification purposes only."})),i.createElement(u.ThemedScrollbars,{height:w,is_bypassed:(0,_.isMobile)()},i.createElement("div",{className:"details-form__elements"},i.createElement(Z(),{title:(0,m.localize)("Details")}),i.createElement("fieldset",{className:"account-form__fieldset"},i.createElement(u.DesktopWrapper,null,i.createElement(n.gN,{name:"citizen"},(function(e){var t=e.field;return i.createElement(u.Autocomplete,he({},t,{id:"real_mt5_citizenship","data-lpignore":"true",autoComplete:"off",type:"text",label:(0,m.localize)("Citizenship"),error:d.citizen&&l.citizen,disabled:f.citizen&&o,list_items:s,onItemSelection:function(e){return g("citizen",e.value?e.text:"",!0)},list_portal_id:"modal_root",required:!0}))}))),i.createElement(u.MobileWrapper,null,i.createElement(u.SelectNative,{placeholder:(0,m.localize)("Please select"),label:(0,m.localize)("Citizenship"),value:p.citizen,list_items:s,error:d.citizen&&l.citizen,disabled:f.citizen&&o,use_text:!0,onChange:function(e){return g("citizen",e.target.value,!0)},required:!0,should_hide_disabled_options:!1}))),i.createElement(Z(),{title:(0,m.localize)("Tax information")}),i.createElement("fieldset",{className:"account-form__fieldset"},i.createElement(u.DesktopWrapper,null,i.createElement(n.gN,{name:"tax_residence"},(function(e){var t=e.field;return i.createElement(u.Autocomplete,he({id:"real_mt5_tax_residence","data-lpignore":"true",type:"text",autoComplete:"off",label:(0,m.localize)("Tax residence"),error:d.tax_residence&&l.tax_residence,disabled:f.tax_residence&&o,list_items:s,onItemSelection:function(e){var t=e.value,a=e.text;return g("tax_residence",t?a:"",!0)},list_portal_id:"modal_root"},t))}))),i.createElement(u.MobileWrapper,null,i.createElement(u.SelectNative,{placeholder:(0,m.localize)("Please select"),label:(0,m.localize)("Tax residence"),value:p.tax_residence,error:d.tax_residence&&l.tax_residence,disabled:f.tax_residence&&o,list_items:s,use_text:!0,onChange:function(e){return g("tax_residence",e.target.value,!0)},required:!0}))),i.createElement("fieldset",{className:"account-form__fieldset"},i.createElement(ve,{id:"real_mt5_tax_identification_number",name:"tax_identification_number",label:(0,m.localize)("Tax identification number"),placeholder:(0,m.localize)("Tax identification number"),value:p.tax_identification_number,onBlur:c,optional:!0})),i.createElement(Z(),{title:(0,m.localize)("Account opening reason")}),i.createElement(n.gN,{name:"account_opening_reason"},(function(e){var t=e.field;return i.createElement(i.Fragment,null,i.createElement(u.DesktopWrapper,null,i.createElement(u.Dropdown,he({placeholder:(0,m.localize)("Account opening reason"),is_align_text_left:!0,name:t.name,list:b,value:p.account_opening_reason,onChange:r,handleBlur:c,error:d.account_opening_reason&&l.account_opening_reason,list_portal_id:"modal_root"},t))),i.createElement(u.MobileWrapper,null,i.createElement(u.SelectNative,he({placeholder:(0,m.localize)("Please select"),name:t.name,label:(0,m.localize)("Account opening reason"),list_items:b,value:p.account_opening_reason,error:d.account_opening_reason&&l.account_opening_reason,onChange:function(e){r(e),g("account_opening_reason",e.target.value,!0)}},t))))}))))),i.createElement(u.Modal.Footer,{is_bypassed:(0,_.isMobile)()},h&&i.createElement(u.FormSubmitErrorMessage,{message:h}),i.createElement(u.FormSubmitButton,{cancel_label:(0,m.localize)("Previous"),is_disabled:a||!v,is_absolute:(0,_.isMobile)(),label:(0,m.localize)("Next"),onCancel:function(){return y(p)}})))}))}))};ye.propTypes={is_fully_authenticated:o().bool,is_loading:o().bool,onCancel:o().func,onSave:o().func,onSubmit:o().func,residence_list:o().array,value:o().object,landing_company:o().object.isRequired};const we=ye;var Ee,ze=["onSave","onCancel","index","onSubmit","refreshNotifications"],xe=["document_file"];function Se(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(a),!0).forEach((function(t){De(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function De(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Fe(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Ne=function(e){var t=e.onSave,a=e.onCancel,r=e.index,o=e.onSubmit,c=e.refreshNotifications,l=Fe(e,ze),s=i.useRef(),d=Te(i.useState(!0),2),p=d[0],f=d[1],g=Te((0,u.useStateCallback)({poa_status:"none",resubmit_poa:!1,has_poi:!1,form_error:""}),2),h=g[0],b=g[1],v=Te((0,u.useStateCallback)({files:[],error_message:null}),2),y=v[0],w=v[1],E=Te(i.useState({}),2),z=E[0],x=E[1],S=function(e){t(r,e),a()},M=function(){var e,a=(e=regeneratorRuntime.mark((function e(a,n){var i,c,l,s,d,u,p,f,g,v,w,E,M,C,D;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.document_file,i=Fe(a,xe),n.setSubmitting(!0),e.next=4,_.WS.setSettings(i);case 4:if(!(c=e.sent).error){e.next=9;break}return b(Ce(Ce({},h),{form_error:c.error.message})),n.setSubmitting(!1),e.abrupt("return");case 9:return e.next=11,_.WS.authorized.storage.getSettings();case 11:if(l=e.sent,s=l.error,d=l.get_settings,!s){e.next=17;break}return b(Ce(Ce({},h),{form_error:s.message})),e.abrupt("return");case 17:return u=d.address_line_1,p=d.address_line_2,f=d.address_city,g=d.address_state,v=d.address_postcode,x({address_line_1:u,address_line_2:p,address_city:f,address_postcode:v,address_state:g}),b(Ce(Ce({},h),{form_error:""})),e.prev=20,e.next=23,Ee.current.upload();case 23:if(!(w=e.sent).warning){e.next=28;break}return b(Ce(Ce({},h),{form_error:w.warning})),n.setSubmitting(!1),e.abrupt("return");case 28:return e.next=30,_.WS.authorized.storage.getAccountStatus();case 30:if(E=e.sent,M=E.error,C=E.get_account_status,!M){e.next=37;break}return b(Ce(Ce({},h),{form_error:s.message})),n.setSubmitting(!1),e.abrupt("return");case 37:(D=C.authentication.identity)&&"none"===D.status?(b(Ce(Ce({},h),{form_error:(0,m.localize)("Identity confirmation failed. You will be redirected to the previous step.")})),setTimeout((function(){S(d)}),3e3)):(void 0,void 0,T=y.files,P=y.error_message,o(r,Ce(Ce(Ce({},z),h),{document_file:T,file_error_message:P}))),e.next=45;break;case 42:e.prev=42,e.t0=e.catch(20),b(Ce(Ce({},h),{form_error:e.t0.message}));case 45:n.setSubmitting(!1),t(r,a),o(r,a,n.setSubmitting);case 48:case"end":return e.stop()}var T,P}),e,null,[[20,42]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){Se(o,n,r,i,c,"next",e)}function c(e){Se(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(e,t){return a.apply(this,arguments)}}();i.useEffect((function(){_.WS.authorized.getAccountStatus().then((function(e){_.WS.wait("states_list").then((function(){var t=e.get_account_status.authentication,a=t.document,n=t.identity,r=!(!n||"none"!==n.status);b(Ce(Ce({},h),{poa_status:a.status,has_poi:r}),(function(){f(!1),c()}))}))}))}),[c,b]);var C=function(e,t){return h.poa_status!==de().verified&&0!==Object.keys(t).length},D=function(){b(Ce(Ce({},h),{resubmit_poa:!0}))},T=l.states_list,P=l.value,F=P.address_line_1,N=P.address_line_2,O=P.address_city,A=P.address_state,k=P.address_postcode,L=h.form_error,j=h.has_poi,I=h.poa_status,R=h.resubmit_poa,B=h.submitted_poa,U=!p&&(R||I===de().none);return i.createElement(n.J9,{initialValues:{address_line_1:F,address_line_2:N,address_city:O,address_state:A,address_postcode:k,document_file:y.files},validateOnMount:!0,validate:function(e){if([de().verified,de().pending].includes(h.poa_status))return{};var t={address_line_1:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,_.validAddress)(e)},function(e){return(0,_.validLength)(e,{max:70})}],address_line_2:[function(e){return!e||(0,_.validAddress)(e)},function(e){return(0,_.validLength)(e,{max:70})}],address_city:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,_.validLength)(e,{min:1,max:35})},function(e){return(0,_.validLetterSymbol)(e)}],address_state:[function(e){return(0,_.validLength)(e,{max:35})}],address_postcode:[function(e){return(0,_.validLength)(e,{max:20})},function(e){return!e||(0,_.validPostCode)(e)}]},a={address_line_1:[(0,m.localize)("First line of address is required"),(0,m.localize)("First line of address is not in a proper format."),(0,m.localize)("This should not exceed {{max}} characters.",{max:70})],address_line_2:[(0,m.localize)("Second line of address is not in a proper format."),(0,m.localize)("This should not exceed {{max}} characters.",{max:70})],address_city:[(0,m.localize)("Town/City is required."),(0,m.localize)("This should not exceed {{max_number}} characters.",{max_number:35}),(0,m.localize)("Town/City is not in a proper format.")],address_state:[(0,m.localize)("State/Province is not in a proper format.")],address_postcode:[(0,m.localize)("This should not exceed {{max_number}} characters.",{max_number:20}),(0,m.localize)("Only letters, numbers, space, and hyphen are allowed.")]},n={};return Object.entries(t).forEach((function(t){var r=Te(t,2),o=r[0],i=r[1].findIndex((function(t){return!t(e[o])}));-1!==i&&(n[o]=a[o][i])})),n},enableReinitialize:!0,onSubmit:M,innerRef:s},(function(e){e.dirty;var a=e.errors,o=e.handleSubmit,c=e.isSubmitting,l=e.handleBlur,s=e.handleChange,d=e.setFieldTouched,f=e.setFieldValue,g=e.values,h=e.touched;return i.createElement(u.AutoHeightWrapper,{default_height:200},(function(e){var b=e.setRef,v=e.height;return i.createElement("form",{ref:b,onSubmit:o,className:"cfd-proof-of-address"},i.createElement(u.Div100vhContainer,{className:"details-form",height_offset:"100px",is_disabled:(0,_.isDesktop)()},p&&i.createElement(u.Loading,{is_fullscreen:!1}),U&&i.createElement(u.ThemedScrollbars,{autohide:!1,height:"".concat(v-77,"px"),is_bypassed:(0,_.isMobile)()},i.createElement("div",{className:"cfd-proof-of-address__field-area"},i.createElement(Z(),{title:(0,m.localize)("Address information")}),i.createElement(ve,{name:"address_line_1",maxLength:255,required:!0,label:(0,m.localize)("First line of address*"),placeholder:(0,m.localize)("First line of address*"),onBlur:l}),i.createElement(ve,{name:"address_line_2",maxLength:255,label:(0,m.localize)("Second line of address (optional)"),optional:!0,placeholder:(0,m.localize)("Second line of address"),onBlur:l}),i.createElement("div",{className:"cfd-proof-of-address__inline-fields"},i.createElement(ve,{maxLength:255,name:"address_city",required:!0,label:(0,m.localize)("Town/City*"),placeholder:(0,m.localize)("Town/City*"),onBlur:l}),i.createElement("fieldset",{className:"address-state__fieldset"},(null==T?void 0:T.length)>0?i.createElement(i.Fragment,null,i.createElement(u.DesktopWrapper,null,i.createElement(n.gN,{name:"address_state"},(function(e){var t=e.field;return i.createElement(u.Dropdown,{id:"address_state",className:"address_state-dropdown",is_align_text_left:!0,list:T,error:h[t.name]&&a[t.name],name:"address_state",value:g.address_state,onChange:s,placeholder:(0,m.localize)("State/Province"),list_portal_id:"modal_root"})}))),i.createElement(u.MobileWrapper,null,i.createElement(u.SelectNative,{label:(0,m.localize)("State/Province"),value:g.address_state,list_items:T,error:h.address_state&&a.address_state,onChange:function(e){s(e),f("address_state",e.target.value,!0)}}))):i.createElement(ve,{name:"address_state",label:(0,m.localize)("State/Province"),placeholder:(0,m.localize)("State/Province"),value:g.address_state,onBlur:l})),i.createElement(ve,{maxLength:255,name:"address_postcode",label:(0,m.localize)("Postal/ZIP code"),placeholder:(0,m.localize)("Postal/ZIP code"),onBlur:l,optional:!0})),i.createElement("div",{className:"cfd-proof-of-address__file-upload"},i.createElement(G(),{onRef:function(e){return Ee=e},getSocket:_.WS.getSocket,onFileDrop:function(e){return function(e,a,n,o,i){n("document_file",!0),o("document_file",e),w({files:e,error_message:a},(function(){"function"==typeof t&&t(r,Ce(Ce({},i),{document_file:e}))}))}(e.files,e.error_message,d,f,g)}})))),I!==de().none&&!R&&i.createElement(u.ThemedScrollbars,{height:v,is_bypassed:(0,_.isMobile)()},B&&i.createElement(le(),{is_description_enabled:!1,has_poi:j}),I===de().pending&&i.createElement(ae(),{is_description_enabled:!1}),I===de().verified&&i.createElement(re(),{is_description_enabled:!1,has_poi:j}),I===de().expired&&i.createElement(ee(),{onClick:D}),(I===de().rejected||I===de().suspected)&&i.createElement(ie(),null)),i.createElement(u.Modal.Footer,{is_bypassed:(0,_.isMobile)()},(I===de().verified||U)&&i.createElement(u.FormSubmitButton,{has_cancel:!0,cancel_label:(0,m.localize)("Previous"),is_disabled:C(0,a)||!(I===de().verified)&&y.files&&y.files.length<1||!!y.error_message,label:I===de().verified?(0,m.localize)("Submit"):(0,m.localize)("Next"),is_absolute:(0,_.isMobile)(),is_loading:c,form_error:L,onCancel:function(){return S(g)}}))))}))}))};Ne.propTypes={onCancel:o().func,onSave:o().func,onSubmit:o().func,storeProofOfAddress:o().func,value:o().object};const Oe=Ne;var Ae=a("@deriv/account/dist/account/js/proof-of-identity-container"),ke=a.n(Ae),Le=["authentication_status","form_error","index","onCancel","onSubmit","value"];function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const Re=(0,y.$j)((function(e){var t=e.client,a=e.common;return{account_status:t.account_status,app_routing_history:a.app_routing_history,fetchResidenceList:t.fetchResidenceList,is_switching:t.is_switching,is_virtual:t.is_virtual,refreshNotifications:t.refreshNotifications,routeBackInApp:a.routeBackInApp,should_allow_authentication:t.should_allow_authentication}}))((function(e){var t=e.authentication_status,a=e.form_error,r=e.index,o=e.onCancel,c=e.onSubmit,l=e.value,s=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Le),d=t.identity_status,p=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ie(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState("none"),2),f=p[0],g=p[1],h=i.useCallback((function(){var e={};return["pending"].includes(f)&&["pending","verified"].includes(d)||(e.poi_state=!0),e}),[f,d]),b=!(["pending"].includes(f)||["pending","verified"].includes(d));return i.createElement(n.J9,{initialValues:{poi_state:l.poi_state},validate:h,onSubmit:function(e){return c(r,{poi_state:f},e.setSubmitting)}},(function(e){var t=e.handleSubmit;return i.createElement(u.AutoHeightWrapper,{default_height:200},(function(e){var n=e.setRef,l=e.height;return i.createElement("form",{ref:n,className:"cfd-proof-of-identity",onSubmit:t},i.createElement("div",{className:"details-form"},i.createElement("input",{type:"hidden",name:"poi_state",value:f,readOnly:!0}),i.createElement(u.Div100vhContainer,{className:"cfd-proof-of-identity__fields",height_offset:"180px",is_disabled:(0,_.isDesktop)()},i.createElement(ke(),je({height:l,is_from_external:!0,onStateChange:function(e){return g(e)}},s))),i.createElement(u.Modal.Footer,{is_bypassed:(0,_.isMobile)()},i.createElement(u.FormSubmitButton,{has_cancel:!0,cancel_label:(0,m.localize)("Previous"),is_disabled:b,is_absolute:(0,_.isMobile)(),label:(0,m.localize)("Next"),onCancel:o,form_error:a,onClick:function(){b||c(r,{poi_state:f},!1)}}))))}))}))}));function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(){return(Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function We(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function Xe(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){We(o,n,r,i,c,"next",e)}function c(e){We(o,n,r,i,c,"throw",e)}i(void 0)}))}}function qe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(r,e);var t,a,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ye(e);if(t){var r=Ye(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return He(this,a)}}(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).clearError=function(){t.setState({form_error:""})},t.nextStep=function(){t.clearError(),t.has_more_steps?t.goNext():t.finishWizard()},t.finishWizard=function(){t.props.openPendingDialog(),t.props.toggleModal()},t.prevStep=function(){t.setState({step:t.state.step-1,form_error:""})},t.updateValue=function(){var e=Xe(regeneratorRuntime.mark((function e(a,n,r){var o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length>3&&void 0!==i[3]&&!i[3]||0!==a){e.next=10;break}return e.next=4,_.WS.setSettings(n);case 4:if(!(o=e.sent).error){e.next=9;break}return t.setState({form_error:o.error.message}),r(!1),e.abrupt("return");case 9:t.initiatePersonalDetails(r);case 10:if(0!==a){e.next=13;break}return e.next=13,_.WS.triggerMt5DryRun({email:t.props.client_email});case 13:t.saveFormData(a,n),t.nextStep(r);case 15:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),t.initiatePersonalDetails=function(){var e=Xe(regeneratorRuntime.mark((function e(a){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.WS.authorized.storage.getSettings();case 2:if(!(n=e.sent).error){e.next=7;break}return t.setState({form_error:n.error.message}),"function"==typeof a&&a(!1),e.abrupt("return");case 7:r=Object.assign([],t.state.items),n.get_settings.citizen&&(r[0].form_value.citizen=t.transform(n.get_settings.citizen)),n.get_settings.tax_residence&&(r[0].form_value.tax_residence=t.transform(n.get_settings.tax_residence)),n.get_settings.tax_identification_number&&(r[0].form_value.tax_identification_number=n.get_settings.tax_identification_number),n.get_settings.account_opening_reason&&(r[0].form_value.account_opening_reason=n.get_settings.account_opening_reason),t.setState({items:r},t.props.refreshNotifications);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.transform=function(e){var a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.props.residence_list.filter((function(t){return t.value===e})),1)[0];return(0,_.getPropertyValue)(a,["text"])||e},t.goNext=function(){t.setState({step:t.state.step+1})},t.getCurrent=function(e){return e?t.state.items[t.state_index][e]:t.state.items[t.state_index]},t.saveFormData=function(e,a){var n=Object.assign([],t.state.items);n[e].form_value=a,0===t.state_index&&(n[0].form_value.citizen=t.transform(a.citizen),n[0].form_value.tax_residence=t.transform(a.tax_residence)),t.setState({items:n})},t.state={finished:void 0,step:0,form_error:"",is_loading:!1,items:[{header:{active_title:(0,m.localize)("Complete your personal details"),title:(0,m.localize)("Personal details")},body:we,form_value:{citizen:"",tax_residence:"",tax_identification_number:"",account_opening_reason:""},props:["residence_list","is_fully_authenticated","landing_company"]},{header:{active_title:(0,m.localize)("Complete your proof of identity"),title:(0,m.localize)("Proof of identity")},body:Re,form_value:{poi_state:"unknown"},props:["addNotificationByKey","authentication_status","refreshNotifications","removeNotificationMessage","removeNotificationByKey"]},{header:{active_title:(0,m.localize)("Complete your proof of address"),title:(0,m.localize)("Proof of address")},body:Oe,form_value:{address_line_1:e.get_settings.address_line_1,address_line_2:e.get_settings.address_line_2,address_city:e.get_settings.address_city,address_state:e.get_settings.address_state,address_postcode:e.get_settings.address_postcode,upload_file:""},props:["states_list","get_settings","storeProofOfAddress","refreshNotifications"]}]},t}return t=r,(a=[{key:"state_index",get:function(){return this.state.step}},{key:"has_more_steps",get:function(){return this.state.step+1<this.state.items.length}},{key:"componentDidMount",value:function(){var e=this;0===this.state_index&&(this.setState({is_loading:!0}),this.initiatePersonalDetails().then((function(){e.setState({is_loading:!1})})))}},{key:"render",value:function(){var e=this,t=this.getCurrent("body"),a=this.getCurrent("form_value"),n=(this.getCurrent("props")||[]).reduce((function(t,a){return Object.assign(t,(n={},r=a,o=e.props[a],r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o}),{}),r=this.getCurrent("height")||"auto";return i.createElement(u.Div100vhContainer,{className:"cfd-financial-stp-modal",id:"real_mt5_financial_stp_account_opening",is_disabled:(0,_.isDesktop)(),height_offset:"40px"},i.createElement("div",{className:"cfd-financial-stp-modal__heading"},this.getCurrent()&&i.createElement(i.Fragment,null,i.createElement(u.DesktopWrapper,null,i.createElement(u.FormProgress,{steps:this.state.items,current_step:this.state.step})),i.createElement(u.MobileWrapper,null,i.createElement("div",{className:"cfd-financial-stp-modal__header-steps"},i.createElement("h4",{className:"cfd-financial-stp-modal__header-steps-title"},i.createElement(m.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:this.state.step+1,steps:this.state.items.length,step_title:this.state.items[this.state.step].header.title}})),this.state.items[this.state.step].header.active_title&&i.createElement("h4",{className:"cfd-financial-stp-modal__header-steps-subtitle"},this.state.items[this.state.step].header.active_title))))),i.createElement("div",{className:"cfd-financial-stp-modal__body"},i.createElement(t,Ue({value:a,index:this.state_index,onSubmit:this.updateValue,height:r,is_loading:this.state.is_loading,onCancel:this.prevStep,onSave:this.saveFormData,form_error:this.state.form_error},n))))}}])&&qe(t.prototype,a),r}(i.Component);Ke.propTypes={openPendingDialog:o().func,toggleModal:o().func};const Ge=(0,y.$j)((function(e){var t=e.client,a=e.modules.cfd,n=e.ui;return{addNotificationByKey:n.addNotificationMessageByKey,authentication_status:t.authentication_status,get_settings:t.account_settings,client_email:t.email,is_fully_authenticated:t.is_fully_authenticated,landing_company:t.landing_company,openPendingDialog:a.openPendingDialog,refreshNotifications:t.refreshNotifications,removeNotificationMessage:n.removeNotificationMessage,removeNotificationByKey:n.removeNotificationByKey,residence_list:t.residence_list,states_list:t.states_list,storeProofOfAddress:a.storeProofOfAddress}}))(Ke),Je=(0,y.$j)((function(e){var t=e.ui,a=e.modules;return{disableApp:t.disableApp,disableMt5FinancialStpModal:a.cfd.disableMt5FinancialStpModal,enableApp:t.enableApp,is_mt5_financial_stp_modal_open:a.cfd.is_mt5_financial_stp_modal_open}}))((function(e){var t=e.disableApp,a=e.disableMt5FinancialStpModal,n=e.enableApp,r=e.is_mt5_financial_stp_modal_open;return i.createElement(i.Fragment,null,i.createElement(u.DesktopWrapper,null,i.createElement(u.Modal,{id:"mt5_financial_stp_signup_modal",className:"mt5-financial-stp-signup-modal",disableApp:t,width:"904px",title:(0,m.localize)("Create a DMT5 real Financial STP account"),enableApp:n,is_open:r,has_close_icon:!0,height:"740px",toggleModal:a},i.createElement(Ge,{toggleModal:a}))),i.createElement(u.MobileWrapper,null,i.createElement(u.MobileDialog,{portal_element_id:"modal_root",title:(0,m.localize)("Create a DMT5 real Financial STP account"),wrapper_classname:"mt5-financial-stp-signup-modal",visible:r,onClose:a},i.createElement(Ge,{toggleModal:a}))))}));function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(a),!0).forEach((function(t){et(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function et(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?at(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var nt=function(e){var t,a,n,r=e.landing_companies,o=e.platform,c=e.is_logged_in,l=e.is_uk,s=c?(o===_.CFD_PLATFORMS.MT5?[null==r||null===(t=r.mt_gaming_company)||void 0===t?void 0:t.financial,null==r||null===(a=r.mt_financial_company)||void 0===a?void 0:a.financial,(null==r||null===(n=r.mt_financial_company)||void 0===n?void 0:n.financial_stp)&&o===_.CFD_PLATFORMS.MT5]:[null==r?void 0:r.dxtrade_gaming_company,null==r?void 0:r.dxtrade_financial_company]).filter(Boolean).length:o===_.CFD_PLATFORMS.MT5?3:2,d=l?i.createElement("div",null,(0,m.localize)("Forex, stocks, stock indices, cryptocurrencies"),i.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"**"),(0,m.localize)(", synthetic indices")):(0,m.localize)("Forex, stocks, stock indices, cryptocurrencies, synthetic indices");return[{attribute:(0,m.localize)("Account currency"),mt5:{synthetic:(0,m.localize)("USD"),synthetic_eu:(0,m.localize)("EUR"),financial:(0,m.localize)("USD"),financial_au:(0,m.localize)("USD"),financial_eu:(0,m.localize)("EUR/GBP/USD"),financial_stp:(0,m.localize)("USD"),footnote:null},dxtrade:{synthetic:(0,m.localize)("USD"),synthetic_eu:(0,m.localize)("EUR"),financial:(0,m.localize)("USD"),financial_au:(0,m.localize)("USD"),financial_eu:(0,m.localize)("EUR/GBP"),footnote:null}},{attribute:(0,m.localize)("Maximum leverage"),mt5:{synthetic:(0,m.localize)("Up to 1:1000"),synthetic_eu:(0,m.localize)("Up to 1:1000"),financial:(0,m.localize)("Up to 1:1000"),financial_au:(0,m.localize)("Up to 1:30"),financial_eu:(0,m.localize)("Up to 1:30"),financial_stp:(0,m.localize)("Up to 1:100"),footnote:(0,m.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")},dxtrade:{synthetic:(0,m.localize)("Up to 1:500"),synthetic_eu:(0,m.localize)("Up to 1:1000"),financial:(0,m.localize)("Up to 1:1000"),financial_au:(0,m.localize)("Up to 1:30"),financial_eu:(0,m.localize)("Up to 1:30"),footnote:(0,m.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")}},{attribute:(0,m.localize)("Order execution"),mt5:{synthetic:(0,m.localize)("Market"),synthetic_eu:(0,m.localize)("Market"),financial:(0,m.localize)("Market"),financial_au:(0,m.localize)("Market"),financial_eu:(0,m.localize)("Market"),financial_stp:(0,m.localize)("Market"),footnote:(0,m.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:s})},dxtrade:{synthetic:(0,m.localize)("Market"),synthetic_eu:(0,m.localize)("Market"),financial:(0,m.localize)("Market"),financial_au:(0,m.localize)("Market"),financial_eu:(0,m.localize)("Market"),footnote:(0,m.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:s})}},{attribute:(0,m.localize)("Spread"),mt5:{synthetic:(0,m.localize)("Fixed/Variable"),synthetic_eu:(0,m.localize)("Fixed/Variable"),financial:(0,m.localize)("Variable"),financial_au:(0,m.localize)("Variable"),financial_eu:(0,m.localize)("Fixed/Variable"),financial_stp:(0,m.localize)("Variable"),footnote:(0,m.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")},dxtrade:{synthetic:(0,m.localize)("Fixed/Variable"),synthetic_eu:(0,m.localize)("Fixed/Variable"),financial:(0,m.localize)("Variable"),financial_au:(0,m.localize)("Variable"),financial_eu:(0,m.localize)("Variable"),footnote:(0,m.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")}},{attribute:(0,m.localize)("Commission"),mt5:{synthetic:(0,m.localize)("No"),synthetic_eu:(0,m.localize)("No"),financial:(0,m.localize)("No"),financial_au:(0,m.localize)("No"),financial_eu:(0,m.localize)("No"),financial_stp:(0,m.localize)("No"),footnote:(0,m.localize)("Deriv charges no commission across all account types.")},dxtrade:{synthetic:(0,m.localize)("No"),synthetic_eu:(0,m.localize)("No"),financial:(0,m.localize)("No"),financial_au:(0,m.localize)("No"),financial_eu:(0,m.localize)("No"),footnote:(0,m.localize)("Deriv charges no commission across all account types.")}},{attribute:(0,m.localize)("Minimum deposit"),mt5:{synthetic:(0,m.localize)("No"),synthetic_eu:(0,m.localize)("No"),financial:(0,m.localize)("No"),financial_au:(0,m.localize)("No"),financial_eu:(0,m.localize)("No"),financial_stp:(0,m.localize)("No"),footnote:null},dxtrade:{synthetic:(0,m.localize)("No"),synthetic_eu:(0,m.localize)("No"),financial:(0,m.localize)("No"),financial_au:(0,m.localize)("No"),financial_eu:(0,m.localize)("No"),footnote:null}},{attribute:(0,m.localize)("Margin call"),mt5:{synthetic:(0,m.localize)("100%"),synthetic_eu:(0,m.localize)("100%"),financial:(0,m.localize)("100%"),financial_au:(0,m.localize)("100%"),financial_eu:(0,m.localize)("100%"),financial_stp:(0,m.localize)("100%"),footnote:(0,m.localize)("Youâ€™ll get a warning, known as margin call, if your account balance drops down close to the stop out level.")},dxtrade:{synthetic:(0,m.localize)("100%"),synthetic_eu:(0,m.localize)("100%"),financial:(0,m.localize)("100%"),financial_au:(0,m.localize)("100%"),financial_eu:(0,m.localize)("100%"),footnote:(0,m.localize)("Youâ€™ll get a warning, known as margin call, if your account balance drops down close to the stop out level.")}},{attribute:(0,m.localize)("Stop out level"),mt5:{synthetic:(0,m.localize)("50%"),synthetic_eu:(0,m.localize)("50%"),financial:(0,m.localize)("50%"),financial_au:(0,m.localize)("50%"),financial_eu:(0,m.localize)("50%"),financial_stp:(0,m.localize)("50%"),footnote:(0,m.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")},dxtrade:{synthetic:(0,m.localize)("50%"),synthetic_eu:(0,m.localize)("50%"),financial:(0,m.localize)("50%"),financial_au:(0,m.localize)("50%"),financial_eu:(0,m.localize)("50%"),footnote:(0,m.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")}},{attribute:(0,m.localize)("Number of assets"),mt5:{synthetic:(0,m.localize)("20+"),synthetic_eu:(0,m.localize)("20+"),financial:(0,m.localize)("150+"),financial_au:(0,m.localize)("100+"),financial_eu:(0,m.localize)("50+"),financial_stp:(0,m.localize)("70+"),footnote:null},dxtrade:{synthetic:(0,m.localize)("20+"),synthetic_eu:(0,m.localize)("20+"),financial:(0,m.localize)("90+"),financial_au:(0,m.localize)("90+"),financial_eu:(0,m.localize)("90+"),footnote:null}},{attribute:(0,m.localize)("Cryptocurrency trading"),mt5:{synthetic:(0,m.localize)("N/A"),synthetic_eu:(0,m.localize)("N/A"),financial:(0,m.localize)("24/7"),financial_au:(0,m.localize)("24/7"),financial_eu:(0,m.localize)("24/7"),financial_stp:(0,m.localize)("24/7"),footnote:(0,m.localize)("Indicates the availability of cryptocurrency trading on a particular account.")},dxtrade:{synthetic:(0,m.localize)("N/A"),synthetic_eu:(0,m.localize)("N/A"),financial:(0,m.localize)("24/7"),financial_au:(0,m.localize)("24/7"),financial_eu:(0,m.localize)("24/7"),footnote:(0,m.localize)("Indicates the availability of cryptocurrency trading on a particular account.")}},{attribute:(0,m.localize)("Trading instruments"),mt5:{synthetic:(0,m.localize)("Synthetics"),synthetic_eu:(0,m.localize)("Synthetics"),financial:(0,m.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies, Stocks, and Stock Indices"),financial_au:(0,m.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies, Stocks, and Stock Indices"),financial_eu:d,financial_stp:(0,m.localize)("FX-majors, FX-minors, FX-exotics, Cryptocurrencies"),footnote:null},dxtrade:{synthetic:(0,m.localize)("Synthetics"),synthetic_eu:(0,m.localize)("Synthetics"),financial:(0,m.localize)("FX-majors (standard/micro lots), FX-minors, Smart-FX, Commodities, Cryptocurrencies"),financial_au:(0,m.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies"),financial_eu:(0,m.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies (except UK)"),footnote:null}}]},rt=function(e){var t=e.name,a=e.counter,n=tt(i.useState(!1),2),r=n[0],o=n[1];return a?i.createElement(i.Fragment,null,i.createElement(u.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer",onClick:function(){return o(!r)}},t,i.createElement(u.Text,{weight:"bold",as:"span",line_height:"x",size:"xxxs",className:"counter"},a))):i.createElement(u.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer"},t)},ot=function(e){var t=e.landing_companies,a=e.is_logged_in,n=e.show_eu_related,r=e.platform,o=e.residence,c=e.is_uk,l="au"===o;return function(e,t,a,n,r,o){var c=function(e,t,a){return o?t:n?a:e},l=0;return t.filter((function(e){return e[r]})).map((function(t){var o,s,d,u=t.attribute,m=t.mt5,p=void 0===m?{}:m,f=t.dxtrade,g=void 0===f?{}:f,h=r===_.CFD_PLATFORMS.MT5?p:g,b=h.synthetic,v=h.synthetic_eu,y=h.financial_stp,w=h.financial,E=h.financial_au,z=h.financial_eu,x=h.footnote,S={synthetic:n?v:b},M={financial:c(w,E,z)};return a?Qe(Qe(Qe({attribute:i.createElement(rt,{name:u,counter:x?++l:null})},null!=e&&null!==(o=e.mt_gaming_company)&&void 0!==o&&o.financial?S:{}),null!=e&&null!==(s=e.mt_financial_company)&&void 0!==s&&s.financial?M:{}),null!=e&&null!==(d=e.mt_financial_company)&&void 0!==d&&d.financial_stp&&r===_.CFD_PLATFORMS.MT5?{financial_stp:y}:{}):r===_.CFD_PLATFORMS.DXTRADE?Qe(Qe({attribute:i.createElement(rt,{name:u,counter:x?++l:null})},S),M):Qe(Qe(Qe({attribute:i.createElement(rt,{name:u,counter:x?++l:null})},S),M),{financial_stp:y})}))}(t,nt({landing_companies:t,platform:r,is_logged_in:a,is_uk:c}),a,n,r,l)},it=function(e){var t=e.platform,a=e.show_risk_message,n=e.landing_companies,r=e.is_logged_in,o=e.is_uk;return i.createElement("div",{className:"cfd-compare-account--hint"},i.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},i.createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),i.createElement(m.Localize,{i18n_default_text:"At bank rollover, liquidity in the forex markets is reduced and may increase the spread and processing time for client orders. This happens around 21:00 GMT during daylight saving time, and 22:00 GMT non-daylight saving time."})),a&&i.createElement(i.Fragment,null,i.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},i.createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),i.createElement(m.Localize,{i18n_default_text:"Margin call and stop out level will change from time to time based on market condition."})),i.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},i.createElement(u.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"*"),i.createElement(m.Localize,{i18n_default_text:"To protect your portfolio from adverse market movements due to the market opening gap, we reserve the right to decrease leverage on all offered symbols for financial accounts before market close and increase it again after market open. Please make sure that you have enough funds available in your {{platform}} account to support your positions at all times.",values:{platform:t===_.CFD_PLATFORMS.MT5?(0,m.localize)("MT5"):(0,m.localize)("Deriv X")}})),o&&i.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},i.createElement(u.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"**"),i.createElement(m.Localize,{i18n_default_text:"Cryptocurrency trading is not available for clients residing in the United Kingdom.",values:{platform:t===_.CFD_PLATFORMS.MT5?(0,m.localize)("MT5"):(0,m.localize)("Deriv X")}}))),nt({landing_companies:n,platform:t,is_logged_in:r,is_uk:o}).filter((function(e){var a;return!(null===(a=e[t])||void 0===a||!a.footnote)})).map((function(e,a){return i.createElement("div",{key:a,className:"cfd-compare-accounts__bullet-wrapper"},i.createElement(u.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},a+1),i.createElement("div",{className:"cfd-compare-accounts__footnote"},i.createElement(u.Text,{as:"p",size:"xs",weight:"bold",color:"prominent",className:"cfd-compare-accounts__footnote-title"},e.attribute),i.createElement(u.Text,{size:"xs",color:"prominent"},e[t].footnote)))})))},ct=function(e){var t=e.landing_companies,a=e.is_logged_in,n=e.platform,r=e.show_eu_related,o=e.residence,c=e.is_eu,l=e.is_uk,s=tt(i.useState([]),2),d=s[0],p=s[1],f=tt(i.useState(n===_.CFD_PLATFORMS.DXTRADE?"1.5fr 1fr 2fr":"1.5fr 1fr 2fr 1fr"),2),g=f[0],h=f[1];i.useEffect((function(){var e,i,c;p(ot({landing_companies:t,is_logged_in:a,platform:n,show_eu_related:r,residence:o,is_uk:l})),a&&(n===_.CFD_PLATFORMS.MT5?h("1.5fr ".concat(null!=t&&null!==(e=t.mt_gaming_company)&&void 0!==e&&e.financial?"1fr":""," ").concat(null!=t&&null!==(i=t.mt_financial_company)&&void 0!==i&&i.financial?"2fr":""," ").concat(null!=t&&null!==(c=t.mt_financial_company)&&void 0!==c&&c.financial_stp?" 1fr ":"")):h("1.5fr ".concat(null!=t&&t.dxtrade_gaming_company?"1fr":""," ").concat(null!=t&&t.dxtrade_financial_company?"2fr":"")))}),[null==t?void 0:t.mt_financial_company,null==t?void 0:t.mt_gaming_company,a,t,n,r,o]);var b=n===_.CFD_PLATFORMS.MT5||!r;return i.createElement(u.Div100vhContainer,{height_offset:"40px",is_bypassed:(0,_.isDesktop)()},i.createElement(u.ThemedScrollbars,{className:"cfd-compare-accounts",style:{"--cfd-compare-accounts-template-columns":g}},i.createElement("div",{className:"cfd-compare-accounts__table-wrapper"},i.createElement(u.Table,{className:"cfd-compare-accounts__table"},i.createElement(u.Table.Header,null,i.createElement(u.Table.Row,{className:"cfd-compare-accounts__table-row"},i.createElement(u.Table.Head,null),a?i.createElement(i.Fragment,null,(0,_.isLandingCompanyEnabled)({landing_companies:t,platform:n,type:"gaming"})&&i.createElement(u.Table.Head,null,(0,m.localize)("Synthetic")),(0,_.isLandingCompanyEnabled)({landing_companies:t,platform:n,type:"financial"})&&i.createElement(u.Table.Head,null,c?(0,m.localize)("CFDs"):(0,m.localize)("Financial"),i.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),(0,_.isLandingCompanyEnabled)({landing_companies:t,platform:n,type:"financial_stp"})&&i.createElement(u.Table.Head,null,(0,m.localize)("Financial STP"),i.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))):i.createElement(i.Fragment,null,i.createElement(u.Table.Head,null,(0,m.localize)("Synthetic")),i.createElement(u.Table.Head,null,(0,m.localize)("Financial"),i.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),n===_.CFD_PLATFORMS.MT5&&i.createElement(u.Table.Head,null,(0,m.localize)("Financial STP"),i.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))))),i.createElement(u.Table.Body,null,d.map((function(e,t){return i.createElement(u.Table.Row,{key:t,className:"cfd-compare-accounts__table-row"},Object.keys(e).map((function(t,a){return i.createElement(u.Table.Cell,{key:a,fixed:0===a},e[t])})))}))))),i.createElement(it,{platform:n,show_risk_message:b,landing_companies:t,is_logged_in:a,is_uk:l})))};const lt=(0,y.$j)((function(e){var t=e.modules,a=e.ui,n=e.client;return{disableApp:a.disableApp,enableApp:a.enableApp,is_compare_accounts_visible:t.cfd.is_compare_accounts_visible,is_loading:n.is_populating_mt5_account_list,is_eu:n.is_eu,is_uk:n.is_uk,is_eu_country:n.is_eu_country,is_logged_in:n.is_logged_in,landing_companies:n.landing_companies,residence:n.residence,toggleCompareAccounts:t.cfd.toggleCompareAccountsModal}}))((function(e){var t,a,n,r=e.disableApp,o=e.enableApp,c=e.is_compare_accounts_visible,l=e.landing_companies,s=e.is_loading,d=e.is_logged_in,p=e.is_eu,f=e.is_uk,g=e.is_eu_country,h=e.platform,b=e.residence,v=e.toggleCompareAccounts,y=d&&p||!d&&g,w=1===[null==l||null===(t=l.mt_gaming_company)||void 0===t?void 0:t.financial,null==l||null===(a=l.mt_financial_company)||void 0===a?void 0:a.financial,null==l||null===(n=l.mt_financial_company)||void 0===n?void 0:n.financial_stp].filter(Boolean).length?(0,m.localize)("Account Information"):(0,m.localize)("Compare accounts");return i.createElement("div",{className:"cfd-compare-accounts-modal__wrapper",style:{marginTop:h===_.CFD_PLATFORMS.DXTRADE?"5rem":"2.4rem"}},i.createElement(u.Button,{className:"cfd-dashboard__welcome-message--button",has_effect:!0,text:w,onClick:v,secondary:!0,disabled:s}),i.createElement(i.Suspense,{fallback:i.createElement(u.UILoader,null)},i.createElement(u.DesktopWrapper,null,i.createElement(u.Modal,{className:"cfd-dashboard__compare-accounts",disableApp:r,enableApp:o,is_open:c,title:w,toggleModal:v,type:"button",height:"696px",width:"903px"},i.createElement(ct,{is_logged_in:d,landing_companies:l,platform:h,show_eu_related:y,residence:b,is_eu:p,is_uk:f}))),i.createElement(u.MobileWrapper,null,i.createElement(u.MobileDialog,{portal_element_id:"deriv_app",title:(0,m.localize)("Compare accounts"),wrapper_classname:"cfd-dashboard__compare-accounts",visible:c,onClose:v},i.createElement(ct,{is_logged_in:d,landing_companies:l,platform:h,show_eu_related:y,residence:b,is_eu:p,is_uk:f})))))}));var st=function(e,t){return e===_.CFD_PLATFORMS.DXTRADE?(0,m.localize)("Trade forex, commodities and cryptocurrencies at high leverage."):e===_.CFD_PLATFORMS.MT5?t?(0,m.localize)("Trade CFDs on forex, stocks, stock indices, synthetic indices, and commodities with leverage."):(0,m.localize)("Trade major (standard and micro-lots) and minor currency pairs, stocks, stock indices, commodities, and cryptocurrencies with high leverage."):""},dt="https://apps.apple.com/us/app/deriv-x/id1563337503",ut="https://play.google.com/store/apps/details?id=com.deriv.dx",_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||(0,_.OSDetect)()){case"ios":return dt;case"android":return ut;default:return pt()}},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||(0,_.OSDetect)()){case"windows":return"https://download.mql5.com/cdn/web/deriv.limited/mt5/deriv5setup.exe";case"linux":return"https://www.metatrader5.com/en/terminal/help/start_advanced/install_linux";case"macos":return"https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/MetaTrader5.dmg";case"ios":return"https://download.mql5.com/cdn/mobile/mt5/ios?server=Deriv-Demo,Deriv-Server";case"android":return"https://download.mql5.com/cdn/mobile/mt5/android?server=Deriv-Demo,Deriv-Server";default:return ft({category:"real"})}},pt=function(e){return"real"===e?"https://dx.deriv.com":"https://dx-demo.deriv.com/"},ft=function(e){var t=e.category,a=e.loginid,n=e.server_name,r="demo"===t?"Deriv-Demo":void 0===n?"Deriv-Server":n,o=null!=a?a:"";return"https://trade.mql5.com/trade?servers=".concat(r,"&trade_server=").concat(r).concat(o&&"&login=".concat(o))};const gt=function(e){var t=e.platform,a=e.active_index,n=e.is_dark_mode_on;return i.createElement("div",{className:"cfd-dashboard__download-center"},i.createElement("h1",{className:"cfd-dashboard__download-center--heading"},function(e){return e===_.CFD_PLATFORMS.DXTRADE?(0,m.localize)("Run Deriv X on your browser or download the mobile app"):e===_.CFD_PLATFORMS.MT5?(0,m.localize)("Run MT5 from your browser or download the MT5 app for your devices"):""}(t)),i.createElement("div",{className:"cfd-dashboard__download-center-options",style:{justifyContent:t===_.CFD_PLATFORMS.DXTRADE?"space-evenly":null}},i.createElement("div",{className:"cfd-dashboard__download-center-options--desktop"},i.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-links"},i.createElement("div",null,i.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-row"},t===_.CFD_PLATFORMS.MT5&&i.createElement(i.Fragment,null,i.createElement(u.Icon,{icon:"IcMt5DeviceDesktop",width:118,height:85}),i.createElement(u.Icon,{icon:"IcMt5DeviceLaptop",width:75,height:51})),t===_.CFD_PLATFORMS.DXTRADE&&i.createElement(i.Fragment,null,i.createElement(u.Icon,{icon:n?"IcDxtradeDeviceDesktopLight":"IcDxtradeDeviceDesktop",width:128,height:83}),i.createElement(u.Icon,{icon:n?"IcDxtradeDeviceLaptopLight":"IcDxtradeDeviceLaptop",width:81,height:54}))),t===_.CFD_PLATFORMS.DXTRADE&&i.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-download"},i.createElement("a",{className:"cfd-dashboard__dxtrade-download",href:pt(0===a?"real":"demo"),target:"_blank",rel:"noopener noreferrer"},i.createElement(u.Icon,{className:"cfd-dashboard__dxtrade-download--icon",icon:"IcBrandDxtrade",width:32,height:32}),i.createElement("div",{className:"cfd-dashboard__dxtrade-download-text"},i.createElement(u.Text,{className:"cfd-dashboard__dxtrade-download--title",color:"colored-background",size:"xxs",weight:"bold"},i.createElement(m.Localize,{i18n_default_text:"Web terminal"})))))),t===_.CFD_PLATFORMS.MT5&&i.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-download"},i.createElement("a",{href:mt("windows"),target:"_blank",rel:"noopener noreferrer"},i.createElement(u.Icon,{icon:"IcInstallationWindows",width:138,height:40})),i.createElement("a",{href:mt("macos"),target:"_blank",rel:"noopener noreferrer"},i.createElement(u.Icon,{icon:"IcInstallationMacos",width:138,height:40})),i.createElement("a",{href:mt("linux"),target:"_blank",rel:"noopener noreferrer"},i.createElement(u.Icon,{icon:"IcInstallationLinux",width:138,height:40})))),t===_.CFD_PLATFORMS.MT5&&i.createElement(u.Text,{as:"p",align:"center",size:"xxxs",className:"cfd-dashboard__download-center--hint"},i.createElement(m.Localize,{i18n_default_text:"The MT5 desktop app is not supported by Windows XP, Windows 2003, and Windows Vista."}))),i.createElement("div",{className:"cfd-dashboard__download-center-options--mobile"},i.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-devices"},t===_.CFD_PLATFORMS.MT5&&i.createElement(i.Fragment,null,i.createElement(u.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),i.createElement(u.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),t===_.CFD_PLATFORMS.DXTRADE&&i.createElement(i.Fragment,null,i.createElement(u.Icon,{icon:n?"IcDxtradeDeviceTabletLight":"IcDxtradeDeviceTablet",width:133,height:106}),i.createElement(u.Icon,{icon:n?"IcDxtradeDevicePhoneLight":"IcDxtradeDevicePhone",width:48,height:74}))),i.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-links"},i.createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:t===_.CFD_PLATFORMS.DXTRADE?_t("android"):mt("android"),target:"_blank",rel:"noopener noreferrer"},i.createElement(u.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),i.createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:t===_.CFD_PLATFORMS.DXTRADE?_t("ios"):mt("ios"),target:"_blank",rel:"noopener noreferrer"},i.createElement(u.Icon,{icon:"IcInstallationApple",width:120,height:40}))))))};var ht=a("./Stores/Modules/CFD/cfd-store.js"),bt=function(e){var t=e.platform,a=e.onConfirm;return i.createElement("div",{className:"cfd-change-password"},i.createElement(u.Icon,{className:"cfd-change-password__icon",icon:t===_.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),i.createElement(u.Text,{as:"p",align:"center",size:"s",weight:"bold"},i.createElement(m.Localize,{i18n_default_text:"{{platform}} password",values:{platform:(0,_.getCFDPlatformLabel)(t)}})),i.createElement(u.Text,{as:"p",align:"center",className:"cfd-change-password__description",size:"xs"},t===_.CFD_PLATFORMS.MT5?i.createElement(m.Localize,{i18n_default_text:"Use this password to log in to your DMT5 accounts on the desktop, web, and mobile apps."}):i.createElement(m.Localize,{i18n_default_text:"Use this password to log in to your Deriv X accounts on the web and mobile apps."})),i.createElement(u.Button,{className:"dc-btn dc-btn--primary dc-btn__large dc-modal__container_cfd-reset-password-modal__button",onClick:a},i.createElement(u.Text,{size:"xs",weight:"bold",color:"colored-background"},i.createElement(m.Localize,{i18n_default_text:"Change {{platform}} password",values:{platform:(0,_.getCFDPlatformLabel)(t)}}))))};bt.propTypes={onConfirm:o().func,platform:o().string};var vt=function(e){var t=e.email,a=e.platform,n=e.account_group,r=i.useCallback((function(){var e=a===_.CFD_PLATFORMS.MT5?1:2;"real"===n?e=Number("".concat(e,"0")):"demo"===n&&(e=Number("".concat(e,"1")));var r=a===_.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";_.WS.verifyEmail(t,r,{url_parameters:{redirect_to:e}})}),[t,a]);return i.useEffect((function(){r()}),[r]),i.createElement(u.SendEmailTemplate,{title:(0,m.localize)("We've sent you an email"),subtitle:(0,m.localize)("Please click on the link in the email to change your {{platform}} password.",{platform:(0,_.getCFDPlatformLabel)(a)}),lbl_no_receive:(0,m.localize)("Didn't receive the email?"),txt_resend:(0,m.localize)("Resend email"),txt_resend_in:(0,m.localize)("Resend email in"),onClickSendEmail:r})};vt.propTypes={email:o().string,platform:o().string};var yt=function(e){var t=e.platform,a=e.email,n=e.account_group,r=i.useRef(),o=[{component:i.createElement(bt,{platform:t,onConfirm:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.goNextStep()}})},{component:i.createElement(E,{confirm_label:(0,m.localize)("Confirm"),platform:t,onConfirm:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.goNextStep()},onCancel:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.goPrevStep()}})},{component:i.createElement(vt,{platform:t,email:a,account_group:n})}];return i.createElement("div",{className:"cfd-trading-password"},i.createElement(u.MultiStep,{ref:r,steps:o}))};yt.propTypes={platform:o().string,email:o().string,account_group:o().string};const wt=yt;function Et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(a),!0).forEach((function(t){xt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Et(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function xt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function St(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Tt=function(e){var t=e.count_from,a=void 0===t?60:t,n=e.onTimeout,r=Ct(i.useState(a),2),o=r[0],c=r[1];return i.useEffect((function(){if(0!==o){var e=setTimeout((function(){c(o-1)}),1e3);return function(){return clearTimeout(e)}}return n(),function(){}}),[o]),i.createElement("span",{className:"countdown"},o)},Pt=function(e){var t=e.sendVerifyEmail,a=e.account_type,n=e.account_group,r=e.server,o=e.password_type,c=Ct(i.useState(!1),2),l=c[0],s=c[1],d=Ct(i.useState(!1),2),_=d[0],p=d[1];return i.useEffect((function(){localStorage.setItem("cfd_reset_password_intent",[r,n,a].join(".")),localStorage.setItem("cfd_reset_password_type",o),t()}),[]),i.createElement("div",{className:"cfd-verification-email-sent"},i.createElement(u.Icon,{icon:"IcEmailSent",size:128}),i.createElement("h2",{className:"cfd-verification-email-sent__title"},i.createElement(m.Localize,{i18n_default_text:"We've sent you an email"})),i.createElement(u.Text,{as:"p",size:"xs",align:"center"},i.createElement(m.Localize,{i18n_default_text:"Please click on the link in the email to reset your password."})),!l&&i.createElement(u.Button,{className:"cfd-verification-email-sent__resend-button",primary:!0,onClick:function(){s(!0)}},i.createElement(m.Localize,{i18n_default_text:"Didn't receive the email?"})),l&&i.createElement(i.Fragment,null,i.createElement(u.Text,{as:"p",size:"xs",align:"center",weight:"bold",className:"cfd-verification-email-sent__title--sub"},i.createElement(m.Localize,{i18n_default_text:"Didn't receive the email?"})),i.createElement(u.Text,{as:"p",size:"xs",align:"center"},i.createElement(m.Localize,{i18n_default_text:"Check your spam or junk folder. If it's not there, try resending the email."})),i.createElement(u.Button,{className:"cfd-verification-email-sent__resend-button",large:!0,primary:!0,disabled:_,onClick:function(){t(),p(!0)}},!_&&i.createElement(m.Localize,{i18n_default_text:"Resend email"}),_&&i.createElement(i.Fragment,null,i.createElement(m.Localize,{i18n_default_text:"Resend in <0 /> seconds",components:[i.createElement(Tt,{key:0,onTimeout:function(){return p(!1)},count_from:60})]})))))},Ft=function(e){var t=e.toggleModal,a=e.is_investor;return i.createElement("div",{className:"cfd-password-manager__success"},i.createElement(u.Icon,{icon:"IcPasswordUpdated",size:128}),i.createElement(u.Text,{as:"p",size:"xxs",align:"center"},a?i.createElement(m.Localize,{i18n_default_text:"Your investor password has been changed."}):i.createElement(m.Localize,{i18n_default_text:"Your password has been changed."})),i.createElement(u.Button,{onClick:t,className:"cfd-password-manager__success-btn",primary:!0,large:!0},i.createElement("p",{className:"dc-btn__text"},(0,m.localize)("OK"))))},Nt=function(e){var t=e.multi_step_ref,a=e.steps;return i.createElement(u.MultiStep,{ref:t,steps:a,className:"cfd-password-manager",lbl_previous:(0,m.localize)("Back")})},Ot=function(e){var t=e.error_message_investor,a=e.is_submit_success_investor,r=e.multi_step_ref,o=e.onSubmit,c=e.setPasswordType,l=e.toggleModal,s=e.validatePassword;return a?i.createElement(Ft,{toggleModal:l,is_investor:!0}):i.createElement("div",{className:"cfd-password-manager__investor-wrapper"},i.createElement(u.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},i.createElement(m.Localize,{i18n_default_text:"Use this password to grant viewing access to another user. While they may view your trading account, they will not be able to trade or take any other actions."})),i.createElement(u.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},i.createElement(m.Localize,{i18n_default_text:"If this is the first time you try to create a password, or you have forgotten your password, please reset it."})),t&&i.createElement(u.Text,{as:"p",color:"loss-danger",size:"xs",className:"cfd-password-manager--error-message"},t),i.createElement(n.J9,{initialValues:{old_password:"",new_password:"",password_type:"investor"},validate:s,onSubmit:o},(function(e){var t=e.isSubmitting,a=e.errors,o=e.setFieldTouched,l=e.values,s=e.touched;return i.createElement(n.l0,{className:"cfd-password-manager__investor-form",noValidate:!0},i.createElement(n.gN,{name:"old_password"},(function(e){var t=e.field;return i.createElement(u.PasswordInput,Mt({},t,{autoComplete:"current-password",label:(0,m.localize)("Current investor password"),error:s.old_password&&a.old_password,required:!0}))})),i.createElement(n.gN,{name:"new_password"},(function(e){var t=e.field;return i.createElement(u.PasswordMeter,{input:t.value,has_error:!(!s.new_password||!a.new_password),custom_feedback_messages:(0,_.getErrorMessages)().password_warnings},(function(e){var n=e.has_warning;return i.createElement(u.PasswordInput,Mt({},t,{autoComplete:"new-password",label:(0,m.localize)("New investor password"),hint:!n&&(0,m.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:s.new_password&&a.new_password,onChange:function(e){o("new_password",!0,!0),t.onChange(e)},className:"cfd-password-manager__new-password",required:!0}))}))})),i.createElement("div",{className:"cfd-password-manager__actions"},i.createElement(u.Button,{className:"cfd-password-manager--button",is_disabled:t||!l.old_password||!l.new_password||Object.keys(a).length>0,is_loading:t,text:(0,m.localize)("Change investor password"),primary:!0,large:!0}),i.createElement(u.Button,{className:"cfd-password-manager--button",type:"button",onClick:function(){var e;c("investor"),null===(e=r.current)||void 0===e||e.goNextStep()},text:(0,m.localize)("Create or reset investor password"),tertiary:!0,large:!0})))})))},At=function(e){var t=e.toggleModal,a=e.selected_login,n=e.email,r=e.setPasswordType,o=e.multi_step_ref,c=e.platform,l=e.onChangeActiveTabIndex,s=e.account_group,d=Ct(i.useState(0),2),p=d[0],f=d[1],g=Ct(i.useState(""),2),h=g[0],b=g[1],v=Ct(i.useState(!1),2),y=v[0],w=v[1],E="calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)",z=function(e){var t={};return(0,_.validLength)(e.new_password,{min:8,max:25})?(0,_.validPassword)(e.new_password)?e.new_password.toLowerCase()===n.toLowerCase()&&(t.new_password=(0,m.localize)("Your password cannot be the same as your email address.")):t.new_password=(0,_.getErrorMessages)().password():t.new_password=(0,m.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.old_password||void 0===e.old_password||(t.old_password=(0,m.localize)("This field is required")),t},x=i.useCallback(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ht.default.changePassword(zt({login:a},t));case 4:(n=e.sent)?b(n):(b(""),w(!0));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){St(o,n,r,i,c,"next",e)}function c(e){St(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[a]),S=i.createElement(i.Fragment,null,i.createElement(u.DesktopWrapper,null,i.createElement(u.ThemedScrollbars,{height:E,is_bypassed:(0,_.isMobile)(),autohide:!1},i.createElement(wt,{toggleModal:t,platform:c,email:n,account_group:s}))),i.createElement(u.MobileWrapper,null,i.createElement(u.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},i.createElement(wt,{toggleModal:t,platform:c,email:n,account_group:s}))));return c===_.CFD_PLATFORMS.DXTRADE?S:i.createElement(u.Tabs,{active_index:p,onTabItemClick:function(e){f(e),l(e),b(""),w(!1)},top:!0},i.createElement("div",{label:(0,m.localize)("{{platform}} password",{platform:(0,_.getCFDPlatformLabel)(c)})},S),i.createElement("div",{label:(0,m.localize)("Investor password")},i.createElement(u.DesktopWrapper,null,i.createElement(u.ThemedScrollbars,{height:E},i.createElement(Ot,{is_submit_success_investor:y,toggleModal:t,error_message_investor:h,validatePassword:z,onSubmit:x,setPasswordType:r,multi_step_ref:o}))),i.createElement(u.MobileWrapper,null,i.createElement(u.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},i.createElement(Ot,{is_submit_success_investor:y,toggleModal:t,error_message_investor:h,validatePassword:z,onSubmit:x,setPasswordType:r,multi_step_ref:o})))))},kt=function(e){var t=e.enableApp,a=e.email,n=e.disableApp,r=e.is_visible,o=e.platform,c=e.selected_login,l=e.selected_account,s=e.toggleModal,d=e.selected_account_type,p=e.selected_account_group,f=e.selected_server,g=e.sendVerifyEmail,h=i.useRef(),b=Ct(i.useState(0),2),v=b[0],y=b[1],w=Ct(i.useState("main"),2),E=w[0],z=w[1];if(!c)return null;var x,S=[{component:i.createElement(At,{email:a,selected_login:c,toggleModal:s,password_type:E,setPasswordType:z,multi_step_ref:h,platform:o,onChangeActiveTabIndex:function(e){y(e)},account_group:p})},{component:i.createElement(Pt,{server:f,sendVerifyEmail:g,account_type:d,account_group:p,password_type:E})}];return i.createElement(i.Suspense,{fallback:i.createElement(u.UILoader,null)},i.createElement(u.DesktopWrapper,null,i.createElement(u.Modal,{className:"cfd-password-manager__modal",disableApp:n,enableApp:t,is_open:r,title:(x=v,0===x?(0,m.localize)("Manage {{platform}} password",{platform:(0,_.getCFDPlatformLabel)(o)}):"real"===p?(0,m.localize)("Manage {{platform}} Real {{account_title}} account password",{platform:(0,_.getCFDPlatformLabel)(o),account_title:l}):(0,m.localize)("Manage {{platform}} Demo {{account_title}} account password",{platform:(0,_.getCFDPlatformLabel)(o),account_title:l})),toggleModal:s,height:"688px",width:"904px",should_header_stick_body:!1},i.createElement(Nt,{steps:S,multi_step_ref:h}))),i.createElement(u.MobileWrapper,null,i.createElement(u.PageOverlay,{is_open:r,portal_id:"deriv_app",header:function(e){return 0===e?(0,m.localize)("Manage {{platform}} password",{platform:(0,_.getCFDPlatformLabel)(o)}):(0,m.localize)("Manage password")}(v),onClickClose:s},i.createElement(Nt,{steps:S,multi_step_ref:h}))))};kt.propTypes={email:o().string,is_visible:o().bool,selected_account:o().string,selected_server:o().string,selected_login:o().string,toggleModal:o().func,platform:o().string};const Lt=(0,y.$j)((function(e){var t=e.modules.cfd,a=e.client,n=e.ui;return{email:a.email,enableApp:n.enableApp,disableApp:n.disableApp,sendVerifyEmail:t.sendVerifyEmail}}))(kt);var jt=function(e){var t=e.dxtrade_companies,a=e.mt5_companies,n=e.current_account,r=e.closeSuccessTopUpModal,o=e.closeTopUpModal,c=e.is_top_up_virtual_open,l=e.is_top_up_virtual_in_progress,s=e.is_top_up_virtual_success,d=e.platform,p=e.topUpVirtual,f=i.useCallback((function(){return(a||t)&&n?a[n.category][n.type].title:""}),[a,t,n]),g=(0,_.getCFDPlatformLabel)(d);if(!a&&!t||!n)return null;var h=1e3,b=1e4;return i.createElement(i.Fragment,null,i.createElement(u.Modal,{toggleModal:o,is_open:c,className:"top-up-virtual",title:(0,m.localize)("Fund top up"),width:"384px"},i.createElement("div",{className:"dc-modal__container_top-up-virtual__body"},i.createElement(u.Text,{as:"p",align:"center",size:"xxs",line_height:"xs",className:"dc-modal__container_top-up-virtual__description"},i.createElement(m.Localize,{i18n_default_text:"You can top up your demo account with an additional <0></0> if your balance is <1></1> or less.",components:[i.createElement(u.Money,{key:0,amount:b,currency:n.currency,show_currency:!0}),i.createElement(u.Money,{key:1,amount:h,currency:n.currency,show_currency:!0})]})),i.createElement("h4",{className:"dc-modal__container_top-up-virtual--h4"},i.createElement(m.Localize,{i18n_default_text:"{{ platform }} {{ account_title }} account",values:{platform:g,account_title:f()}})),i.createElement("div",null,i.createElement(u.Text,{as:"p",align:"center",size:"xxs"},i.createElement(m.Localize,{i18n_default_text:"Current balance"})),i.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},i.createElement(u.Money,{amount:n.display_balance,currency:n.currency,has_sign:n.balance<0}))),i.createElement("div",{className:"dc-modal__container_top-up-virtual--button"},i.createElement(u.Button,{is_disabled:n.balance>1e3||l,type:"button",is_loading:l,onClick:function(){return p(d)},primary:!0,large:!0},!l&&i.createElement(m.Localize,{i18n_default_text:"Top up Â <0></0>",components:[i.createElement(u.Money,{key:0,amount:b,currency:n.currency,show_currency:!0})]}))))),i.createElement(v,{is_open:s,toggleModal:function(){r()},has_close_icon:!0,title:(0,m.localize)("Fund top up"),icon:i.createElement(u.Icon,{icon:"IcCashierWallet",size:128}),heading:i.createElement("h3",{className:"cfd-success-topup__heading"},i.createElement(m.Localize,{i18n_default_text:"<0></0> has been credited into your {{platform}} {{title}} account.",values:{platform:g,title:f()},components:[i.createElement(u.Money,{key:0,amount:b,currency:n.currency,show_currency:!0})]})),message:i.createElement("div",{className:"cfd-success-topup__description"},i.createElement("p",null,i.createElement(m.Localize,{i18n_default_text:"New current balance"})),i.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},i.createElement(u.Money,{amount:n.balance,currency:n.currency}))),icon_size:"large",has_cancel:!1,has_submit:!1,width:"384px"}))};jt.propTypes={account_title:o().string,closeSuccessTopUpModal:o().func,closeTopUpVirtual:o().func,currency:o().string,display_balance:o().string,is_top_up_virtual_open:o().bool,is_top_up_virtual_in_progress:o().bool,is_top_up_virtual_success:o().bool,topUpVirtual:o().func};const It=(0,y.$j)((function(e){var t=e.ui,a=e.modules;return{is_top_up_virtual_open:t.is_top_up_virtual_open,is_top_up_virtual_in_progress:t.is_top_up_virtual_in_progress,is_top_up_virtual_success:t.is_top_up_virtual_success,closeTopUpModal:t.closeTopUpModal,closeSuccessTopUpModal:t.closeSuccessTopUpModal,current_account:a.cfd.current_account,dxtrade_companies:a.cfd.dxtrade_companies,mt5_companies:a.cfd.mt5_companies,topUpVirtual:a.cfd.topUpVirtual}}))(jt);var Rt=["current_list","children","is_eu"];function Bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ut(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(a),!0).forEach((function(t){Vt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Vt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Xt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var qt=function(e){var t,a,n,r,o,i=e.current_list,c=e.children,l=e.is_eu,s=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Rt),u=localStorage.getItem("cfd_reset_password_intent"),_=localStorage.getItem("cfd_reset_password_type")||"main";if(u&&/(real|demo)\.(financial_stp|financial|synthetic)/.test(u)&&i){var m=Wt(u.split("."),3);o=m[0],t=m[1],a=m[2],n=i["mt5.".concat(t,".").concat(a,"@").concat(o)].login,r=(0,d.o)(l)[t][a].title}else if(i){var p,f,g,h,b,v,y=Wt(Object.keys(i).pop().split("."),3);o=y[0],t=y[1],a=y[2],n=null!==(p=null===(f=i["mt5.".concat(t,".").concat(a,"@").concat(o)])||void 0===f?void 0:f.login)&&void 0!==p?p:"",r=null!==(g=null===(h=(0,d.o)(l))||void 0===h||null===(b=h[t])||void 0===b||null===(v=b[a])||void 0===v?void 0:v.title)&&void 0!==g?g:""}else n="",r="";return c(Ut({login:n,title:r,type:_},s))},$t=function(e){var t=e.current_list,a=e.email,r=e.is_cfd_reset_password_modal_enabled,o=e.is_eu,c=e.is_logged_in,l=e.platform,s=e.setCFDPasswordResetModal,d=e.history,p=Wt(i.useState({error_code:void 0,has_error:!1,error_message:void 0,is_finished:!1,changed_password_type:""}),2),f=p[0],g=p[1],h=function(){localStorage.removeItem("cfd_reset_password_intent"),localStorage.removeItem("cfd_reset_password_type"),localStorage.removeItem("cfd_reset_password_code"),d.push("".concat(_.routes.mt5))},b=function(e){var t={};return(0,_.validLength)(e.new_password,{min:8,max:25})?(0,_.validPassword)(e.new_password)||(t.new_password=(0,_.getErrorMessages)().password()):t.new_password=(0,m.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.new_password.toLowerCase()===a.toLowerCase()&&(t.new_password=(0,m.localize)("Your password cannot be the same as your email address.")),t},v=function(){return 0!==Object.keys(t).length};return i.createElement(u.Modal,{className:"cfd-reset-password-modal",is_open:r,toggleModal:function(){return s(!1)},title:l===_.CFD_PLATFORMS.DXTRADE?(0,m.localize)("Reset Deriv X investor password"):(0,m.localize)("Reset DMT5 investor password"),onMount:function(){return(0,_.redirectToLogin)(c,(0,m.getLanguage)(),!0)}},!v()&&!f.has_error&&i.createElement(u.Loading,{is_fullscreen:!1}),v()&&!f.has_error&&!f.is_finished&&i.createElement(qt,{current_list:t,is_eu:o},(function(e){var t=e.type,a=e.login;return i.createElement(n.J9,{initialValues:{new_password:""},validate:b,onSubmit:function(e,n){return function(e,t,a,n){var r=n.setSubmitting;r(!0);var o={account_id:a,platform:_.CFD_PLATFORMS.MT5,new_password:e.new_password,verification_code:localStorage.getItem("cfd_reset_password_code")};_.WS.tradingPlatformInvestorPasswordReset(o).then((function(e){var a;e.error&&"InvalidToken"===e.error.code?(a=e.error,g(Ut(Ut({},f),{},{error_code:a.code,has_error:!0,error_message:a.message}))):(g(Ut(Ut({},f),{},{is_finished:!0,changed_password_type:t})),h()),r(!1)}))}(e,t,a,n)}},(function(e){var a=e.handleSubmit,n=e.errors,r=e.values,o=e.isSubmitting,c=e.handleChange,l=e.handleBlur,s=e.touched;return i.createElement("form",{autoComplete:"off",onSubmit:a},i.createElement("div",{className:"cfd-reset-password"},i.createElement("div",{className:"cfd-reset-password__container"},i.createElement("div",{className:"cfd-reset-password__password-area"},i.createElement(u.PasswordMeter,{input:r.new_password,has_error:!(!s.new_password||!n.new_password),custom_feedback_messages:(0,_.getErrorMessages)().password_warnings},(function(e){var a=e.has_warning;return i.createElement(u.PasswordInput,{autoComplete:"new-password",className:"cfd-reset-password__password-field",name:"new_password",label:(0,m.localize)("New {{type}} password",{type:t}),onChange:c,onBlur:l,error:s.new_password&&n.new_password,value:r.new_password,"data-lpignore":"true",required:!0,hint:!a&&(0,m.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols.")})}))),o&&i.createElement(u.Loading,{is_fullscreen:!1}),!o&&i.createElement(u.FormSubmitButton,{is_disabled:o||!r.new_password||Object.keys(n).length>0,errors:n,is_center:!0,large:!0,label:(0,m.localize)("Create {{type}} password",{type:t})}))))}))})),f.has_error&&i.createElement("div",{className:"cfd-reset-password__error"},i.createElement(u.Icon,{icon:"IcMt5Expired",size:128}),i.createElement(u.Text,{as:"p",size:"xs",weight:"bold",align:"center",className:"cfd-reset-password__heading"},f.error_message),"InvalidToken"===f.error_code&&i.createElement(u.Text,{as:"p",color:"prominent",size:"xs",align:"center",className:"cfd-reset-password__description--is-centered"},i.createElement(m.Localize,{i18n_default_text:"Please request a new password and check your email for the new token."})),i.createElement(u.Button,{primary:!0,large:!0,className:"cfd-reset-password__confirm-button",onClick:function(){h(),s(!1)}},i.createElement(m.Localize,{i18n_default_text:"Ok"}))),f.is_finished&&i.createElement("div",{className:"cfd-reset-password__success"},i.createElement(u.Icon,{icon:"IcMt5PasswordUpdated",size:128}),i.createElement("div",{className:"cfd-reset-password__description"},i.createElement(m.Localize,{i18n_default_text:"Your {{account_type}} password has been changed.",values:{account_type:"main"===f.changed_password_type?(0,m.localize)("main"):(0,m.localize)("investor")}})),i.createElement(u.Button,{primary:!0,large:!0,onClick:function(){return s(!1)}},i.createElement(m.Localize,{i18n_default_text:"Ok"}))))};$t.propTypes={email:r.string,is_eu:r.bool,is_cfd_reset_password_modal_enabled:r.any,setCFDPasswordResetModal:r.any,current_list:r.any};const Ht=i.memo((0,V.withRouter)((0,y.$j)((function(e){var t=e.modules.cfd,a=e.client;return{email:a.email,is_eu:a.is_eu,is_cfd_reset_password_modal_enabled:t.is_cfd_reset_password_modal_enabled,setCFDPasswordResetModal:t.setCFDPasswordResetModal,current_list:t.current_list,is_logged_in:a.is_logged_in}}))($t))),Yt=(0,y.$j)((function(e){var t=e.ui,a=e.client,n=e.modules.cfd;return{is_fully_authenticated:a.is_fully_authenticated,enableApp:t.enableApp,disableApp:t.disableApp,toggleModal:n.closeCFDPendingDialog,is_cfd_pending_dialog_open:n.is_cfd_pending_dialog_open}}))((function(e){var t=e.enableApp,a=e.disableApp,n=e.toggleModal,r=e.is_cfd_pending_dialog_open,o=e.is_fully_authenticated;return i.createElement(u.Modal,{title:o?" ":(0,m.localize)("Thanks for submitting your documents!"),className:"cfd-pending-dialog",is_open:r,disableApp:a,enableApp:t,toggleModal:n,has_close_icon:!1,small:!0},i.createElement(u.Modal.Body,null,o?i.createElement(m.Localize,{i18n_default_text:"Your MT5 Financial STP account is almost ready, please set your password now."}):i.createElement(m.Localize,{i18n_default_text:"Weâ€™ll process your documents within 1-3 days. Once they are verified, weâ€™ll notify you via email."})),i.createElement(u.Modal.Footer,null,i.createElement(u.Button,{has_effect:!0,text:(0,m.localize)("OK"),onClick:n,primary:!0})))}));var Kt,Gt,Jt,Zt,Qt,ea,ta,aa,na,ra;function oa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ia={mt5:{real_synthetic_specs:(Kt={},oa(Kt,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:1000")),oa(Kt,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(Kt,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(Kt,(0,m.localize)("Number of assets"),(0,m.localize)("20+")),Kt),real_financial_specs:(Gt={},oa(Gt,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:1000")),oa(Gt,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(Gt,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(Gt,(0,m.localize)("Number of assets"),(0,m.localize)("150+")),Gt),eu_real_financial_specs:(Jt={},oa(Jt,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:30")),oa(Jt,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(Jt,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(Jt,(0,m.localize)("Number of assets"),(0,m.localize)("50+")),Jt),real_financial_stp_specs:(Zt={},oa(Zt,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:100")),oa(Zt,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(Zt,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(Zt,(0,m.localize)("Number of assets"),(0,m.localize)("70+")),Zt),au_real_financial_specs:(Qt={},oa(Qt,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:30")),oa(Qt,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(Qt,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(Qt,(0,m.localize)("Number of assets"),(0,m.localize)("100+")),Qt),demo_financial_stp_specs:(ea={},oa(ea,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:100")),oa(ea,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(ea,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(ea,(0,m.localize)("Number of assets"),(0,m.localize)("70+")),ea)},dxtrade:{real_synthetic_specs:(ta={},oa(ta,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:500")),oa(ta,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(ta,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(ta,(0,m.localize)("Number of assets"),(0,m.localize)("20+")),ta),real_financial_specs:(aa={},oa(aa,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:1000")),oa(aa,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(aa,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(aa,(0,m.localize)("Number of assets"),(0,m.localize)("90+")),aa),eu_real_financial_specs:(na={},oa(na,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:30")),oa(na,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(na,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(na,(0,m.localize)("Number of assets"),(0,m.localize)("90+")),na),au_real_financial_specs:(ra={},oa(ra,(0,m.localize)("Leverage"),(0,m.localize)("Up to 1:30")),oa(ra,(0,m.localize)("Margin call"),(0,m.localize)("100%")),oa(ra,(0,m.localize)("Stop out level"),(0,m.localize)("50%")),oa(ra,(0,m.localize)("Number of assets"),(0,m.localize)("90+")),ra)}};var ca=a("../../../node_modules/react-transition-group/esm/CSSTransition.js"),la=function(e){var t=e.text,a=e.className;return i.createElement("div",{className:a},i.createElement(u.Clipboard,{text_copy:t,info_message:(0,_.isMobile)()?"":(0,m.localize)("copy"),success_message:(0,m.localize)("copied!"),popoverAlignment:(0,_.isMobile)()?"left":"bottom"}))},sa={mt5:{synthetic:"IcMt5SyntheticPlatform",financial:"IcMt5FinancialPlatform",financial_stp:"IcMt5FinancialStpPlatform",cfd:"IcMt5CfdPlatform"},dxtrade:{synthetic:"IcDxtradeSyntheticPlatform",financial:"IcDxtradeFinancialPlatform",cfd:"IcMt5CfdPlatform"}},da=i.forwardRef((function(e,t){var a=e.onSelectAccount,n=e.is_disabled;return i.createElement("div",{onClick:n?null:a,className:f()("cfd-account-card__add-server",{"cfd-account-card__add-server--disabled":n}),ref:t},i.createElement("span",{className:"cfd-account-card__add-server--icon"},"+"),i.createElement(m.Localize,{i18n_default_text:"Add region"}))}));da.displayName="AddTradeServerButton";var ua=function(e){var t=e.value,a=e.is_bold;return i.createElement("div",{className:"cfd-account-card__spec-box"},i.createElement(u.Text,{size:"xs",weight:a?"bold":"",className:"cfd-account-card__spec-text"},t),i.createElement(la,{text:t,className:"cfd-account-card__spec-copy"}))},_a=function(e){var t=e.platform,a=e.onClick;return i.createElement("div",{className:"cfd-account-card__password-box"},i.createElement("div",{className:"cfd-account-card__password-text"},i.createElement(u.Popover,{alignment:"right",message:(0,m.localize)("Use these credentials to log in to your {{platform}} account on the website and mobile apps.",{platform:(0,_.getCFDPlatformLabel)(t)}),classNameBubble:"cfd-account-card__password-tooltip",margin:35},i.createElement(u.Text,{size:"xs"},"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"))),i.createElement(u.Button,{className:"cfd-account-card__password-action",tertiary:!0,onClick:a},(0,m.localize)("Change")))},ma=function(e){var t=e.button_label,a=e.handleClickSwitchAccount,n=e.has_real_account,r=e.is_accounts_switcher_on,o=e.is_button_primary,c=e.is_disabled,l=e.is_virtual,s=e.onSelectAccount,d=e.type,p=e.platform,g=e.title;if(l&&"real"===d.category&&"function"==typeof a&&(p!==_.CFD_PLATFORMS.MT5||n&&"financial_stp"===d.type))return i.createElement("div",{className:"cfd-account-card__action-wrapper"},i.createElement(m.Localize,{i18n_default_text:"<0>Switch to your real account</0><1> to create a {{platform}} {{account_title}} account.</1>",values:{platform:(0,_.getCFDPlatformLabel)(p),account_title:g},components:[i.createElement("a",{className:f()("cfd-account-card__action-wrapper__link link link--orange",{"cfd-account-card__action-wrapper__link--disabled":r}),key:0,onClick:a}),i.createElement(u.Text,{key:1,line_height:"s",size:"xxs"})]}));var h="real"===d.category?i.createElement(m.Localize,{i18n_default_text:"Add real account"}):i.createElement(m.Localize,{i18n_default_text:"Add demo account"}),b=t||h;return i.createElement(u.Button,{className:"cfd-account-card__account-selection",onClick:s,type:"button",is_disabled:c,primary:o,secondary:!o,large:!0},b)},pa=function(e){var t,a,n=e.button_label,r=e.commission_message,o=e.descriptor,c=e.is_hovered,l=e.existing_data,s=e.has_banner,d=e.has_cfd_account,p=e.has_cfd_account_error,g=e.has_real_account,h=e.is_accounts_switcher_on,b=e.is_button_primary,v=e.is_disabled,y=e.is_logged_in,w=e.is_virtual,E=e.is_eu,z=e.onHover,x=e.platform,S=e.specs,M=e.title,C=e.type,D=e.onSelectAccount,T=e.onClickFund,P=e.onPasswordManager,F=e.should_show_trade_servers,N=e.toggleAccountsDialog,O=e.toggleShouldShowRealAccountsList,A=C.type?i.createElement(u.Icon,{icon:sa[C.platform][E?"cfd":C.type],size:64}):null,k="synthetic"===C.type&&"real"===C.category&&(x!==_.CFD_PLATFORMS.MT5||!l),L="demo"===C.category,j=y&&l&&"real"===C.category&&"synthetic"===C.type&&(null==l?void 0:l.server_info),I="synthetic"===C.type&&"real"===C.category&&"mt5"===C.platform,R=null==l||null===(t=l.server_info)||void 0===t?void 0:t.geolocation.region,B=null==l||null===(a=l.server_info)||void 0===a?void 0:a.environment,U=i.useRef(),V=i.useRef(),W=i.useRef();i.useEffect((function(){if(l){var e,t=function(){null==z||z(l.group)};return U.current.addEventListener("mouseenter",t),null==W||null===(e=W.current)||void 0===e||e.addEventListener("mouseenter",t),function(){var e;U.current.removeEventListener("mouseenter",t),null==W||null===(e=W.current)||void 0===e||e.removeEventListener("mouseenter",(function(){return t}))}}return function(){}}),[z]);var X,q,$,H,Y=i.useCallback((function(e){if(e){var t,a=null===(t=e.server_info)||void 0===t?void 0:t.geolocation.region;if(a)return"".concat(a," ").concat(1===e.server_info.geolocation.sequence?"":e.server_info.geolocation.sequence)}return""}),[l]),K=(0,_.isMobile)()&&x===_.CFD_PLATFORMS.DXTRADE;return i.createElement("div",{ref:V,className:"cfd-account-card__wrapper"},i.createElement("div",{className:f()("cfd-account-card",{"cfd-account-card__logged-out":!y}),ref:U,id:(q="",$="",H=B?B.toLowerCase():"",I&&R&&(q="-".concat(R.toLowerCase())),""!==H&&I&&($=H.split("server")[1]),"".concat(C.category,"-").concat(C.type).concat(q).concat($))},k&&i.createElement("div",{className:"cfd-account-card__banner"},i.createElement(m.Localize,{i18n_default_text:"Most popular"})),L&&i.createElement("div",{className:"cfd-account-card__banner cfd-account-card__banner--demo"},i.createElement(m.Localize,{i18n_default_text:"DEMO"})),j&&i.createElement("div",{className:"cfd-account-card__banner cfd-account-card__banner--server"},Y(l)),i.createElement("div",{className:f()("cfd-account-card__type",{"cfd-account-card__type--has-banner":s||k||j}),id:"".concat(x===_.CFD_PLATFORMS.DXTRADE?_.CFD_PLATFORMS.DXTRADE:_.CFD_PLATFORMS.MT5,"_").concat(C.category,"_").concat(C.type)},A,i.createElement("div",{className:"cfd-account-card__type--description"},i.createElement(u.Text,{size:"xxl",className:"cfd-account-card--heading"},M),(!l||!y)&&i.createElement("p",{className:"cfd-account-card--paragraph"},o),(null==l?void 0:l.display_balance)&&y&&i.createElement(u.Text,{size:"xxl",className:"cfd-account-card--balance"},i.createElement(u.Money,{amount:l.display_balance,currency:l.currency,has_sign:l.balance<0,show_currency:!0})),(null==l?void 0:l.display_login)&&y&&i.createElement(u.Text,{color:"less-prominent",size:"xxxs",line_height:"s"},l.display_login))),l&&i.createElement("div",{className:"cfd-account-card__divider"}),i.createElement("div",{className:"cfd-account-card__cta"},i.createElement("div",{className:"cfd-account-card__cta-wrapper"},null!=l&&l.login&&y?i.createElement(i.Fragment,null,i.createElement("div",{className:"cfd-account-card__login-specs"},i.createElement("table",{className:"cfd-account-card__login-specs-table"},i.createElement("tbody",null,x===_.CFD_PLATFORMS.MT5?i.createElement(i.Fragment,null,i.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},i.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},i.createElement("div",{className:"cfd-account-card--paragraph"},(0,m.localize)("Broker"))),i.createElement("td",{className:"cfd-account-card__login-specs-table-data"},i.createElement("div",{className:"cfd-account-card--paragraph"},i.createElement(ua,{value:"Deriv Limited"})))),i.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},i.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},i.createElement("div",{className:"cfd-account-card--paragraph"},(0,m.localize)("Server"))),i.createElement("td",{className:"cfd-account-card__login-specs-table-data"},i.createElement("div",{className:"cfd-account-card--paragraph"},i.createElement(ua,{value:l.server_info.environment})))),i.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},i.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},i.createElement("div",{className:"cfd-account-card--paragraph"},(0,m.localize)("Login ID"))),i.createElement("td",{className:"cfd-account-card__login-specs-table-data"},i.createElement("div",{className:"cfd-account-card--paragraph"},i.createElement(ua,{value:l.display_login}))))):i.createElement(i.Fragment,null,i.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},i.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},i.createElement("div",{className:"cfd-account-card--paragraph"},(0,m.localize)("Username"))),i.createElement("td",{className:"cfd-account-card__login-specs-table-data"},i.createElement("div",{className:"cfd-account-card--paragraph"},i.createElement(ua,{value:l.login,is_bold:!0}))))),i.createElement("tr",{className:"cfd-account-card__login-specs-table-row cfd-account-card__login-specs-table-row--account-id"},i.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},i.createElement("div",{className:"cfd-account-card--paragraph"},(0,m.localize)("Password"))),i.createElement("td",{className:"cfd-account-card__login-specs-table-data"},i.createElement("div",{className:"cfd-account-card--paragraph"},i.createElement(_a,{platform:x,onClick:function(){P(l.login,M,C.category,C.type,l.server)}})))))))):i.createElement("div",{className:"cfd-account-card__specs"},i.createElement("table",{className:"cfd-account-card__specs-table"},i.createElement("tbody",null,Object.keys(S).map((function(e,t){return i.createElement("tr",{key:t,className:"cfd-account-card__specs-table-row"},i.createElement("td",{className:"cfd-account-card__specs-table-attribute"},i.createElement("p",{className:"cfd-account-card--paragraph"},e)),i.createElement("td",{className:"cfd-account-card__specs-table-data"},i.createElement("p",{className:"cfd-account-card--paragraph"},S[e])))})),j&&l&&"synthetic"===C.type&&"real"===C.category&&i.createElement("tr",{key:l.server,className:"cfd-account-card__specs-table-row"},i.createElement("td",{className:"cfd-account-card__specs-table-attribute"},i.createElement("p",{className:"cfd-account-card--paragraph"},i.createElement(m.Localize,{i18n_default_text:"Trade server: "}))),i.createElement("td",{className:"cfd-account-card__specs-table-data"},i.createElement("p",{className:"cfd-account-card--paragraph"},Y(l))))))),(!l&&r||!y)&&i.createElement("div",{className:"cfd-account-card__commission"},i.createElement(u.Text,{as:"p",color:"general",size:"xs",styles:{margin:"1.6rem auto"}},r)),l&&y&&i.createElement("div",{className:"cfd-account-card__manage"},i.createElement(u.Button,{onClick:function(){return T(l)},type:"button",secondary:!0},"real"===C.category&&i.createElement(m.Localize,{i18n_default_text:"Fund transfer"}),"demo"===C.category&&i.createElement(m.Localize,{i18n_default_text:"Fund top up"}))),!l&&d&&i.createElement(u.Button,{className:"cfd-account-card__account-selection",onClick:D,type:"button"},i.createElement(m.Localize,{i18n_default_text:"Select"})),l&&y&&!K&&i.createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:x===_.CFD_PLATFORMS.DXTRADE?pt(C.category):ft({category:C.category,loginid:l.display_login,server_name:l.server_info.environment}),target:"_blank",rel:"noopener noreferrer"},i.createElement(m.Localize,{i18n_default_text:"Trade on web terminal"})),l&&y&&K&&i.createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:(X=(0,_.mobileOSDetect)(),_t("iOS"===X?"ios":"android")),target:"_blank",rel:"noopener noreferrer"},i.createElement(m.Localize,{i18n_default_text:"Download the app"})),!l&&!d&&y&&i.createElement(ma,{button_label:n,handleClickSwitchAccount:function(){O(!0),N(!0)},has_real_account:g,is_accounts_switcher_on:h,is_button_primary:b,is_disabled:v,is_virtual:w,onSelectAccount:D,type:C,platform:x,title:M}))),i.createElement(i.Fragment,null,F&&i.createElement(u.MobileWrapper,null,i.createElement(da,{ref:W,onSelectAccount:D,is_disabled:p})))),i.createElement(u.DesktopWrapper,null,i.createElement(ca.Z,{in:c&&F,timeout:0,classNames:"cfd-account-card__add-server",unmountOnExit:!0},i.createElement(da,{ref:W,onSelectAccount:D,is_disabled:p}))))},fa=function(e){var t=e.is_eu,a=e.is_eu_country,n=e.has_maltainvest_account,r=e.has_cfd_account_error,o=e.openAccountNeededModal,c=e.standpoint,l=e.is_loading,s=e.is_logged_in,d=e.isSyntheticCardVisible,u=e.isFinancialCardVisible,_=e.isFinancialStpCardVisible,p=e.onSelectAccount,f=e.openAccountTransfer,g=e.platform,h=e.current_list,b=e.has_cfd_account,v=e.openPasswordManager,y=e.residence,w=s&&t||!s&&a,E=i.useMemo((function(){var e=s&&t||!s&&a;return"au"===y?ia[g].au_real_financial_specs:e?ia[g].eu_real_financial_specs:ia[g].real_financial_specs}),[s,t,a,y,g]);return l?i.createElement("div",{className:"cfd-demo-accounts-display"},i.createElement(q.Z,null)):i.createElement("div",{className:"cfd-demo-accounts-display"},d("demo")&&i.createElement(pa,{has_cfd_account:b,title:(0,m.localize)("Synthetic"),type:{category:"demo",type:"synthetic",platform:g},is_disabled:r||c.malta,is_logged_in:s,existing_data:h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.synthetic"))}))],commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){return p({category:"demo",type:"synthetic"})},onPasswordManager:v,onClickFund:function(){return f(h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.synthetic"))}))],{category:"demo",type:"synthetic"})},platform:g,descriptor:(0,m.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:ia[g].real_synthetic_specs,has_banner:!0}),u()&&i.createElement(pa,{has_cfd_account:b,title:w?(0,m.localize)("CFDs"):(0,m.localize)("Financial"),is_disabled:r,is_logged_in:s,is_eu:w,type:{category:"demo",type:"financial",platform:g},existing_data:h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.financial@"))}))],commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){t&&!n&&c.iom?o("maltainvest",(0,m.localize)("Deriv Multipliers"),(0,m.localize)("demo CFDs")):p({category:"demo",type:"financial"})},onPasswordManager:v,onClickFund:function(){return f(h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.financial@"))}))],{category:"demo",type:"financial"})},platform:g,descriptor:st(g,w),specs:E,has_banner:!0}),_()&&i.createElement(pa,{has_cfd_account:b,title:(0,m.localize)("Financial STP"),type:{category:"demo",type:"financial_stp",platform:g},is_disabled:r,is_logged_in:s,existing_data:h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.financial_stp@"))}))],commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){return p({category:"demo",type:"financial_stp"})},onPasswordManager:v,onClickFund:function(){return f(h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.financial_stp@"))}))],{category:"demo",type:"financial_stp"})},descriptor:(0,m.localize)("Trade popular currency pairs and cryptocurrencies with straight-through processing order (STP)."),specs:ia[g].demo_financial_stp_specs,platform:g,has_banner:!0}))};function ga(e,t){if(e){if("string"==typeof e)return ha(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ha(e,t):void 0}}function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ba=function(e){var t=e.has_real_account,a=e.is_accounts_switcher_on,n=e.is_eu,r=e.is_eu_country,o=e.has_malta_account,c=e.has_maltainvest_account,l=e.has_cfd_account_error,s=e.is_fully_authenticated,d=e.is_pending_authentication,p=e.is_virtual,g=e.isSyntheticCardVisible,h=e.isFinancialCardVisible,b=e.isFinancialStpCardVisible,v=e.landing_companies,y=e.onSelectAccount,w=e.openAccountTransfer,E=e.openPasswordModal,z=e.isAccountOfTypeDisabled,x=e.current_list,S=e.has_cfd_account,M=e.openPasswordManager,C=e.account_settings,D=e.openAccountNeededModal,T=e.platform,P=e.standpoint,F=e.is_logged_in,N=e.toggleAccountsDialog,O=e.toggleShouldShowRealAccountsList,A=e.can_have_more_real_synthetic_mt5,k=e.residence,L=e.residence_list,j=F&&!n&&t&&A&&T===_.CFD_PLATFORMS.MT5,I=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(e,t)||ga(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(0),2),R=I[0],B=I[1],U=i.useMemo((function(){var e,t,a=C.citizen,n=C.tax_identification_number,r=C.tax_residence;return!!(a&&n&&r)||!(!a||!r)&&(null!==(e=null==v||null===(t=v.config)||void 0===t?void 0:t.tax_details_required)&&void 0!==e&&e||!L.filter((function(e){return e.value===r&&e.tin_format})).length)}),[C,L,v]),V=function(e,t,a){return e&&a?i.createElement(m.Localize,{i18n_default_text:"Set your password"}):t?i.createElement(m.Localize,{i18n_default_text:"Pending verification"}):i.createElement(m.Localize,{i18n_default_text:"Add real account"})}(s,d,U),W=F&&n||!F&&r,X=!t||d,q=i.useMemo((function(){var e=F&&n||!F&&r;return"au"===k?ia[T].au_real_financial_specs:e?ia[T].eu_real_financial_specs:ia[T].real_financial_specs}),[k,F,n,r,T]),$=function(){n&&P.malta&&!o?D("malta",(0,m.localize)("Deriv Synthetic"),(0,m.localize)("DMT5 Synthetic")):y({type:"synthetic",category:"real"})},H=function(e){return w(x[(0,_.getAccountListKey)(e,T)],{category:e.account_type,type:(0,_.getCFDAccountKey)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:T})})},Y=function(e){var t=Object.keys(x).filter((function(e){return e.startsWith("".concat(T,".real.synthetic"))}));B(t.findIndex((function(t){return x[t].group===e})))},K=function(e){if(l)return!0;if("synthetic"===e&&P.malta)return!0;if(n){var a=(0,_.getAccountTypeFields)({category:"real",type:e});return z(null==a?void 0:a.account_type)}switch(e){case"synthetic":case"financial":return!t;case"financial_stp":return X;default:return!1}},G=g("real")&&(Object.keys(x).some((function(e){return e.startsWith("".concat(T,".real.synthetic"))}))?Object.keys(x).filter((function(e){return e.startsWith("".concat(T,".real.synthetic"))})).reduce((function(e,t){return e.push(x[t]),e}),[]).map((function(e,t){return i.createElement(pa,{key:t,has_cfd_account:S,has_cfd_account_error:l,title:(0,m.localize)("Synthetic"),is_hovered:t===R,is_disabled:K("synthetic"),type:{category:"real",type:"synthetic",platform:T},is_logged_in:F,should_show_trade_servers:j,existing_data:e,commission_message:(0,m.localize)("No commission"),onSelectAccount:$,onPasswordManager:M,onClickFund:H,platform:T,descriptor:(0,m.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:ia[T].real_synthetic_specs,onHover:Y})})):[i.createElement(pa,{key:"real.synthetic",has_cfd_account:S,title:(0,m.localize)("Synthetic"),is_disabled:K("synthetic"),type:{category:"real",type:"synthetic",platform:T},is_logged_in:F,should_show_trade_servers:j,existing_data:void 0,commission_message:(0,m.localize)("No commission"),onSelectAccount:$,onPasswordManager:M,onClickFund:H,platform:T,descriptor:(0,m.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:ia[T].real_synthetic_specs,onHover:Y,is_virtual:p,toggleShouldShowRealAccountsList:O,toggleAccountsDialog:N})]),J=b()&&i.createElement(pa,{key:"real.financial_stp",has_cfd_account:S,title:(0,m.localize)("Financial STP"),type:{category:"real",type:"financial_stp",platform:T},is_logged_in:F,existing_data:x[Object.keys(x).find((function(e){return e.startsWith("".concat(T,".real.financial_stp@"))}))],commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){var e={category:"real",type:"financial_stp"};s&&U?E(e):(s||X)&&U||y(e)},button_label:V,is_button_primary:d,onPasswordManager:M,onClickFund:H,platform:T,descriptor:(0,m.localize)("Trade popular currency pairs and cryptocurrencies with straight-through processing order (STP)."),specs:ia[T].real_financial_stp_specs,is_disabled:K("financial_stp"),is_virtual:p,has_real_account:t,toggleAccountsDialog:N,toggleShouldShowRealAccountsList:O,is_accounts_switcher_on:a}),Z=h()&&i.createElement(pa,{key:"real.financial",has_cfd_account:S,is_disabled:K("financial"),title:W?(0,m.localize)("CFDs"):(0,m.localize)("Financial"),type:{category:"real",type:"financial",platform:T},existing_data:x[Object.keys(x).find((function(e){return e.startsWith("".concat(T,".real.financial@"))}))],commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){n&&!c?D("maltainvest",(0,m.localize)("Deriv Multipliers"),(0,m.localize)("real CFDs")):y({type:"financial",category:"real"})},onPasswordManager:M,onClickFund:H,platform:T,descriptor:st(T,W),specs:q,is_eu:W,is_logged_in:F,is_virtual:p,toggleShouldShowRealAccountsList:O,toggleAccountsDialog:N}),Q=[].concat(function(e){return function(e){if(Array.isArray(e))return ha(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ga(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(G||[]),[Z,J]).filter(Boolean);return i.createElement("div",{className:f()("cfd-real-accounts-display",{"cfd-real-accounts-display--has-trade-servers":j})},i.createElement(u.DesktopWrapper,null,i.createElement(u.Carousel,{list:Q,width:328,nav_position:"middle",show_bullet:!1,item_per_window:3,is_mt5:!0})),i.createElement(u.MobileWrapper,null,Q.map((function(e){return e}))))};function va(e){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ya=["children","is_loading","loading_component"];function wa(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function za(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xa(e,t){return(xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sa(e,t){return!t||"object"!==va(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ca=function(e){var t=e.children,a=e.is_loading,n=e.loading_component,r=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,ya),o=n;return a?i.createElement(o,null):i.createElement(u.Tabs,r,t)},Da=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}(c,e);var t,a,n,r,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ma(e);if(t){var r=Ma(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Sa(this,a)}}(c);function c(){var e;Ea(this,c);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).state={is_demo_enabled:!1,is_real_enabled:!1,active_index:0,is_account_needed_modal_open:!1,is_demo_tab:!0,required_account:{},is_notification_loaded:!1,password_manager:{is_visible:!1,selected_login:"",selected_account:"",selected_account_type:"",selected_account_group:"",selected_server:""}},e.openResetPassword=function(){/reset-password/.test(e.props.location.hash)&&e.props.setCFDPasswordResetModal(!0)},e.getIndexToSet=function(){return e.state.is_real_enabled?0:e.state.is_demo_enabled?1:e.props.location.hash?/demo/.test(e.props.location.hash)?1:0:void 0},e.stopNotificationLoading=function(){e.setState({is_notification_loaded:!0})},e.updateActiveIndex=function(t){var a={};1===t?a.is_demo_tab=!0:0===t&&(a.is_demo_tab=!1),void 0!==t&&e.state.active_index!==t&&(a.active_index=t),(0,_.isEmptyObject)(a)||e.setState(a)},e.openAccountTransfer=function(t,a){"real"===a.category?(sessionStorage.setItem("cfd_transfer_to_login_id",t.login),e.props.disableCFDPasswordModal(),e.props.history.push(_.routes.cashier_acc_transfer)):(e.props.setCurrentAccount(t,a),e.props.openTopUpModal())},e.togglePasswordManagerModal=function(t,a,n,r,o){e.setState((function(e){return{active_index:e.active_index,password_manager:{is_visible:!e.password_manager.is_visible,selected_login:"string"==typeof t?t:"",selected_account:"string"==typeof a?a:"",selected_account_group:n,selected_account_type:r,selected_server:o}}}))},e.openRealPasswordModal=function(t){e.props.setAccountType(t),e.props.openPasswordModal()},e.isSyntheticCardVisible=function(t){var a=e.props,n=a.current_list,r=a.platform,o=a.is_eu,i=a.is_eu_country,c=a.landing_companies,l=a.is_logged_in,s=Object.keys(n).some((function(e){return e.startsWith("".concat(r,".").concat(t,".synthetic"))}));return!(!l&&i)&&!(o&&!s)&&((0,_.isLandingCompanyEnabled)({landing_companies:c,platform:r,type:"gaming"})||!l)},e.isFinancialCardVisible=function(){var t=e.props,a=t.platform,n=t.landing_companies;return!t.is_logged_in||(0,_.isLandingCompanyEnabled)({landing_companies:n,platform:a,type:"financial"})},e.isFinancialStpCardVisible=function(){var t,a=e.props,n=a.platform,r=a.landing_companies,o=a.is_logged_in,i=a.is_eu_country;return!(!o&&i)&&((null==r||null===(t=r.mt_financial_company)||void 0===t?void 0:t.financial_stp)||!o)&&n===_.CFD_PLATFORMS.MT5},e}return t=c,(a=[{key:"componentDidMount",value:(n=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateActiveIndex(this.getIndexToSet()),this.openResetPassword(),this.props.onMount();case 3:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,t=arguments;return new Promise((function(a,r){var o=n.apply(e,t);function i(e){wa(o,a,r,i,c,"next",e)}function c(e){wa(o,a,r,i,c,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"componentDidUpdate",value:function(){var e=this;this.updateActiveIndex(),this.props.checkShouldOpenAccount(),this.props.is_logged_in&&["demo","real"].forEach((function(t){var a,n,r,o=e.isSyntheticCardVisible(t)||e.isFinancialCardVisible()||e.isFinancialStpCardVisible();e.state["is_".concat(t,"_enabled")]!==o&&e.setState((a={},r=o,(n="is_".concat(t,"_enabled"))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a))}));var t=!this.state.is_real_enabled,a=!this.state.is_demo_enabled;this.props.is_logged_in||!t&&!a||this.setState({is_real_enabled:!0,is_demo_enabled:!0})}},{key:"render",value:function(){var e=this.props,t=e.account_settings,a=e.account_status,n=e.beginRealSignupForMt5,r=e.country,o=e.createCFDAccount,c=e.current_list,l=e.dxtrade_accounts_list_error,s=e.isAccountOfTypeDisabled,d=e.is_accounts_switcher_on,p=e.is_dark_mode_on,f=e.is_eu,g=e.is_eu_country,h=e.is_fully_authenticated,b=e.is_loading,v=e.is_logged_in,y=e.is_logging_in,w=e.is_mt5_allowed,E=e.is_dxtrade_allowed,z=e.is_pending_authentication,x=e.is_virtual,S=e.landing_companies,M=e.has_malta_account,C=e.has_maltainvest_account,D=e.has_cfd_account,T=e.has_mt5_real_account_error,P=e.has_mt5_demo_account_error,F=e.has_dxtrade_real_account_error,N=e.has_dxtrade_demo_account_error,O=e.mt5_disabled_signup_types,A=e.dxtrade_disabled_signup_types,k=e.has_real_account,L=e.NotificationMessages,j=e.platform,I=e.openAccountNeededModal,B=e.residence,W=e.residence_list,q=e.standpoint,H=e.toggleAccountsDialog,K=e.toggleShouldShowRealAccountsList,G=e.can_have_more_real_synthetic_mt5,J=e.upgradeable_landing_companies,Z=e.is_reset_trading_password_modal_visible,Q=e.toggleResetTradingPasswordModal,ee=e.enableApp,te=e.disableApp,ae=e.mt5_verification_code,ne=e.dxtrade_verification_code,re=!f&&v&&!k&&(null==J?void 0:J.length)>0;if(!r&&v||y)return i.createElement(u.Loading,null);var oe=this.state.is_demo_tab?P||O.demo:T||O.real,ie=this.state.is_demo_tab?N||A.demo:F||A.real,ce=j===_.CFD_PLATFORMS.MT5?oe:ie||!!l,le=j===_.CFD_PLATFORMS.MT5?ae:ne;return j!==_.CFD_PLATFORMS.DXTRADE||E?v&&!S||b?i.createElement(u.Loading,null):i.createElement(i.Fragment,null,w||j===_.CFD_PLATFORMS.DXTRADE||!v?i.createElement("div",{className:"cfd-dashboard__container"},i.createElement(L,{is_mt5:!0,is_notification_loaded:this.state.is_notification_loaded,stopNotificationLoading:this.stopNotificationLoading}),i.createElement("div",{className:"cfd-dashboard"},i.createElement("div",{className:"cfd-dashboard__welcome-message"},i.createElement("h1",{className:"cfd-dashboard__welcome-message--heading"},function(e,t){return t===_.CFD_PLATFORMS.DXTRADE?e?(0,m.localize)("Welcome to your Deriv X dashboard"):(0,m.localize)("Welcome to Deriv X"):t===_.CFD_PLATFORMS.MT5?(0,m.localize)("Welcome to Deriv MT5 (DMT5) dashboard"):(0,m.localize)("")}(v,j))),v&&ce&&i.createElement("div",{className:"cfd-dashboard__accounts-error"},i.createElement(u.Text,{as:"p",className:"cfd-dashboard__accounts-error-message",lineHeight:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},i.createElement(m.Localize,{i18n_default_text:"Due to an issue on our server, some of your {{platform}} accounts are unavailable at the moment. Please bear with us and thank you for your patience.",values:{platform:(0,_.getCFDPlatformLabel)(j)}}))),i.createElement("div",{className:"cfd-dashboard__accounts-display"},i.createElement(Lt,{is_visible:this.state.password_manager.is_visible,platform:j,selected_login:this.state.password_manager.selected_login,selected_account:this.state.password_manager.selected_account,selected_account_group:this.state.password_manager.selected_account_group,selected_account_type:this.state.password_manager.selected_account_type,selected_server:this.state.password_manager.selected_server,toggleModal:this.togglePasswordManagerModal}),i.createElement(Ca,{active_index:this.state.active_index,top:!0,center:!0,is_loading:b,is_logged_in:v,loading_component:$,onTabItemClick:this.updateActiveIndex,should_update_hash:!0},this.state.is_real_enabled&&i.createElement("div",{label:(0,m.localize)("Real account"),"data-hash":"real"},i.createElement(i.Fragment,null,re&&i.createElement(Y,{onClickSignup:n,platform:j}),i.createElement(ba,{is_accounts_switcher_on:d,is_eu:f,is_eu_country:g,is_logged_in:v,has_maltainvest_account:C,has_malta_account:M,has_cfd_account_error:j===_.CFD_PLATFORMS.MT5?O.real:A.real||!!l,openAccountNeededModal:I,current_list:c,account_status:a,has_cfd_account:D,onSelectAccount:o,account_settings:t,landing_companies:S,is_pending_authentication:z,is_fully_authenticated:h,is_virtual:x,isSyntheticCardVisible:this.isSyntheticCardVisible,isFinancialCardVisible:this.isFinancialCardVisible,isFinancialStpCardVisible:this.isFinancialStpCardVisible,openAccountTransfer:this.openAccountTransfer,openPasswordManager:this.togglePasswordManagerModal,openPasswordModal:this.openRealPasswordModal,platform:j,isAccountOfTypeDisabled:s,has_real_account:k,standpoint:q,toggleAccountsDialog:H,toggleShouldShowRealAccountsList:K,can_have_more_real_synthetic_mt5:G,residence:B,residence_list:W}))),this.state.is_demo_enabled&&i.createElement("div",{label:(0,m.localize)("Demo account"),"data-hash":"demo"},i.createElement(fa,{is_eu:f,is_eu_country:g,is_logged_in:v,has_maltainvest_account:C,has_cfd_account_error:j===_.CFD_PLATFORMS.MT5?O.demo:A.demo||!!l,openAccountNeededModal:I,standpoint:q,is_loading:b,isSyntheticCardVisible:this.isSyntheticCardVisible,isFinancialCardVisible:this.isFinancialCardVisible,isFinancialStpCardVisible:this.isFinancialStpCardVisible,has_cfd_account:D,current_list:c,onSelectAccount:o,landing_companies:S,openAccountTransfer:this.openAccountTransfer,openPasswordManager:this.togglePasswordManagerModal,platform:j,residence:B}))),i.createElement(lt,{platform:j}),i.createElement("div",{className:"cfd-dashboard__maintenance"},i.createElement(u.Icon,{icon:"IcAlertWarning",size:(0,_.isMobile)()?28:16,className:"cfd-dashboard__maintenance-icon"}),i.createElement("div",{className:"cfd-dashboard__maintenance-text"},j===_.CFD_PLATFORMS.DXTRADE&&i.createElement(m.Localize,{i18n_default_text:"Server maintenance starts at 06:00 GMT every Sunday and may last up to 2 hours. Service may be disrupted during this time."}),j===_.CFD_PLATFORMS.MT5&&i.createElement(m.Localize,{i18n_default_text:"Server maintenance starting 01:00 GMT every Sunday. This process may take up to 2 hours to complete. Service may be disrupted during this time."})))),i.createElement(u.DesktopWrapper,null,i.createElement(gt,{platform:j,active_index:this.state.active_index,is_dark_mode_on:p})),i.createElement(u.MobileWrapper,null,i.createElement("div",{className:"cfd-dashboard__download-center"},i.createElement("h1",{className:"cfd-dashboard__download-center--heading"},j===_.CFD_PLATFORMS.MT5&&i.createElement(m.Localize,{i18n_default_text:"Download the MT5 app"}),j===_.CFD_PLATFORMS.DXTRADE&&i.createElement(m.Localize,{i18n_default_text:"Download the Deriv X app"})),i.createElement("div",{className:"cfd-dashboard__download-center-options--mobile"},i.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-devices"},j===_.CFD_PLATFORMS.MT5&&i.createElement(i.Fragment,null,i.createElement(u.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),i.createElement(u.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),j===_.CFD_PLATFORMS.DXTRADE&&i.createElement(i.Fragment,null,i.createElement(u.Icon,{icon:"IcDxtradeDeviceTablet",width:133,height:106}),i.createElement(u.Icon,{icon:"IcDxtradeDevicePhone",width:48,height:74}))),i.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-links"},i.createElement("a",{href:j===_.CFD_PLATFORMS.MT5?mt("android"):_t("android"),target:"_blank",rel:"noopener noreferrer"},i.createElement(u.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),i.createElement("a",{href:j===_.CFD_PLATFORMS.MT5?mt("ios"):_t("ios"),target:"_blank",rel:"noopener noreferrer"},i.createElement(u.Icon,{icon:"IcInstallationApple",width:135,height:40})))))),i.createElement(It,{platform:j}),i.createElement(R,{platform:j,has_suspended_account:ce}),i.createElement(U,null),j===_.CFD_PLATFORMS.MT5&&i.createElement(i.Fragment,null,i.createElement(Je,null),i.createElement(Yt,null)),i.createElement(Ht,{platform:j}),i.createElement(X(),{platform:j,enableApp:ee,disableApp:te,toggleResetTradingPasswordModal:Q,is_visible:Z,is_loading:b,verification_code:le}))):i.createElement(u.PageError,{buttonSize:"medium",header:i.createElement(m.Localize,{i18n_default_text:"DMT5 is not available in {{country}}",values:{country:t.residence},components:[i.createElement("br",{key:0})]}),messages:[i.createElement(m.Localize,{key:0,i18n_default_text:"Please explore our other platforms."})],redirect_urls:[_.routes.trade,_.routes.bot],redirect_labels:[i.createElement(m.Localize,{key:0,i18n_default_text:"Explore DTrader"}),i.createElement(m.Localize,{key:1,i18n_default_text:"Explore DBot"})]})):i.createElement(V.Redirect,{to:_.routes.mt5})}}])&&za(t.prototype,a),c}(i.Component);const Ta=(0,c.withRouter)((0,y.$j)((function(e){var t=e.client,a=e.modules,n=e.ui;return{beginRealSignupForMt5:a.cfd.beginRealSignupForMt5,checkShouldOpenAccount:a.cfd.checkShouldOpenAccount,country:t.account_settings.residence,client_email:t.email_address,createCFDAccount:a.cfd.createCFDAccount,current_list:a.cfd.current_list,landing_companies:t.landing_companies,isAccountOfTypeDisabled:t.isAccountOfTypeDisabled,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_virtual:t.is_virtual,is_mt5_allowed:t.is_mt5_allowed,is_dxtrade_allowed:t.is_dxtrade_allowed,mt5_disabled_signup_types:t.mt5_disabled_signup_types,dxtrade_disabled_signup_types:t.dxtrade_disabled_signup_types,has_maltainvest_account:t.has_maltainvest_account,has_malta_account:t.has_malta_account,can_upgrade_to:t.can_upgrade_to,account_settings:t.account_settings,disableCFDPasswordModal:a.cfd.disableCFDPasswordModal,dxtrade_accounts_list_error:t.dxtrade_accounts_list_error,is_pending_authentication:t.is_pending_authentication,is_compare_accounts_visible:a.cfd.is_compare_accounts_visible,is_fully_authenticated:t.is_fully_authenticated,openPasswordModal:a.cfd.enableCFDPasswordModal,openAccountNeededModal:n.openAccountNeededModal,is_loading:t.is_populating_mt5_account_list,residence:t.residence,residence_list:t.residence_list,has_cfd_account:a.cfd.has_cfd_account,has_mt5_real_account_error:t.has_account_error_in_mt5_real_list,has_mt5_demo_account_error:t.has_account_error_in_mt5_demo_list,has_dxtrade_real_account_error:t.has_account_error_in_dxtrade_real_list,has_dxtrade_demo_account_error:t.has_account_error_in_dxtrade_demo_list,has_real_account:t.has_active_real_account,setAccountType:a.cfd.setAccountType,setCFDPasswordResetModal:a.cfd.setCFDPasswordResetModal,setCurrentAccount:a.cfd.setCurrentAccount,standpoint:t.standpoint,toggleCompareAccounts:a.cfd.toggleCompareAccountsModal,is_accounts_switcher_on:n.is_accounts_switcher_on,openTopUpModal:n.openTopUpModal,NotificationMessages:n.notification_messages_ui,onMount:a.cfd.onMount,onUnmount:a.cfd.onUnmount,toggleAccountsDialog:n.toggleAccountsDialog,toggleShouldShowRealAccountsList:n.toggleShouldShowRealAccountsList,can_have_more_real_synthetic_mt5:t.can_have_more_real_synthetic_mt5,upgradeable_landing_companies:t.upgradeable_landing_companies,is_dark_mode_on:n.is_dark_mode_on,disableApp:n.disableApp,enableApp:n.enableApp,is_reset_trading_password_modal_visible:n.is_reset_trading_password_modal_visible,toggleResetTradingPasswordModal:n.setResetTradingPasswordModalOpen,mt5_verification_code:t.verification_code.trading_platform_mt5_password_reset,dxtrade_verification_code:t.verification_code.trading_platform_dxtrade_password_reset}}))(Da))},"./templates/_common/components/loading.jsx":(e,t,a)=>{a.d(t,{Z:()=>i});var n=a("../../../node_modules/classnames/index.js"),r=a.n(n),o=a("react");const i=function(e){var t=e.className,a=e.is_invisible,n=e.theme,i=e.id;return o.createElement("div",{id:i,className:r()("barspinner","barspinner--".concat(n||"dark"),{invisible:a},t)},Array.from(new Array(5)).map((function(e,t){return o.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);