"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1708],{27381:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var s=r(32735),n=r(75672),a=r(11838),o=r(58468),i=r(60216),l=r.n(i),c=r(40841),u=r.n(c),d=r(71838),p=r(17502),_=r(20374);function m(e,t,r,s,n,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(s,n)}var g=function(e){var t=e.logoutClient,r=e.social_identity_provider,n=e.toggleResetPasswordModal,i=e.verification_code,l=function(e,t){if(t.setSubmitting(!1),t.resetForm({password:""}),e)return console.error(e),void t.setStatus({error_msg:e});t.setStatus({reset_complete:!0})};return s.createElement("div",{className:"unlink-password"},s.createElement(d.Formik,{initialValues:{password:""},initialStatus:{reset_complete:!1,error_msg:""},validate:function(e){var t={};return(0,p.validLength)(e.password,{min:8,max:25})?(0,p.validPassword)(e.password)||(t.password=(0,p.getErrorMessages)().password()):t.password=(0,_.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),t},onSubmit:function(e,t){var r={reset_password:1,new_password:e.password,verification_code:i};o.WS.resetPassword(r).then(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.error?l(r.error.message,t):l(null,t);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(s,n){var a=e.apply(t,r);function o(e){m(a,s,n,o,i,"next",e)}function i(e){m(a,s,n,o,i,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())}},(function(e){var o=e.handleBlur,i=e.errors,l=e.values,c=e.touched,m=e.isSubmitting,g=e.handleChange,w=e.status;return s.createElement(d.Form,null,s.createElement(s.Fragment,null,w.reset_complete?s.createElement("div",{className:"unlink-password__password-success"},s.createElement(a.Icon,{className:"unlink-password__icon",icon:"IcUnlink".concat((0,p.toTitleCase)(r)),size:128}),s.createElement(a.Text,{as:"p",weight:"bold",className:"unlink-password__heading"},s.createElement(_.Localize,{i18n_default_text:"Success!"})),s.createElement(a.Text,{align:"center",as:"p",size:"xs",className:"unlink-password__subtext"},s.createElement(_.Localize,{i18n_default_text:"Your Deriv account is unlinked from {{social_identity_provider}}. Use your email and password for future log in.",values:{social_identity_provider:(0,p.toTitleCase)(r)}})),s.createElement(a.Button,{type:"button",onClick:function(){n(!1),t().then((function(){(0,p.redirectToLogin)(!1,(0,_.getLanguage)(),!1)}))},primary:!0,large:!0},s.createElement(_.Localize,{i18n_default_text:"Got it"}))):s.createElement("div",{className:"unlink-password__set-password"},s.createElement(a.Text,{as:"p",weight:"bold",className:"unlink-password__heading"},s.createElement(_.Localize,{i18n_default_text:"Deriv password"})),s.createElement(a.Text,{as:"p",size:"xs",className:"unlink-password__subtext"},s.createElement(_.Localize,{i18n_default_text:"Enter a new password for your Deriv account."})),s.createElement("fieldset",{className:"unlink-password__input-field"},s.createElement(a.PasswordMeter,{input:l.password,has_error:!(!c.password||!i.password),custom_feedback_messages:(0,p.getErrorMessages)().password_warnings},s.createElement(a.PasswordInput,{autoComplete:"new-password",className:"unlink-password__password-field",name:"password",label:(0,_.localize)("Deriv password"),onChange:g,onBlur:o,error:c.password&&i.password,value:l.password,"data-lpignore":"true",required:!0}))),s.createElement(a.Text,{as:"p",size:"xs",className:"unlink-password__hint"},w.error_msg?(0,_.localize)(w.error_msg):s.createElement(_.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),s.createElement(a.Button,{className:u()("unlink-password__btn",{"unlink-password__btn--disabled":!l.password||i.password||m}),type:"submit",is_disabled:!l.password||!!i.password||m,primary:!0,large:!0},s.createElement(_.Localize,{i18n_default_text:"Confirm"})))))})))};g.propTypes={logoutClient:l().func,toggleResetPasswordModal:l().func,verification_code:l().string};var w=function(e){var t=e.disableApp,r=e.enableApp,n=e.is_loading,o=e.is_visible,i=e.logoutClient,l=e.social_identity_provider,c=e.toggleResetPasswordModal,u=e.verification_code;return s.createElement(a.Dialog,{className:"unlink-password__dialog",is_visible:o,disableApp:t,enableApp:r,is_loading:n},s.createElement(g,{logoutClient:i,social_identity_provider:l,toggleResetPasswordModal:c,verification_code:u}))};w.propTypes={disableApp:l().func,enableApp:l().func,is_loading:l().bool,is_visible:l().bool,logoutClient:l().func,toggleResetPasswordModal:l().func,verification_code:l().string};const f=(0,n.$j)((function(e){var t=e.ui,r=e.client;return{disableApp:t.disableApp,enableApp:t.enableApp,is_loading:t.is_loading,is_visible:t.is_reset_password_modal_visible,logoutClient:r.logout,social_identity_provider:r.social_identity_provider,toggleResetPasswordModal:t.toggleResetPasswordModal,verification_code:r.verification_code.reset_password}}))(w);function v(e,t,r,s,n,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(s,n)}var b=function(e){var t=e.disableApp,r=e.enableApp,n=e.is_loading,o=e.is_visible,i=e.logoutClient,l=e.verification_code,c=e.toggleResetPasswordModal,m=function(e,t){if(t.setSubmitting(!1),e)return t.resetForm({password:""}),void t.setStatus({error_msg:e});t.setStatus({reset_complete:!0}),i().then((function(){(0,p.redirectToLogin)(!1,(0,_.getLanguage)(),!1)}))};return s.createElement(d.Formik,{initialValues:{password:""},initialStatus:{reset_complete:!1,error_msg:""},validate:function(e){var t={};return(0,p.validLength)(e.password,{min:8,max:25})?(0,p.validPassword)(e.password)||(t.password=(0,p.getErrorMessages)().password()):t.password=(0,_.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),t},onSubmit:function(e,t){var r={reset_password:1,new_password:e.password,verification_code:l};p.WS.resetPassword(r).then(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.error?m(r.error.message,t):m(null,t);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(s,n){var a=e.apply(t,r);function o(e){v(a,s,n,o,i,"next",e)}function i(e){v(a,s,n,o,i,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())}},(function(e){var i=e.handleBlur,l=e.errors,m=e.values,g=e.touched,w=e.isSubmitting,f=e.handleChange,v=e.status;return s.createElement(a.Dialog,{is_visible:o,disableApp:t,enableApp:r,is_loading:n,dismissable:v.error_msg,onConfirm:function(){return c(!1)},has_close_icon:!0,is_closed_on_cancel:!1},s.createElement("div",{className:"reset-password"},s.createElement(d.Form,null,s.createElement(s.Fragment,null,v.reset_complete?s.createElement("div",{className:"reset-password__password-selection"},s.createElement(a.Text,{as:"p",weight:"bold",className:"reset-password__heading"},s.createElement(_.Localize,{i18n_default_text:"Your password has been changed"})),s.createElement(a.Text,{align:"center",as:"p",size:"xxs",className:"reset-password__subtext"},s.createElement(_.Localize,{i18n_default_text:"We will now redirect you to the login page."}))):s.createElement("div",{className:"reset-password__password-selection"},s.createElement(a.Text,{as:"p",weight:"bold",className:"reset-password__heading"},s.createElement(_.Localize,{i18n_default_text:"Choose a new password"})),s.createElement("fieldset",{className:"reset-password__fieldset"},s.createElement(a.PasswordMeter,{input:m.password,has_error:!!(g.password&&l.password||v.error_msg),custom_feedback_messages:(0,p.getErrorMessages)().password_warnings},s.createElement(a.PasswordInput,{autoComplete:"new-password",className:"reset-password__password-field",name:"password",label:(0,_.localize)("Create a password"),onChange:f,onBlur:i,error:g.password&&l.password||v.error_msg,value:m.password,"data-lpignore":"true",required:!0}))),s.createElement(a.Text,{align:"center",as:"p",size:"xxs",className:"reset-password__subtext"},v.error_msg?s.createElement(_.Localize,{i18n_default_text:"{{error_msg}}",values:{error_msg:v.error_msg}}):s.createElement(_.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),s.createElement(a.Button,{className:u()("reset-password__btn",{"reset-password__btn--disabled":!m.password||l.password||w}),type:"submit",is_disabled:!m.password||!!l.password||w,primary:!0},s.createElement(_.Localize,{i18n_default_text:"Reset my password"})))))))}))};b.propTypes={disableApp:l().func,enableApp:l().func,is_loading:l().bool,is_visible:l().bool,logoutClient:l().func,verification_code:l().string};const h=(0,n.$j)((function(e){var t=e.ui,r=e.client;return{disableApp:t.disableApp,enableApp:t.enableApp,is_loading:t.is_loading,is_visible:t.is_reset_password_modal_visible,logoutClient:r.logout,toggleResetPasswordModal:t.toggleResetPasswordModal,verification_code:r.verification_code.reset_password}}))(b);function y(e,t,r,s,n,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(s,n)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(s,n){var a=e.apply(t,r);function o(e){y(a,s,n,o,i,"next",e)}function i(e){y(a,s,n,o,i,"throw",e)}o(void 0)}))}}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){i=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(i)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}const S=(0,n.$j)((function(e){return{is_logged_in:e.client.is_logged_in}}))((function(e){var t=e.is_logged_in,r=A(s.useReducer((function(e,t){return k(k({},e),t)}),{is_loading:!0,is_unlinking:!1}),2),n=r[0],i=r[1];return s.useEffect((function(){function e(){return(e=E(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,o.WS.wait("get_account_status");case 3:null!=(s=e.sent)&&null!==(r=s.get_account_status)&&void 0!==r&&r.social_identity_provider?i({is_unlinking:!0,is_loading:!1}):i({is_unlinking:!1,is_loading:!1}),e.next=8;break;case 7:i({is_unlinking:!1,is_loading:!1});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),n.is_loading?s.createElement(a.Loading,{is_fullscreen:!1}):n.is_unlinking?s.createElement(f,null):s.createElement(h,null)}))}}]);