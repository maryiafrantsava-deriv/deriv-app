(self.webpackChunk=self.webpackChunk||[]).push([[8369],{10331:(e,t,r)=>{var o,n,i,a,s;self,e.exports=(o=r(11838),n=r(90004),i=r(20374),a=r(59001),s=r(32735),(()=>{var e,t,r,c,u={"../../../node_modules/prop-types/factoryWithThrowingShims.js":(e,t,r)=>{"use strict";var o=r("../../../node_modules/prop-types/lib/ReactPropTypesSecret.js");function n(){}function i(){}i.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:n};return r.PropTypes=r,r}},"../../../node_modules/prop-types/index.js":(e,t,r)=>{e.exports=r("../../../node_modules/prop-types/factoryWithThrowingShims.js")()},"../../../node_modules/prop-types/lib/ReactPropTypesSecret.js":e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"@deriv/components":e=>{"use strict";e.exports=o},"@deriv/shared":e=>{"use strict";e.exports=n},"@deriv/translations":e=>{"use strict";e.exports=i},mobx:e=>{"use strict";e.exports=a},react:e=>{"use strict";e.exports=s}},p={};function l(e){var t=p[e];if(void 0!==t)return t.exports;var r=p[e]={exports:{}};return u[e].call(r.exports,r,r.exports,l),r.exports}l.m=u,l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"==typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"==typeof r.then)return r}var n=Object.create(null);l.r(n);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,l.d(n,i),n},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,r)=>(l.f[r](e,t),t)),[])),l.u=e=>"cashier/js/cashier."+e+".4b458ac4203eb84dc516.js",l.miniCssF=e=>{},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},c="@deriv/cashier:",l.l=(e,t,o,n)=>{if(r[e])r[e].push(t);else{var i,a;if(void 0!==o)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var p=s[u];if(p.getAttribute("src")==e||p.getAttribute("data-webpack")==c+o){i=p;break}}i||(a=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.setAttribute("data-webpack",c+o),i.src=e),r[e]=[t];var f=(t,o)=>{i.onerror=i.onload=null,clearTimeout(y);var n=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(o))),t)return t(o)},y=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),a&&document.head.appendChild(i)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="/br_deriv-app-55192/",(()=>{var e={"cashier-store":0};l.f.j=(t,r)=>{var o=l.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise(((r,n)=>o=e[t]=[r,n]));r.push(o[2]=n);var i=l.p+l.u(t),a=new Error;l.l(i,(r=>{if(l.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",a.name="ChunkLoadError",a.type=n,a.request=i,o[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,n,[i,a,s]=r,c=0;if(i.some((t=>0!==e[t]))){for(o in a)l.o(a,o)&&(l.m[o]=a[o]);s&&s(l)}for(t&&t(r);c<i.length;c++)n=i[c],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunk_deriv_cashier=self.webpackChunk_deriv_cashier||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var f={};return(()=>{"use strict";l.d(f,{default:()=>Qs});var e,t,r,o,n,i,a,s,c,u,p,y=l("mobx"),h=l("@deriv/shared");function d(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){d(i,o,n,a,s,"next",e)}function s(e){d(i,o,n,a,s,"throw",e)}a(void 0)}))}}function _(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function m(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var g=(e=y.action.bound,t=y.action.bound,r=y.action.bound,o=y.action.bound,n=y.action.bound,i=y.action.bound,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"should_show",s,this),_(this,"is_confirmed",c,this),_(this,"last_location",u,this),_(this,"current_location",p,this),this.root_store=t}var t,r,o,n,i;return t=e,r=[{key:"shouldNavigateAfterPrompt",value:function(e,t){this.is_confirmed||(this.last_location=e,this.should_show=!0,this.current_location=t)}},{key:"resetLastLocation",value:function(){this.last_location=null}},{key:"resetIsConfirmed",value:function(){this.is_confirmed=!1}},{key:"onConfirm",value:(i=b(regeneratorRuntime.mark((function e(){var t,r,o,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.root_store,r=t.client,o=t.modules,n=o.cashier.account_transfer.accounts_list,this.should_show=!1,this.is_confirmed=!0,i=n.some((function(e){return!e.is_crypto})),!(0,h.isCryptocurrency)(null==r?void 0:r.currency)||!i){e.next=8;break}return e.next=8,this.doSwitch();case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"doSwitch",value:(n=b(regeneratorRuntime.mark((function e(){var t,r,o,n,i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.root_store,r=t.client,o=t.modules,n=o.cashier,i=n.account_transfer,a=n.general_store,s=i.accounts_list.filter((function(e){return!e.is_crypto})),c=s.map((function(e){return e.value}))[0],e.next=6,r.switchAccount(c);case 6:"deposit"===this.current_location&&a.setIsDeposit(!0);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onCancel",value:function(){this.should_show=!1}},{key:"continueRoute",value:function(){this.is_confirmed&&this.last_location&&this.root_store.common.routeTo(this.last_location)}}],r&&m(t.prototype,r),o&&m(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),s=v(a.prototype,"should_show",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=v(a.prototype,"is_confirmed",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=v(a.prototype,"last_location",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=v(a.prototype,"current_location",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v(a.prototype,"shouldNavigateAfterPrompt",[e],Object.getOwnPropertyDescriptor(a.prototype,"shouldNavigateAfterPrompt"),a.prototype),v(a.prototype,"resetLastLocation",[t],Object.getOwnPropertyDescriptor(a.prototype,"resetLastLocation"),a.prototype),v(a.prototype,"resetIsConfirmed",[r],Object.getOwnPropertyDescriptor(a.prototype,"resetIsConfirmed"),a.prototype),v(a.prototype,"onConfirm",[o],Object.getOwnPropertyDescriptor(a.prototype,"onConfirm"),a.prototype),v(a.prototype,"onCancel",[n],Object.getOwnPropertyDescriptor(a.prototype,"onCancel"),a.prototype),v(a.prototype,"continueRoute",[i],Object.getOwnPropertyDescriptor(a.prototype,"continueRoute"),a.prototype),a),w=l("react"),O=l.n(w),k=l("@deriv/translations");const P={containers:{account_transfer:"account_transfer",deposit:"deposit",payment_agent:"payment_agent",payment_agent_transfer:"payment_agent_transfer",withdraw:"withdraw"},map_action:{withdraw:"payment_withdraw",payment_agent:"payment_agent_withdraw"}};var C,T,S,A,D,j,I,x,z,R,E,M,L,W,F,V,B;function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function q(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function G(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var X,K,J,Y,$,Q,Z,ee,te,re,oe,ne,ie,ae,se,ce,ue,pe,le,fe,ye,he,de,be,_e,me,ve,ge,we,Oe,ke,Pe,Ce,Te,Se,Ae,De,je,Ie,xe,ze,Re=(C=y.action.bound,T=y.action.bound,S=y.action.bound,A=y.action.bound,D=y.action.bound,j=y.action.bound,I=y.action.bound,x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,"message",z,this),U(this,"code",R,this),U(this,"fields",E,this),U(this,"is_show_full_page",M,this),U(this,"onClickButton",L,this),U(this,"is_ask_uk_funds_protection",W,this),U(this,"is_self_exclusion_max_turnover_set",F,this),U(this,"is_ask_authentication",V,this),U(this,"is_ask_financial_risk_approval",B,this)}var t,r,o;return t=e,r=[{key:"setErrorMessage",value:function(e,t,r){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onClickButton:t,code:e.code,message:e.message,is_show_full_page:r||/InvalidToken|WrongResponse/.test(e.code)},(0,h.getPropertyValue)(e,["details","fields"])&&{fields:e.details.fields});this.onClickButton=o.onClickButton,this.code=o.code,this.message=o.message,this.is_show_full_page=o.is_show_full_page,this.fields=o.fields,this.is_ask_uk_funds_protection=null==o?void 0:o.is_ask_uk_funds_protection,this.is_self_exclusion_max_turnover_set=null==o?void 0:o.is_self_exclusion_max_turnover_set,this.is_ask_authentication=null==o?void 0:o.is_ask_authentication,this.is_ask_financial_risk_approval=null==o?void 0:o.is_ask_financial_risk_approval}},{key:"handleCashierError",value:function(e){switch(e.code){case"ASK_TNC_APPROVAL":case"ASK_FIX_DETAILS":this.setErrorMessage(e,null,!0);break;case"ASK_UK_FUNDS_PROTECTION":this.setIsAskUkFundsProtection(!0);break;case"ASK_SELF_EXCLUSION_MAX_TURNOVER_SET":this.setIsSelfExclusionMaxTurnoverSet(!0);break;case"ASK_AUTHENTICATE":case"ASK_AGE_VERIFICATION":this.setIsAskAuthentication(!0);break;case"ASK_FINANCIAL_RISK_APPROVAL":this.setIsAskFinancialRiskApproval(!0);break;default:this.setErrorMessage(e),this.setIsAskUkFundsProtection(!1),this.setIsSelfExclusionMaxTurnoverSet(!1),this.setIsAskAuthentication(!1),this.setIsAskFinancialRiskApproval(!1)}}},{key:"setMessage",value:function(e){this.message=e}},{key:"setIsAskUkFundsProtection",value:function(e){this.is_ask_uk_funds_protection=e}},{key:"setIsSelfExclusionMaxTurnoverSet",value:function(e){this.is_self_exclusion_max_turnover_set=e}},{key:"setIsAskAuthentication",value:function(e){this.is_ask_authentication=e}},{key:"setIsAskFinancialRiskApproval",value:function(e){this.is_ask_financial_risk_approval=e}}],r&&q(t.prototype,r),o&&q(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),z=G(x.prototype,"message",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=G(x.prototype,"code",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=G(x.prototype,"fields",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=G(x.prototype,"is_show_full_page",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=G(x.prototype,"onClickButton",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=G(x.prototype,"is_ask_uk_funds_protection",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=G(x.prototype,"is_self_exclusion_max_turnover_set",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=G(x.prototype,"is_ask_authentication",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=G(x.prototype,"is_ask_financial_risk_approval",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G(x.prototype,"setErrorMessage",[C],Object.getOwnPropertyDescriptor(x.prototype,"setErrorMessage"),x.prototype),G(x.prototype,"handleCashierError",[T],Object.getOwnPropertyDescriptor(x.prototype,"handleCashierError"),x.prototype),G(x.prototype,"setMessage",[S],Object.getOwnPropertyDescriptor(x.prototype,"setMessage"),x.prototype),G(x.prototype,"setIsAskUkFundsProtection",[A],Object.getOwnPropertyDescriptor(x.prototype,"setIsAskUkFundsProtection"),x.prototype),G(x.prototype,"setIsSelfExclusionMaxTurnoverSet",[D],Object.getOwnPropertyDescriptor(x.prototype,"setIsSelfExclusionMaxTurnoverSet"),x.prototype),G(x.prototype,"setIsAskAuthentication",[j],Object.getOwnPropertyDescriptor(x.prototype,"setIsAskAuthentication"),x.prototype),G(x.prototype,"setIsAskFinancialRiskApproval",[I],Object.getOwnPropertyDescriptor(x.prototype,"setIsAskFinancialRiskApproval"),x.prototype),x);function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function Ve(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function Be(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){Ve(i,o,n,a,s,"next",e)}function s(e){Ve(i,o,n,a,s,"throw",e)}a(void 0)}))}}function Ne(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function He(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ue(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var qe,Ge,Xe,Ke,Je,Ye,$e,Qe,Ze,et,tt,rt,ot,nt,it,at,st,ct,ut=function(e){return e.startsWith("MX")},pt=function(e,t){return t?O().createElement(k.Localize,{i18n_default_text:"Transfer from {{selected_value}} is not allowed, Please choose another account from dropdown",values:{selected_value:e}}):O().createElement(k.Localize,{i18n_default_text:"Transfer to {{selected_value}} is not allowed, Please choose another account from dropdown",values:{selected_value:e}})},lt=(X=y.action.bound,K=y.action.bound,J=y.action.bound,Y=y.action.bound,$=y.action.bound,Q=y.action.bound,Z=y.action.bound,ee=y.action.bound,te=y.action.bound,re=y.action.bound,oe=y.action.bound,ne=y.action.bound,ie=y.action.bound,ae=y.action.bound,se=y.action.bound,ce=y.action.bound,ue=y.action.bound,pe=y.action.bound,le=y.action.bound,fe=y.action.bound,ye=y.action.bound,he=y.action.bound,de=y.action.bound,be=y.action.bound,_e=function(){function e(t){var r=this,o=t.WS,n=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ne(this,"accounts_list",me,this),Ne(this,"container",ve,this),Ne(this,"error",ge,this),Ne(this,"has_no_account",we,this),Ne(this,"has_no_accounts_balance",Oe,this),Ne(this,"is_transfer_confirm",ke,this),Ne(this,"is_transfer_successful",Pe,this),Ne(this,"is_mt5_transfer_in_progress",Ce,this),Ne(this,"minimum_fee",Te,this),Ne(this,"receipt",Se,this),Ne(this,"selected_from",Ae,this),Ne(this,"selected_to",De,this),Ne(this,"account_transfer_amount",je,this),Ne(this,"transfer_fee",Ie,this),Ne(this,"transfer_limit",xe,this),this.requestTransferBetweenAccounts=function(){var e=Be(regeneratorRuntime.mark((function e(t){var o,n,i,a,s,c,u,p,l,f,y,d,b,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.amount,n=r.root_store,i=n.client,a=n.modules,s=a.cashier.general_store.setLoading,c=i.is_logged_in,u=i.responseMt5LoginList,p=i.responseTradingPlatformAccountsList,l=i.setAccountStatus,f=i.setBalanceOtherAccounts,c){e.next=6;break}return e.abrupt("return",null);case 6:return s(!0),r.error.setErrorMessage(""),(y=r.selected_from.is_mt||r.selected_to.is_mt)&&r.setIsMT5TransferInProgress(!0),d=r.selected_from.currency,e.next=13,r.WS.authorized.transferBetweenAccounts(r.selected_from.value,r.selected_to.value,d,o);case 13:if(b=e.sent,y&&r.setIsMT5TransferInProgress(!1),!b.error){e.next=24;break}if("Fiat2CryptoTransferOverLimit"!==b.error.code){e.next=21;break}return e.next=19,r.WS.authorized.getAccountStatus();case 19:(_=e.sent).error||l(_.get_account_status);case 21:r.error.setErrorMessage(b.error),e.next=28;break;case 24:r.setReceiptTransfer({amount:(0,h.formatMoney)(d,o,!0)}),b.accounts.forEach((function(e){r.setBalanceByLoginId(e.loginid,e.balance),e.loginid===r.selected_from.value?r.setBalanceSelectedFrom(e.balance):e.loginid===r.selected_to.value&&r.setBalanceSelectedTo(e.balance),e.account_type===h.CFD_PLATFORMS.MT5&&Promise.all([r.WS.mt5LoginList(),r.WS.balanceAll()]).then((function(e){var t=We(e,2),r=t[0],o=t[1];u(r),f(o.balance)})),e.account_type===h.CFD_PLATFORMS.DXTRADE&&Promise.all([r.WS.tradingPlatformAccountsList(h.CFD_PLATFORMS.DXTRADE),r.WS.balanceAll()]).then((function(e){var t=We(e,2),r=t[0],o=t[1];p(r),f(o.balance)}))})),r.setAccountTransferAmount(null),r.setIsTransferConfirm(!0);case 28:return s(!1),e.abrupt("return",b);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne(this,"resetAccountTransfer",ze,this),this.root_store=n,this.WS=o}var t,r,o,n,i;return t=e,r=[{key:"is_account_transfer_visible",get:function(){var e=this.root_store.client,t=e.has_maltainvest_account,r=e.landing_company_shortcode;return"im"!==e.residence&&("malta"!==r||t)}},{key:"is_transfer_locked",get:function(){var e=this.root_store.client,t=e.is_financial_account,r=e.is_financial_information_incomplete,o=e.is_trading_experience_incomplete;return!!e.account_status.status&&t&&(r||o)&&this.error.is_ask_financial_risk_approval}},{key:"setBalanceByLoginId",value:function(e,t){this.accounts_list.find((function(t){return e===t.value})).balance=t}},{key:"setBalanceSelectedFrom",value:function(e){this.selected_from.balance=e}},{key:"setBalanceSelectedTo",value:function(e){this.selected_to.balance=e}},{key:"onMountAccountTransfer",value:(i=Be(regeneratorRuntime.mark((function e(){var t,r,o,n,i,a,s,c,u,p,l,f,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.root_store,r=t.client,o=t.modules,n=o.cashier.general_store,i=n.onMountCommon,a=n.setLoading,s=n.setOnRemount,c=r.active_accounts,u=r.is_logged_in,a(!0),s(this.onMountAccountTransfer),e.next=7,i();case 7:return e.next=9,this.WS.wait("website_status");case 9:if(this.has_no_accounts_balance&&Object.keys(c).find((function(e){return!c[e].is_virtual&&c[e].balance}))&&this.setHasNoAccountsBalance(!1),!u){e.next=27;break}return e.next=14,this.WS.authorized.transferBetweenAccounts();case 14:if(!(l=e.sent).error){e.next=19;break}return this.error.setErrorMessage(l.error,this.onMountAccountTransfer),a(!1),e.abrupt("return");case 19:if(this.canDoAccountTransfer(l.accounts)){e.next=21;break}return e.abrupt("return");case 21:return e.next=23,this.sortAccountsTransfer(l);case 23:this.setTransferFee(),this.setMinimumFee(),this.setTransferLimit(),(null===(p=this.accounts_list)||void 0===p?void 0:p.length)>0&&(f=sessionStorage.getItem("cfd_transfer_to_login_id"),sessionStorage.removeItem("cfd_transfer_to_login_id"),(y=this.accounts_list.find((function(e){return e.value===f})))&&(ut(y.value)&&(y.error=pt(y.value)),this.setSelectedTo(y)));case 27:a(!1);case 28:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"canDoAccountTransfer",value:function(e){var t=!0;return e.find((function(e){return+e.balance>0}))?this.setHasNoAccountsBalance(!1):(t=!1,this.setHasNoAccountsBalance(!0)),e.length<=1?(t=!1,this.setHasNoAccount(!0)):this.setHasNoAccount(!1),t||this.root_store.modules.cashier.general_store.setLoading(!1),t}},{key:"setHasNoAccountsBalance",value:function(e){this.has_no_accounts_balance=e}},{key:"setHasNoAccount",value:function(e){this.has_no_account=e}},{key:"setTransferFee",value:function(){var e=(0,h.getPropertyValue)((0,h.getCurrencies)(),[this.selected_from.currency,"transfer_between_accounts","fees",this.selected_to.currency]);this.transfer_fee=Number(e||0)}},{key:"setMinimumFee",value:function(){var e=(0,h.getDecimalPlaces)(this.selected_from.currency);this.minimum_fee=(1/Math.pow(10,e)).toFixed(e)}},{key:"setTransferLimit",value:function(){var e,t=this.selected_from.is_mt||this.selected_to.is_mt,r=this.selected_from.is_dxtrade||this.selected_to.is_dxtrade;e=t?"limits_mt5":r?"limits_dxtrade":"limits";var o=(0,h.getPropertyValue)((0,h.getCurrencies)(),[this.selected_from.currency,"transfer_between_accounts",e]),n=this.selected_from.balance,i=(0,h.getDecimalPlaces)(this.selected_from.currency);this.transfer_limit={max:null==o||!o.max||+n>=((null==o?void 0:o.min)||0)&&+n<=(null==o?void 0:o.max)?n:null==o?void 0:o.max.toFixed(i),min:null!=o&&o.min?(+(null==o?void 0:o.min)).toFixed(i):null}}},{key:"sortAccountsTransfer",value:(n=Be(regeneratorRuntime.mark((function e(t){var r,o,n,i,a,s,c,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,e.t0){e.next=5;break}return e.next=4,this.WS.authorized.transferBetweenAccounts();case 4:e.t0=e.sent;case 5:if(n=e.t0,this.accounts_list.length){e.next=9;break}if(!n.error){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.WS.storage.mt5LoginList();case 11:if(e.t2=r=e.sent,e.t1=null===e.t2,e.t1){e.next=15;break}e.t1=void 0===r;case 15:if(!e.t1){e.next=19;break}e.t3=void 0,e.next=20;break;case 19:e.t3=r.mt5_login_list;case 20:return i=e.t3,e.next=23,this.WS.tradingPlatformAccountsList(h.CFD_PLATFORMS.DXTRADE);case 23:if(e.t5=o=e.sent,e.t4=null===e.t5,e.t4){e.next=27;break}e.t4=void 0===o;case 27:if(!e.t4){e.next=31;break}e.t6=void 0,e.next=32;break;case 31:e.t6=o.trading_platform_accounts;case 32:a=e.t6,s=n.accounts.map((function(e){if(e.account_type===h.CFD_PLATFORMS.MT5&&Array.isArray(i)&&i.length){var t=i.find((function(t){return t.login===e.loginid}));return void 0===t?e:Me(Me(Me({},e),t),{},{account_type:h.CFD_PLATFORMS.MT5})}if(e.account_type===h.CFD_PLATFORMS.DXTRADE&&Array.isArray(a)&&a.length){var r=a.find((function(t){return t.account_id===e.loginid}));return void 0===r?e:Me(Me(Me({},e),r),{},{account_type:h.CFD_PLATFORMS.DXTRADE})}return e})),n.accounts.length>1&&s.sort((function(e,t){var r=e.account_type===h.CFD_PLATFORMS.MT5,o=t.account_type===h.CFD_PLATFORMS.MT5,n=!r&&(0,h.isCryptocurrency)(e.currency),i=!o&&(0,h.isCryptocurrency)(t.currency),a=!r&&!n,s=!o&&!i;return r&&o?"gaming"===e.market_type||"synthetic"===e.market_type?-1:"financial"===e.sub_account_type?"gaming"===t.market_type||"synthetic"===t.market_type?1:-1:1:n&&i||a&&s?e.currency<t.currency?-1:1:n&&o||a&&i||a&&o||r?-1:1})),c=[],this.setSelectedTo({}),s.forEach((function(e){var t,r,o={mt5:{name:"DMT5",icon:"IcMt5"},dxtrade:{name:"Deriv X",icon:"IcDxtrade"}},n=Object.keys(o).includes(e.account_type),i=null===(t=o[e.account_type])||void 0===t?void 0:t.name,a="".concat(null===(r=o[e.account_type])||void 0===r?void 0:r.icon,"-").concat((0,h.getCFDAccount)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:e.account_type,is_eu:u.root_store.client.is_eu})),s=Me({text:n?"".concat(i," ").concat((0,h.getCFDAccountDisplay)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:e.account_type,is_eu:u.root_store.client.is_eu})):(0,h.getCurrencyDisplayCode)("eUSDT"!==e.currency?e.currency.toUpperCase():e.currency),value:e.loginid,balance:e.balance,currency:e.currency,is_crypto:(0,h.isCryptocurrency)(e.currency),is_mt:e.account_type===h.CFD_PLATFORMS.MT5,is_dxtrade:e.account_type===h.CFD_PLATFORMS.DXTRADE},n&&{platform_icon:a,market_type:(0,h.getCFDAccount)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:e.account_type,is_eu:u.root_store.client.is_eu})});e.loginid===u.root_store.client.loginid?(ut(s.value)&&(s.error=pt(s.value,!0)),u.setSelectedFrom(s)):(0,h.isEmptyObject)(u.selected_to)&&(ut(s.value)&&(s.error=pt(s.value)),u.setSelectedTo(s)),c.push(s)})),this.setAccounts(c);case 39:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setSelectedFrom",value:function(e){this.selected_from=e}},{key:"setSelectedTo",value:function(e){this.selected_to=e}},{key:"setAccounts",value:function(e){this.accounts_list=e}},{key:"setIsTransferConfirm",value:function(e){this.is_transfer_confirm=e}},{key:"setAccountTransferAmount",value:function(e){this.account_transfer_amount=e}},{key:"setIsTransferSuccessful",value:function(e){this.is_transfer_successful=e}},{key:"setIsMT5TransferInProgress",value:function(e){this.is_mt5_transfer_in_progress=e}},{key:"setReceiptTransfer",value:function(e){var t=e.amount;this.receipt={amount_transferred:t}}},{key:"onChangeTransferFrom",value:function(e){var t=e.target;this.error.setErrorMessage(""),this.selected_from.error="";var r=this.accounts_list.find((function(e){return e.value===t.value}));if(r.value===this.selected_to.value)this.onChangeTransferTo({target:{value:this.selected_from.value}});else if(r.is_mt&&this.selected_to.is_mt||r.is_dxtrade&&this.selected_to.is_dxtrade||r.is_dxtrade&&this.selected_to.is_mt||r.is_mt&&this.selected_to.is_dxtrade){var o=this.accounts_list.find((function(e){return!e.is_mt&&!e.is_dxtrade}));this.onChangeTransferTo({target:{value:o.value}})}ut(r.value)&&(r.error=pt(r.value,!0)),this.selected_from=r,this.setTransferFee(),this.setMinimumFee(),this.setTransferLimit()}},{key:"onChangeTransferTo",value:function(e){var t=e.target;this.error.setErrorMessage(""),this.selected_to.error="";var r=this.accounts_list;this.selected_to=r.find((function(e){return e.value===t.value}))||{},ut(this.selected_to.value)&&(this.selected_to.error=pt(this.selected_to.value)),this.setTransferFee(),this.setMinimumFee(),this.setTransferLimit()}},{key:"setTransferPercentageSelectorResult",value:function(e){var t=this.root_store.modules.cashier,r=t.crypto_fiat_converter,o=t.general_store,n=this.selected_from.currency,i=this.selected_to.currency;e>0||0==+this.selected_from.balance?(r.setConverterFromAmount(e),this.validateTransferFromAmount(),r.onChangeConverterFromAmount({target:{value:e}},n,i)):0==+this.selected_from.balance?(r.setConverterFromAmount(e),this.validateTransferFromAmount()):r.resetConverter(),r.setIsTimerVisible(!1),o.percentageSelectorSelectionStatus(!1)}},{key:"validateTransferFromAmount",value:function(){var e=this.root_store.modules.cashier.crypto_fiat_converter,t=e.converter_from_amount,r=e.setConverterFromError;if(t){var o=(0,h.validNumber)(t,{type:"float",decimals:(0,h.getDecimalPlaces)(this.selected_from.currency),min:this.transfer_limit.min,max:this.transfer_limit.max}),n=o.is_ok,i=o.message;n?+this.selected_from.balance<+t?r((0,k.localize)("Insufficient funds")):r(""):r(i)}else r((0,k.localize)("This field is required."))}},{key:"validateTransferToAmount",value:function(){var e=this.root_store.modules.cashier.crypto_fiat_converter,t=e.converter_to_amount,r=e.setConverterToError;if(t){var o=this.selected_to.currency,n=(0,h.validNumber)(t,{type:"float",decimals:(0,h.getDecimalPlaces)(o)}),i=n.is_ok,a=n.message;r(i?"":a)}}}],r&&He(t.prototype,r),o&&He(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),me=Ue(_e.prototype,"accounts_list",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=Ue(_e.prototype,"container",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.containers.account_transfer}}),ge=Ue(_e.prototype,"error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Re}}),we=Ue(_e.prototype,"has_no_account",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oe=Ue(_e.prototype,"has_no_accounts_balance",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ke=Ue(_e.prototype,"is_transfer_confirm",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pe=Ue(_e.prototype,"is_transfer_successful",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ce=Ue(_e.prototype,"is_mt5_transfer_in_progress",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Te=Ue(_e.prototype,"minimum_fee",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=Ue(_e.prototype,"receipt",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ae=Ue(_e.prototype,"selected_from",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),De=Ue(_e.prototype,"selected_to",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),je=Ue(_e.prototype,"account_transfer_amount",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ie=Ue(_e.prototype,"transfer_fee",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=Ue(_e.prototype,"transfer_limit",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ue(_e.prototype,"is_account_transfer_visible",[y.computed],Object.getOwnPropertyDescriptor(_e.prototype,"is_account_transfer_visible"),_e.prototype),Ue(_e.prototype,"is_transfer_locked",[y.computed],Object.getOwnPropertyDescriptor(_e.prototype,"is_transfer_locked"),_e.prototype),Ue(_e.prototype,"setBalanceByLoginId",[X],Object.getOwnPropertyDescriptor(_e.prototype,"setBalanceByLoginId"),_e.prototype),Ue(_e.prototype,"setBalanceSelectedFrom",[K],Object.getOwnPropertyDescriptor(_e.prototype,"setBalanceSelectedFrom"),_e.prototype),Ue(_e.prototype,"setBalanceSelectedTo",[J],Object.getOwnPropertyDescriptor(_e.prototype,"setBalanceSelectedTo"),_e.prototype),Ue(_e.prototype,"onMountAccountTransfer",[Y],Object.getOwnPropertyDescriptor(_e.prototype,"onMountAccountTransfer"),_e.prototype),Ue(_e.prototype,"setHasNoAccountsBalance",[$],Object.getOwnPropertyDescriptor(_e.prototype,"setHasNoAccountsBalance"),_e.prototype),Ue(_e.prototype,"setHasNoAccount",[Q],Object.getOwnPropertyDescriptor(_e.prototype,"setHasNoAccount"),_e.prototype),Ue(_e.prototype,"setTransferFee",[Z],Object.getOwnPropertyDescriptor(_e.prototype,"setTransferFee"),_e.prototype),Ue(_e.prototype,"setMinimumFee",[ee],Object.getOwnPropertyDescriptor(_e.prototype,"setMinimumFee"),_e.prototype),Ue(_e.prototype,"setTransferLimit",[te],Object.getOwnPropertyDescriptor(_e.prototype,"setTransferLimit"),_e.prototype),Ue(_e.prototype,"sortAccountsTransfer",[re],Object.getOwnPropertyDescriptor(_e.prototype,"sortAccountsTransfer"),_e.prototype),Ue(_e.prototype,"setSelectedFrom",[oe],Object.getOwnPropertyDescriptor(_e.prototype,"setSelectedFrom"),_e.prototype),Ue(_e.prototype,"setSelectedTo",[ne],Object.getOwnPropertyDescriptor(_e.prototype,"setSelectedTo"),_e.prototype),Ue(_e.prototype,"setAccounts",[ie],Object.getOwnPropertyDescriptor(_e.prototype,"setAccounts"),_e.prototype),Ue(_e.prototype,"setIsTransferConfirm",[ae],Object.getOwnPropertyDescriptor(_e.prototype,"setIsTransferConfirm"),_e.prototype),Ue(_e.prototype,"setAccountTransferAmount",[se],Object.getOwnPropertyDescriptor(_e.prototype,"setAccountTransferAmount"),_e.prototype),Ue(_e.prototype,"setIsTransferSuccessful",[ce],Object.getOwnPropertyDescriptor(_e.prototype,"setIsTransferSuccessful"),_e.prototype),Ue(_e.prototype,"setIsMT5TransferInProgress",[ue],Object.getOwnPropertyDescriptor(_e.prototype,"setIsMT5TransferInProgress"),_e.prototype),Ue(_e.prototype,"setReceiptTransfer",[pe],Object.getOwnPropertyDescriptor(_e.prototype,"setReceiptTransfer"),_e.prototype),Ue(_e.prototype,"onChangeTransferFrom",[le],Object.getOwnPropertyDescriptor(_e.prototype,"onChangeTransferFrom"),_e.prototype),Ue(_e.prototype,"onChangeTransferTo",[fe],Object.getOwnPropertyDescriptor(_e.prototype,"onChangeTransferTo"),_e.prototype),ze=Ue(_e.prototype,"resetAccountTransfer",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Be(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setIsTransferConfirm(!1),e.setTransferLimit();case 2:case"end":return t.stop()}}),t)})))}}),Ue(_e.prototype,"setTransferPercentageSelectorResult",[he],Object.getOwnPropertyDescriptor(_e.prototype,"setTransferPercentageSelectorResult"),_e.prototype),Ue(_e.prototype,"validateTransferFromAmount",[de],Object.getOwnPropertyDescriptor(_e.prototype,"validateTransferFromAmount"),_e.prototype),Ue(_e.prototype,"validateTransferToAmount",[be],Object.getOwnPropertyDescriptor(_e.prototype,"validateTransferToAmount"),_e.prototype),_e);function ft(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function yt(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){ft(i,o,n,a,s,"next",e)}function s(e){ft(i,o,n,a,s,"throw",e)}a(void 0)}))}}function ht(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function dt(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bt(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var _t,mt,vt,gt,wt,Ot=(qe=y.action.bound,Ge=y.action.bound,Xe=y.action.bound,Ke=y.action.bound,Je=y.action.bound,Ye=y.action.bound,$e=y.action.bound,Qe=y.action.bound,Ze=y.action.bound,et=y.action.bound,tt=y.action.bound,rt=y.action.bound,ot=function(){function e(t){var r=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ht(this,"converter_from_amount",nt,this),ht(this,"converter_to_amount",it,this),ht(this,"converter_from_error",at,this),ht(this,"converter_to_error",st,this),ht(this,"is_timer_visible",ct,this),this.root_store=o,this.WS=r}var t,r,o,n,i,a;return t=e,r=[{key:"setConverterFromAmount",value:function(e){this.converter_from_amount=e}},{key:"setConverterToAmount",value:function(e){this.converter_to_amount=e}},{key:"setConverterFromError",value:function(e){this.converter_from_error=e}},{key:"setConverterToError",value:function(e){this.converter_to_error=e}},{key:"setIsTimerVisible",value:function(e){this.is_timer_visible=e}},{key:"resetTimer",value:function(){this.setIsTimerVisible(!1)}},{key:"getExchangeRate",value:(a=yt(regeneratorRuntime.mark((function e(t,r){var o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.send({exchange_rates:1,base_currency:t});case 2:return o=e.sent,n=o.exchange_rates,e.abrupt("return",n.rates[r]);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"validateFromAmount",value:function(){var e=this.root_store.modules.cashier,t=e.account_transfer,r=e.general_store,o=e.withdraw;r.active_container===t.container?t.validateTransferFromAmount():o.validateWithdrawFromAmount()}},{key:"validateToAmount",value:function(){var e=this.root_store.modules.cashier,t=e.account_transfer,r=e.general_store,o=e.withdraw;r.active_container===t.container?t.validateTransferToAmount():o.validateWithdrawToAmount()}},{key:"onChangeConverterFromAmount",value:(i=yt(regeneratorRuntime.mark((function e(t,r,o){var n,i,a,s,c,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,i=this.root_store.modules.cashier,a=i.account_transfer,s=i.general_store,this.resetTimer(),!n.value){e.next=27;break}if(this.setConverterFromAmount(n.value),this.validateFromAmount(),s.percentageSelectorSelectionStatus(!0),s.calculatePercentage(),!this.converter_from_error){e.next=15;break}this.setConverterToAmount(""),this.setConverterToError(""),this.setIsTimerVisible(!1),a.setAccountTransferAmount(""),e.next=25;break;case 15:return e.next=17,this.getExchangeRate(r,o);case 17:c=e.sent,u=(0,h.getDecimalPlaces)(o),+(p=(c*n.value).toFixed(u))||this.converter_from_amount?this.setConverterToAmount(p):this.setConverterToAmount(""),this.validateToAmount(),this.setConverterToError(""),this.setIsTimerVisible(!0),a.setAccountTransferAmount(n.value);case 25:e.next=28;break;case 27:this.resetConverter();case 28:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"onChangeConverterToAmount",value:(n=yt(regeneratorRuntime.mark((function e(t,r,o){var n,i,a,s,c,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,i=this.root_store.modules.cashier,a=i.account_transfer,s=i.general_store,this.resetTimer(),!n.value){e.next=25;break}if(this.setConverterToAmount(n.value),this.validateToAmount(),!this.converter_to_error){e.next=13;break}this.setConverterFromAmount(""),this.setConverterFromError(""),this.setIsTimerVisible(!1),a.setAccountTransferAmount(""),e.next=23;break;case 13:return e.next=15,this.getExchangeRate(r,o);case 15:c=e.sent,u=(0,h.getDecimalPlaces)(o),+(p=(c*n.value).toFixed(u))||this.converter_to_amount?this.setConverterFromAmount(p):this.setConverterFromAmount(""),s.percentageSelectorSelectionStatus(!0),s.calculatePercentage(),this.validateFromAmount(),this.converter_from_error?(this.setIsTimerVisible(!1),a.setAccountTransferAmount("")):(this.setConverterFromError(""),this.setIsTimerVisible(!0),a.setAccountTransferAmount(p));case 23:e.next=26;break;case 25:this.resetConverter();case 26:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"resetConverter",value:function(){this.setConverterFromAmount(""),this.setConverterToAmount(""),this.setConverterFromError(""),this.setConverterToError(""),this.setIsTimerVisible(!1),this.root_store.modules.cashier.general_store.percentageSelectorSelectionStatus(!0)}}],r&&dt(t.prototype,r),o&&dt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),nt=bt(ot.prototype,"converter_from_amount",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),it=bt(ot.prototype,"converter_to_amount",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),at=bt(ot.prototype,"converter_from_error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),st=bt(ot.prototype,"converter_to_error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ct=bt(ot.prototype,"is_timer_visible",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bt(ot.prototype,"setConverterFromAmount",[qe],Object.getOwnPropertyDescriptor(ot.prototype,"setConverterFromAmount"),ot.prototype),bt(ot.prototype,"setConverterToAmount",[Ge],Object.getOwnPropertyDescriptor(ot.prototype,"setConverterToAmount"),ot.prototype),bt(ot.prototype,"setConverterFromError",[Xe],Object.getOwnPropertyDescriptor(ot.prototype,"setConverterFromError"),ot.prototype),bt(ot.prototype,"setConverterToError",[Ke],Object.getOwnPropertyDescriptor(ot.prototype,"setConverterToError"),ot.prototype),bt(ot.prototype,"setIsTimerVisible",[Je],Object.getOwnPropertyDescriptor(ot.prototype,"setIsTimerVisible"),ot.prototype),bt(ot.prototype,"resetTimer",[Ye],Object.getOwnPropertyDescriptor(ot.prototype,"resetTimer"),ot.prototype),bt(ot.prototype,"getExchangeRate",[$e],Object.getOwnPropertyDescriptor(ot.prototype,"getExchangeRate"),ot.prototype),bt(ot.prototype,"validateFromAmount",[Qe],Object.getOwnPropertyDescriptor(ot.prototype,"validateFromAmount"),ot.prototype),bt(ot.prototype,"validateToAmount",[Ze],Object.getOwnPropertyDescriptor(ot.prototype,"validateToAmount"),ot.prototype),bt(ot.prototype,"onChangeConverterFromAmount",[et],Object.getOwnPropertyDescriptor(ot.prototype,"onChangeConverterFromAmount"),ot.prototype),bt(ot.prototype,"onChangeConverterToAmount",[tt],Object.getOwnPropertyDescriptor(ot.prototype,"onChangeConverterToAmount"),ot.prototype),bt(ot.prototype,"resetConverter",[rt],Object.getOwnPropertyDescriptor(ot.prototype,"resetConverter"),ot.prototype),ot);function kt(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function Pt(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Ct(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Tt(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var St,At,Dt,jt,It,xt,zt,Rt,Et,Mt,Lt,Wt,Ft,Vt=(_t=y.action.bound,mt=y.action.bound,vt=function(){function e(t){var r=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pt(this,"container",gt,this),Pt(this,"error",wt,this),this.root_store=o,this.WS=r}var t,r,o,n,i;return t=e,r=[{key:"onMountDeposit",value:(n=regeneratorRuntime.mark((function e(){var t,r,o,n,i,a,s,c,u,p,l,f,y,h,d,b,_,m,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.root_store,r=t.client,o=t.modules,n=o.cashier.general_store,i=n.active_container,a=n.is_crypto,s=n.onMountCommon,c=n.setLoading,u=n.setOnRemount,p=o.cashier.iframe,l=p.checkIframeLoaded,f=p.clearTimeoutCashierUrl,y=p.is_session_timeout,h=p.setContainerHeight,d=p.setIframeUrl,b=p.setSessionTimeout,_=p.setTimeoutCashierUrl,m=r.is_virtual,v=i,u(this.onMountDeposit),e.next=8,s();case 8:if(this.error.setErrorMessage(""),h(0),c(!0),y){e.next=14;break}return l(),e.abrupt("return");case 14:if(d(""),!m){e.next=18;break}return c(!1),e.abrupt("return");case 18:if(a){e.next=36;break}return e.next=21,this.WS.authorized.cashier(i,{verification_code:"undefined"});case 21:if(g=e.sent,v===i){e.next=25;break}return c(!1),e.abrupt("return");case 25:if(!g.error){e.next=31;break}this.error.handleCashierError(g.error),b(!0),f(),e.next=36;break;case 31:return e.next=33,l();case 33:d(g.cashier),b(!1),_();case 36:c(!1);case 37:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){kt(i,r,o,a,s,"next",e)}function s(e){kt(i,r,o,a,s,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"is_deposit_locked",get:function(){var e=this.root_store.client,t=e.is_authentication_needed,r=e.is_tnc_needed,o=e.is_financial_account,n=e.is_financial_information_incomplete,i=e.is_trading_experience_incomplete,a=e.account_status,s=e.is_eu,c=e.mt5_login_list,u=e.is_deposit_lock;if(null==a||!a.status)return!1;var p=this.error.is_ask_authentication||t&&s,l=o&&(n||i),f=(s||c.some((function(e){return"real"===e.account_type&&"financial_stp"===e.sub_account_type})))&&r;return u||p||f||l||this.error.is_ask_financial_risk_approval}},{key:"submitFundsProtection",value:function(){var e=this;this.WS.send({ukgc_funds_protection:1,tnc_approval:1}).then((function(t){t.error?e.error.setMessage(t.error.message):location.reload()}))}}],r&&Ct(t.prototype,r),o&&Ct(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),gt=Tt(vt.prototype,"container",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.containers.deposit}}),wt=Tt(vt.prototype,"error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Re}}),Tt(vt.prototype,"onMountDeposit",[_t],Object.getOwnPropertyDescriptor(vt.prototype,"onMountDeposit"),vt.prototype),Tt(vt.prototype,"is_deposit_locked",[y.computed],Object.getOwnPropertyDescriptor(vt.prototype,"is_deposit_locked"),vt.prototype),Tt(vt.prototype,"submitFundsProtection",[mt],Object.getOwnPropertyDescriptor(vt.prototype,"submitFundsProtection"),vt.prototype),vt);function Bt(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Nt(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ht(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Ut=(St=y.action.bound,At=y.action.bound,Dt=y.action.bound,jt=y.action.bound,It=y.action.bound,xt=y.action.bound,zt=y.action.bound,Rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Bt(this,"confirm_button_text",Et,this),Bt(this,"error_message",Mt,this),Bt(this,"has_no_close_icon",Lt,this),Bt(this,"should_show",Wt,this),Bt(this,"should_not_show_title",Ft,this)}var t,r,o;return t=e,(r=[{key:"setShouldShow",value:function(e){this.should_show=e}},{key:"setErrorMessage",value:function(e){this.error_message=e,this.setShouldShow(!0)}},{key:"setConfirmButtonText",value:function(e){this.confirm_button_text=e}},{key:"setShouldNotShowTitle",value:function(e){this.should_not_show_title=e}},{key:"setHasNoCloseIcon",value:function(e){this.has_no_close_icon=e}},{key:"openReadMoreDialog",value:function(e,t){this.setErrorMessage(e),this.setConfirmButtonText(t),this.setHasNoCloseIcon(!0),this.setShouldNotShowTitle(!0)}},{key:"reset",value:function(){this.setConfirmButtonText(""),this.setShouldNotShowTitle(!1),this.setHasNoCloseIcon(!1)}}])&&Nt(t.prototype,r),o&&Nt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Et=Ht(Rt.prototype,"confirm_button_text",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Mt=Ht(Rt.prototype,"error_message",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Lt=Ht(Rt.prototype,"has_no_close_icon",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wt=Ht(Rt.prototype,"should_show",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ft=Ht(Rt.prototype,"should_not_show_title",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ht(Rt.prototype,"setShouldShow",[St],Object.getOwnPropertyDescriptor(Rt.prototype,"setShouldShow"),Rt.prototype),Ht(Rt.prototype,"setErrorMessage",[At],Object.getOwnPropertyDescriptor(Rt.prototype,"setErrorMessage"),Rt.prototype),Ht(Rt.prototype,"setConfirmButtonText",[Dt],Object.getOwnPropertyDescriptor(Rt.prototype,"setConfirmButtonText"),Rt.prototype),Ht(Rt.prototype,"setShouldNotShowTitle",[jt],Object.getOwnPropertyDescriptor(Rt.prototype,"setShouldNotShowTitle"),Rt.prototype),Ht(Rt.prototype,"setHasNoCloseIcon",[It],Object.getOwnPropertyDescriptor(Rt.prototype,"setHasNoCloseIcon"),Rt.prototype),Ht(Rt.prototype,"openReadMoreDialog",[xt],Object.getOwnPropertyDescriptor(Rt.prototype,"openReadMoreDialog"),Rt.prototype),Ht(Rt.prototype,"reset",[zt],Object.getOwnPropertyDescriptor(Rt.prototype,"reset"),Rt.prototype),Rt),qt=l("../../../node_modules/prop-types/index.js"),Gt=l.n(qt),Xt=l("@deriv/components"),Kt=function(e){var t=e.p2p_notification_count;return O().createElement(O().Fragment,null,O().createElement(Xt.Icon,{icon:"IcCashier",className:"header__icon"}),!!t&&O().createElement(Xt.Counter,{className:"cashier__counter",count:t}))};Kt.propTypes={p2p_notification_count:Gt().number};const Jt=Kt;var Yt=function(e,t){var r=t;return t&&!Array.isArray(t)&&(r=[t]),e.replace(/\[_(\d+)]/g,(function(e,t){return r[+t-1]}))};function $t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Qt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}return function(e,t,r){t&&$t(e.prototype,t),r&&$t(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"add",value:function(e,t){this.has(e)||(this.errors[e]=[]),-1===this.errors[e].indexOf(t)&&this.errors[e].push(t)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(e){return this.has(e)?this.errors[e][0]:null}},{key:"get",value:function(e){return this.has(e)?this.errors[e]:[]}},{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.errors,e)}}]),e}();const Zt=Qt;function er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tr(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var rr=function(){function e(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;er(this,e),this.input=t,this.rules=r,this.store=o,this.errors=new Zt,this.error_count=0}return function(e,t,r){t&&tr(e.prototype,t),r&&tr(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"addFailure",value:function(e,t,r){var o=r||t.options.message||(0,h.getPreBuildDVRs)()[t.name].message();"length"===t.name?o=Yt(o,[t.options.min===t.options.max?t.options.min:"".concat(t.options.min,"-").concat(t.options.max)]):"min"===t.name?o=Yt(o,[t.options.min]):"not_equal"===t.name&&(o=Yt(o,[t.options.name1,t.options.name2])),this.errors.add(e,o),this.error_count++}},{key:"check",value:function(){var t=this;return Object.keys(this.input).forEach((function(r){Object.prototype.hasOwnProperty.call(t.rules,r)&&t.rules[r].forEach((function(o){var n=e.getRuleObject(o);if((n.validator||"function"==typeof n.validator)&&(!n.options.condition||n.options.condition(t.store))&&(""!==t.input[r]||"req"===n.name)){var i,a;if("number"===n.name){var s=n.validator(t.input[r],n.options,t.store,t.input);i=s.is_ok,a=s.message}else i=n.validator(t.input[r],n.options,t.store,t.input);i||t.addFailure(r,n,a)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}],[{key:"getRuleObject",value:function(e){var t="string"==typeof e,r={name:t?e:e[0],options:t?{}:e[1]||{}};return r.validator="custom"===r.name?e[1].func:(0,h.getPreBuildDVRs)()[r.name].func,r}}]),e}();const or=rr;var nr,ir,ar,sr,cr,ur,pr,lr,fr,yr,hr,dr,br,_r,mr,vr,gr,wr,Or,kr,Pr,Cr;function Tr(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function Sr(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){Tr(i,o,n,a,s,"next",e)}function s(e){Tr(i,o,n,a,s,"throw",e)}a(void 0)}))}}function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ir(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zr(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Rr(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Er,Mr,Lr,Wr,Fr,Vr,Br,Nr,Hr,Ur,qr,Gr,Xr,Kr,Jr,Yr,$r,Qr,Zr,eo,to,ro,oo,no,io,ao,so,co,uo,po,lo,fo,yo,ho,bo,_o,mo,vo,go,wo,Oo,ko=(nr=y.action.bound,ir=y.action.bound,ar=y.action.bound,sr=y.action.bound,cr=y.action.bound,ur=y.action.bound,pr=y.action.bound,lr=y.action.bound,fr=y.action.bound,yr=y.action.bound,hr=y.action.bound,dr=y.action.bound,br=y.action.bound,_r=y.action.bound,mr=y.action.bound,vr=y.action.bound,Cr=Pr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xr(this,e),Ir(this,"validation_errors",wr,this),Ir(this,"validation_rules",Or,this),this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,Ir(this,"partial_fetch_time",kr,this);var r=t.root_store,o=t.local_storage_properties,n=t.session_storage_properties,i=t.validation_rules,a=t.store_name;if(Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0}),o&&o.length||n&&n.length){if(!a)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:a,enumerable:!1,writable:!1})}this.root_store=r,this.local_storage_properties=o||[],this.session_storage_properties=n||[],this.setValidationRules(i),this.setupReactionForLocalStorage(),this.setupReactionForSessionStorage(),this.retrieveFromStorage()}return function(e,t,r){t&&zr(e.prototype,t),r&&zr(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"getSnapshot",value:function(e){var t=(0,y.toJS)(this);return(0,h.isEmptyObject)(this.root_store)||(t.root_store=this.root_store),e&&e.length&&(t=e.reduce((function(e,r){return Object.assign(e,jr({},r,t[r]))}),{})),t}},{key:"setupReactionForLocalStorage",value:function(){var t=this;this.local_storage_properties.length&&(0,y.reaction)((function(){return t.local_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.local_storage_properties,e.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var t=this;this.session_storage_properties.length&&(0,y.reaction)((function(){return t.session_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.session_storage_properties,e.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(t,r){var o=JSON.stringify(this.getSnapshot(t),(function(e,t){if(null!==t)return t}));r===e.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,o):r===e.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,o)}},{key:"retrieveFromStorage",value:function(){var e=this,t=JSON.parse(localStorage.getItem(this.store_name,{})),r=JSON.parse(sessionStorage.getItem(this.store_name,{})),o=Dr(Dr({},t),r);Object.keys(o).forEach((function(t){return e[t]=o[t]}))}},{key:"setValidationErrorMessages",value:function(e,t){var r=this;this.validation_errors[e]&&!r.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!r.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"setValidationRules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(r){e.addRule(r,t[r])}))}},{key:"addRule",value:function(e,t){var r=this;this.validation_rules[e]=t,(0,y.intercept)(this,e,(function(t){return r.validateProperty(e,t.newValue),t}))}},{key:"validateProperty",value:function(e,t){var r=this,o=this.validation_rules[e].trigger,n=jr({},e,void 0!==t?t:this[e]),i=jr({},e,this.validation_rules[e].rules||[]);o&&Object.hasOwnProperty.call(this,o)&&(n[o]=this[o],i[o]=this.validation_rules[o].rules||[]);var a=new or(n,i,this);a.isPassed(),Object.keys(n).forEach((function(e){r.setValidationErrorMessages(e,a.errors.get(e))}))}},{key:"validateAllProperties",value:function(){var e=this,t=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);t.forEach((function(t){e.validateProperty(t,e[t])})),r.forEach((function(r){t.includes(r)||delete e.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(e){var t=this;e&&(this.switch_account_listener=e,this.switchAccountDisposer=(0,y.when)((function(){return t.root_store.client.switch_broadcast}),(function(){try{var e=t.switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Switching account listeners are required to return a promise.");e.then((function(){t.root_store.client.switchEndSignal(),t.onSwitchAccount(t.switch_account_listener)}))}catch(e){(0,h.isProduction)()||console.error(e)}})))}},{key:"onPreSwitchAccount",value:function(e){var t=this;e&&(this.pre_switch_account_listener=e,this.preSwitchAccountDisposer=(0,y.when)((function(){return t.root_store.client.pre_switch_broadcast}),(function(){try{var e=t.pre_switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Pre-switch account listeners are required to return a promise.");e.then((function(){t.root_store.client.setPreSwitchAccount(!1),t.onPreSwitchAccount(t.pre_switch_account_listener)}))}catch(e){(0,h.isProduction)()||console.error(e)}})))}},{key:"onLogout",value:function(e){var t=this;this.logoutDisposer=(0,y.when)((function(){return t.root_store.client.has_logged_out}),Sr(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.logout_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setLogout(!1),t.onLogout(t.logout_listener)})),e.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,h.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.logout_listener=e}},{key:"onClientInit",value:function(e){var t=this;this.clientInitDisposer=(0,y.when)((function(){return t.root_store.client.initialized_broadcast}),Sr(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.client_init_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setInitialized(!1),t.onClientInit(t.client_init_listener)})),e.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,h.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.client_init_listener=e}},{key:"onNetworkStatusChange",value:function(e){var t=this;this.networkStatusChangeDisposer=(0,y.reaction)((function(){return t.root_store.common.is_network_online}),(function(e){try{t.network_status_change_listener(e)}catch(e){(0,h.isProduction)()||console.error(e)}})),this.network_status_change_listener=e}},{key:"onThemeChange",value:function(e){var t=this;this.themeChangeDisposer=(0,y.reaction)((function(){return t.root_store.ui.is_dark_mode_on}),(function(e){try{t.theme_change_listener(e)}catch(e){(0,h.isProduction)()||console.error(e)}})),this.theme_change_listener=e}},{key:"onRealAccountSignupEnd",value:function(e){var t=this;this.realAccountSignupEndedDisposer=(0,y.when)((function(){return t.root_store.ui.has_real_account_signup_ended}),(function(){try{var e=t.real_account_signup_ended_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Real account signup listeners are required to return a promise.");e.then((function(){t.root_store.ui.setRealAccountSignupEnd(!1),t.onRealAccountSignupEnd(t.real_account_signup_ended_listener)}))}catch(e){(0,h.isProduction)()||console.error(e)}})),this.real_account_signup_ended_listener=e}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(e){if(this.root_store.client.loginid!==e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];r.forEach((function(e){return e()})),this.partial_fetch_time=!1}}}]),e}(),Pr.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")}),wr=Rr((gr=Cr).prototype,"validation_errors",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Or=Rr(gr.prototype,"validation_rules",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),kr=Rr(gr.prototype,"partial_fetch_time",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Rr(gr.prototype,"retrieveFromStorage",[y.action],Object.getOwnPropertyDescriptor(gr.prototype,"retrieveFromStorage"),gr.prototype),Rr(gr.prototype,"setValidationErrorMessages",[y.action],Object.getOwnPropertyDescriptor(gr.prototype,"setValidationErrorMessages"),gr.prototype),Rr(gr.prototype,"setValidationRules",[y.action],Object.getOwnPropertyDescriptor(gr.prototype,"setValidationRules"),gr.prototype),Rr(gr.prototype,"addRule",[y.action],Object.getOwnPropertyDescriptor(gr.prototype,"addRule"),gr.prototype),Rr(gr.prototype,"validateProperty",[y.action],Object.getOwnPropertyDescriptor(gr.prototype,"validateProperty"),gr.prototype),Rr(gr.prototype,"validateAllProperties",[y.action],Object.getOwnPropertyDescriptor(gr.prototype,"validateAllProperties"),gr.prototype),Rr(gr.prototype,"onSwitchAccount",[nr],Object.getOwnPropertyDescriptor(gr.prototype,"onSwitchAccount"),gr.prototype),Rr(gr.prototype,"onPreSwitchAccount",[ir],Object.getOwnPropertyDescriptor(gr.prototype,"onPreSwitchAccount"),gr.prototype),Rr(gr.prototype,"onLogout",[ar],Object.getOwnPropertyDescriptor(gr.prototype,"onLogout"),gr.prototype),Rr(gr.prototype,"onClientInit",[sr],Object.getOwnPropertyDescriptor(gr.prototype,"onClientInit"),gr.prototype),Rr(gr.prototype,"onNetworkStatusChange",[cr],Object.getOwnPropertyDescriptor(gr.prototype,"onNetworkStatusChange"),gr.prototype),Rr(gr.prototype,"onThemeChange",[ur],Object.getOwnPropertyDescriptor(gr.prototype,"onThemeChange"),gr.prototype),Rr(gr.prototype,"onRealAccountSignupEnd",[pr],Object.getOwnPropertyDescriptor(gr.prototype,"onRealAccountSignupEnd"),gr.prototype),Rr(gr.prototype,"disposePreSwitchAccount",[lr],Object.getOwnPropertyDescriptor(gr.prototype,"disposePreSwitchAccount"),gr.prototype),Rr(gr.prototype,"disposeSwitchAccount",[fr],Object.getOwnPropertyDescriptor(gr.prototype,"disposeSwitchAccount"),gr.prototype),Rr(gr.prototype,"disposeLogout",[yr],Object.getOwnPropertyDescriptor(gr.prototype,"disposeLogout"),gr.prototype),Rr(gr.prototype,"disposeClientInit",[hr],Object.getOwnPropertyDescriptor(gr.prototype,"disposeClientInit"),gr.prototype),Rr(gr.prototype,"disposeNetworkStatusChange",[dr],Object.getOwnPropertyDescriptor(gr.prototype,"disposeNetworkStatusChange"),gr.prototype),Rr(gr.prototype,"disposeThemeChange",[br],Object.getOwnPropertyDescriptor(gr.prototype,"disposeThemeChange"),gr.prototype),Rr(gr.prototype,"disposeRealAccountSignupEnd",[_r],Object.getOwnPropertyDescriptor(gr.prototype,"disposeRealAccountSignupEnd"),gr.prototype),Rr(gr.prototype,"onUnmount",[mr],Object.getOwnPropertyDescriptor(gr.prototype,"onUnmount"),gr.prototype),Rr(gr.prototype,"assertHasValidCache",[vr],Object.getOwnPropertyDescriptor(gr.prototype,"assertHasValidCache"),gr.prototype),gr);function Po(e){return Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Po(e)}function Co(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function To(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){Co(i,o,n,a,s,"next",e)}function s(e){Co(i,o,n,a,s,"throw",e)}a(void 0)}))}}function So(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Ao(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Do(e,t){return Do=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Do(e,t)}function jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=zo(e);if(t){var n=zo(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Io(this,r)}}function Io(e,t){if(t&&("object"===Po(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xo(e)}function xo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zo(e){return zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zo(e)}function Ro(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Eo,Mo,Lo,Wo,Fo,Vo,Bo,No,Ho,Uo,qo,Go,Xo=(Er=y.action.bound,Mr=y.action.bound,Lr=y.action.bound,Wr=y.action.bound,Fr=y.action.bound,Vr=y.action.bound,Br=y.action.bound,Nr=y.action.bound,Hr=y.action.bound,Ur=y.action.bound,qr=y.action.bound,Gr=y.action.bound,Xr=y.action.bound,Kr=y.action.bound,Jr=y.action.bound,Yr=y.action.bound,$r=y.action.bound,Qr=y.action.bound,Zr=y.action.bound,eo=y.action.bound,to=y.action.bound,ro=y.action.bound,oo=y.action.bound,no=y.action.bound,io=y.action.bound,ao=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Do(e,t)}(i,e);var t,r,o,n=jo(i);function i(e){var t,r=e.root_store,o=e.WS;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),So(t=n.call(this,{root_store:r}),"is_loading",so,xo(t)),So(t,"is_p2p_visible",co,xo(t)),So(t,"p2p_notification_count",uo,xo(t)),So(t,"cashier_route_tab_index",po,xo(t)),So(t,"is_deposit",lo,xo(t)),So(t,"should_show_all_available_currencies",fo,xo(t)),So(t,"is_cashier_default",yo,xo(t)),So(t,"deposit_target",ho,xo(t)),So(t,"should_set_currency_modal_title_change",bo,xo(t)),So(t,"p2p_advertiser_error",_o,xo(t)),So(t,"has_set_currency",mo,xo(t)),So(t,"should_percentage_reset",vo,xo(t)),So(t,"percentage",go,xo(t)),So(t,"show_p2p_in_cashier_default",wo,xo(t)),So(t,"onRemount",Oo,xo(t)),t.active_container=P.containers.deposit,t.is_populating_values=!1,t.WS=o,t.root_store=r,(0,y.when)((function(){return t.root_store.client.is_logged_in}),(function(){t.setHasSetCurrency(),t.attachCashierToMenu()})),t.has_set_currency||t.changeSetCurrencyModalTitle(),(0,y.reaction)((function(){return[t.root_store.client.switched,t.root_store.client.is_logged_in,t.root_store.client.currency]}),(function(){t.init()})),t}return function(e,t,r){t&&Ao(e.prototype,t),r&&Ao(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(i,[{key:"setOnRemount",value:function(e){this.onRemount=e}},{key:"is_crypto",get:function(){var e=this.root_store.client.currency;return!!e&&(0,h.isCryptocurrency)(e)}},{key:"is_p2p_enabled",get:function(){return this.is_p2p_visible&&!this.root_store.client.is_eu}},{key:"showP2pInCashierDefault",value:function(){var e=this.root_store.client,t=e.account_list,r=e.is_virtual,o="RestrictedCountry"===this.p2p_advertiser_error,n=t.some((function(e){return"USD"===e.title})),i=t.some((function(e){return!(0,h.isCryptocurrency)(e.title)&&"Real"!==e.title}));this.show_p2p_in_cashier_default=!(o||r||i&&!n)}},{key:"attachCashierToMenu",value:function(){var e=this.root_store,t=e.menu,r=e.ui;this.has_set_currency||this.setHasSetCurrency(),t.attach({id:"dt_cashier_tab",icon:O().createElement(Jt,{p2p_notification_count:this.p2p_notification_count}),text:function(){return(0,k.localize)("Cashier")},link_to:this.has_set_currency&&h.routes.cashier,onClick:!this.has_set_currency&&r.toggleSetCurrencyModal,login_only:!0})}},{key:"replaceCashierMenuOnclick",value:function(){var e=this.root_store,t=e.menu,r=e.ui;this.setHasSetCurrency(),t.update({id:"dt_cashier_tab",icon:O().createElement(Jt,{p2p_notification_count:this.p2p_notification_count}),text:function(){return(0,k.localize)("Cashier")},link_to:this.has_set_currency&&h.routes.cashier,onClick:!this.has_set_currency&&r.toggleSetCurrencyModal,login_only:!0},1)}},{key:"setHasSetCurrency",value:function(){var e=this.root_store.client,t=e.account_list,r=e.has_active_real_account;this.has_set_currency=t.filter((function(e){return!e.is_virtual})).some((function(e){return"Real"!==e.title}))||!r}},{key:"changeSetCurrencyModalTitle",value:function(){this.should_set_currency_modal_title_change=!0}},{key:"onMountCashierDefault",value:(o=To(regeneratorRuntime.mark((function e(){var t,r,o,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.root_store.modules.cashier,n=o.account_prompt_dialog,i=o.payment_agent,this.has_set_currency||this.setHasSetCurrency(),this.setIsCashierDefault(!0),n.resetIsConfirmed(),this.setLoading(!0),null!==(t=i.all_payment_agent_list)&&void 0!==t&&null!==(r=t.paymentagent_list)&&void 0!==r&&r.list){e.next=10;break}return e.next=8,i.getAllPaymentAgentList();case 8:a=e.sent,i.setAllPaymentAgentList(a);case 10:this.setLoading(!1);case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"calculatePercentage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount,t=this.root_store,r=t.client,o=t.modules.cashier.account_transfer;this.active_container===o.container?this.percentage=+(e/+o.selected_from.balance*100).toFixed(0):this.percentage=+(e/+r.balance*100).toFixed(0),isFinite(this.percentage)||(this.percentage=0)}},{key:"percentageSelectorSelectionStatus",value:function(e){this.should_percentage_reset=e,e&&(this.percentage=0)}},{key:"setIsDeposit",value:function(e){this.is_deposit=e}},{key:"setShouldShowAllAvailableCurrencies",value:function(e){this.should_show_all_available_currencies=e}},{key:"setIsCashierDefault",value:function(e){this.is_cashier_default=e}},{key:"setDepositTarget",value:function(e){this.deposit_target=e}},{key:"continueRoute",value:function(){this.root_store.common.routeTo(this.deposit_target)}},{key:"setAccountSwitchListener",value:function(){this.disposeSwitchAccount(),this.onSwitchAccount(this.accountSwitcherListener)}},{key:"init",value:function(){var e=this;if(this.root_store.modules.cashier){var t=this.root_store,r=t.client,o=t.modules.cashier,n=o.account_prompt_dialog,i=o.withdraw,a=r.currency,s=r.is_logged_in,c=r.switched;(0,y.when)((function(){return s}),To(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAdvertizerError();case 2:return e.checkP2pStatus(),t.next=5,i.check10kLimit();case 5:case"end":return t.stop()}}),t)})))),(0,y.reaction)((function(){return[c,s,a]}),To(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.WS.wait("get_settings");case 2:if(!s){t.next=10;break}return t.next=5,e.getAdvertizerError();case 5:if(n.resetLastLocation(),c){t.next=10;break}return e.checkP2pStatus(),t.next=10,e.check10kLimit();case 10:case"end":return t.stop()}}),t)})))),(0,y.reaction)((function(){return a}),(function(){i.setIsWithdrawConfirmed(!1)}))}}},{key:"getAdvertizerError",value:(r=To(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.authorized.p2pAdvertiserInfo();case 2:t=e.sent,this.setP2pAdvertiserError((0,h.getPropertyValue)(t,["error","code"]));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setP2pAdvertiserError",value:function(e){this.p2p_advertiser_error=e}},{key:"checkP2pStatus",value:function(){var e=this.p2p_advertiser_error,t="RestrictedCountry"===e||"RestrictedCurrency"===e;this.setIsP2pVisible(!(t||this.root_store.client.is_virtual))}},{key:"onMountCommon",value:(t=To(regeneratorRuntime.mark((function e(t){var r,o,n,i,a,s,c,u,p,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store,o=r.client,n=r.common,i=r.modules,a=i.cashier,s=a.account_transfer,c=a.onramp,u=a.payment_agent,p=a.payment_agent_transfer,l=a.transaction_history,!o.is_logged_in){e.next=12;break}if(!this.is_populating_values){e.next=5;break}return e.abrupt("return");case 5:this.is_populating_values=!0,t&&this.setOnRemount(this.onMountCommon),u.setPaymentAgentList().then(u.filterPaymentAgentList),p.is_payment_agent||p.checkIsPaymentAgent(),s.accounts_list.length||s.sortAccountsTransfer(),!c.is_onramp_tab_visible&&window.location.pathname.endsWith(h.routes.cashier_onramp)&&n.routeTo(h.routes.cashier_deposit),!l.is_crypto_transactions_visible&&window.location.pathname.endsWith(h.routes.cashier_crypto_transactions)&&(n.routeTo(h.routes.cashier_deposit),l.setIsCryptoTransactionsVisible(!0),l.onMount());case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setCashierTabIndex",value:function(e){this.cashier_route_tab_index=e}},{key:"setNotificationCount",value:function(e){this.p2p_notification_count=e}},{key:"setIsP2pVisible",value:function(e){var t;this.is_p2p_visible=e,!e&&window.location.pathname.endsWith(h.routes.cashier_p2p)&&this.root_store.common.routeTo(null!==(t=this.root_store.modules.cashier.account_prompt_dialog.last_location)&&void 0!==t?t:h.routes.cashier_deposit)}},{key:"is_cashier_locked",get:function(){var e=this.root_store.client.account_status;return!(null==e||!e.status)&&e.status.some((function(e){return"cashier_locked"===e}))}},{key:"is_system_maintenance",get:function(){var e=this.root_store.client.account_status;return!(null==e||!e.cashier_validation)&&e.cashier_validation.some((function(e){return"system_maintenance"===e}))}},{key:"setLoading",value:function(e){this.is_loading=e}},{key:"setActiveTab",value:function(e){this.active_container=e}},{key:"accountSwitcherListener",value:function(){var e=this.root_store.modules.cashier,t=e.iframe,r=e.payment_agent;return e.withdraw.verification.clearVerification(),r.verification.clearVerification(),t.clearIframe(),this.payment_agent=r,this.is_populating_values=!1,this.onRemount(),Promise.resolve()}}]),i}(ko),so=Ro(ao.prototype,"is_loading",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),co=Ro(ao.prototype,"is_p2p_visible",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),uo=Ro(ao.prototype,"p2p_notification_count",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),po=Ro(ao.prototype,"cashier_route_tab_index",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lo=Ro(ao.prototype,"is_deposit",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fo=Ro(ao.prototype,"should_show_all_available_currencies",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yo=Ro(ao.prototype,"is_cashier_default",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ho=Ro(ao.prototype,"deposit_target",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),bo=Ro(ao.prototype,"should_set_currency_modal_title_change",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_o=Ro(ao.prototype,"p2p_advertiser_error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),mo=Ro(ao.prototype,"has_set_currency",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vo=Ro(ao.prototype,"should_percentage_reset",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),go=Ro(ao.prototype,"percentage",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wo=Ro(ao.prototype,"show_p2p_in_cashier_default",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oo=Ro(ao.prototype,"onRemount",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){}}}),Ro(ao.prototype,"setOnRemount",[Er],Object.getOwnPropertyDescriptor(ao.prototype,"setOnRemount"),ao.prototype),Ro(ao.prototype,"is_crypto",[y.computed],Object.getOwnPropertyDescriptor(ao.prototype,"is_crypto"),ao.prototype),Ro(ao.prototype,"is_p2p_enabled",[y.computed],Object.getOwnPropertyDescriptor(ao.prototype,"is_p2p_enabled"),ao.prototype),Ro(ao.prototype,"showP2pInCashierDefault",[Mr],Object.getOwnPropertyDescriptor(ao.prototype,"showP2pInCashierDefault"),ao.prototype),Ro(ao.prototype,"attachCashierToMenu",[Lr],Object.getOwnPropertyDescriptor(ao.prototype,"attachCashierToMenu"),ao.prototype),Ro(ao.prototype,"replaceCashierMenuOnclick",[Wr],Object.getOwnPropertyDescriptor(ao.prototype,"replaceCashierMenuOnclick"),ao.prototype),Ro(ao.prototype,"setHasSetCurrency",[Fr],Object.getOwnPropertyDescriptor(ao.prototype,"setHasSetCurrency"),ao.prototype),Ro(ao.prototype,"changeSetCurrencyModalTitle",[Vr],Object.getOwnPropertyDescriptor(ao.prototype,"changeSetCurrencyModalTitle"),ao.prototype),Ro(ao.prototype,"onMountCashierDefault",[Br],Object.getOwnPropertyDescriptor(ao.prototype,"onMountCashierDefault"),ao.prototype),Ro(ao.prototype,"calculatePercentage",[Nr],Object.getOwnPropertyDescriptor(ao.prototype,"calculatePercentage"),ao.prototype),Ro(ao.prototype,"percentageSelectorSelectionStatus",[Hr],Object.getOwnPropertyDescriptor(ao.prototype,"percentageSelectorSelectionStatus"),ao.prototype),Ro(ao.prototype,"setIsDeposit",[Ur],Object.getOwnPropertyDescriptor(ao.prototype,"setIsDeposit"),ao.prototype),Ro(ao.prototype,"setShouldShowAllAvailableCurrencies",[qr],Object.getOwnPropertyDescriptor(ao.prototype,"setShouldShowAllAvailableCurrencies"),ao.prototype),Ro(ao.prototype,"setIsCashierDefault",[Gr],Object.getOwnPropertyDescriptor(ao.prototype,"setIsCashierDefault"),ao.prototype),Ro(ao.prototype,"setDepositTarget",[Xr],Object.getOwnPropertyDescriptor(ao.prototype,"setDepositTarget"),ao.prototype),Ro(ao.prototype,"continueRoute",[Kr],Object.getOwnPropertyDescriptor(ao.prototype,"continueRoute"),ao.prototype),Ro(ao.prototype,"setAccountSwitchListener",[Jr],Object.getOwnPropertyDescriptor(ao.prototype,"setAccountSwitchListener"),ao.prototype),Ro(ao.prototype,"init",[Yr],Object.getOwnPropertyDescriptor(ao.prototype,"init"),ao.prototype),Ro(ao.prototype,"getAdvertizerError",[$r],Object.getOwnPropertyDescriptor(ao.prototype,"getAdvertizerError"),ao.prototype),Ro(ao.prototype,"setP2pAdvertiserError",[Qr],Object.getOwnPropertyDescriptor(ao.prototype,"setP2pAdvertiserError"),ao.prototype),Ro(ao.prototype,"checkP2pStatus",[Zr],Object.getOwnPropertyDescriptor(ao.prototype,"checkP2pStatus"),ao.prototype),Ro(ao.prototype,"onMountCommon",[eo],Object.getOwnPropertyDescriptor(ao.prototype,"onMountCommon"),ao.prototype),Ro(ao.prototype,"setCashierTabIndex",[to],Object.getOwnPropertyDescriptor(ao.prototype,"setCashierTabIndex"),ao.prototype),Ro(ao.prototype,"setNotificationCount",[ro],Object.getOwnPropertyDescriptor(ao.prototype,"setNotificationCount"),ao.prototype),Ro(ao.prototype,"setIsP2pVisible",[oo],Object.getOwnPropertyDescriptor(ao.prototype,"setIsP2pVisible"),ao.prototype),Ro(ao.prototype,"is_cashier_locked",[y.computed],Object.getOwnPropertyDescriptor(ao.prototype,"is_cashier_locked"),ao.prototype),Ro(ao.prototype,"is_system_maintenance",[y.computed],Object.getOwnPropertyDescriptor(ao.prototype,"is_system_maintenance"),ao.prototype),Ro(ao.prototype,"setLoading",[no],Object.getOwnPropertyDescriptor(ao.prototype,"setLoading"),ao.prototype),Ro(ao.prototype,"setActiveTab",[io],Object.getOwnPropertyDescriptor(ao.prototype,"setActiveTab"),ao.prototype),ao);function Ko(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function Jo(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Yo(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $o(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Qo=(Eo=y.action.bound,Mo=y.action.bound,Lo=y.action.bound,Wo=y.action.bound,Fo=y.action.bound,Vo=y.action.bound,Bo=y.action.bound,No=function(){function e(t){var r=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Jo(this,"iframe_height",Ho,this),Jo(this,"iframe_url",Uo,this),Jo(this,"is_session_timeout",qo,this),this.onIframeLoaded="",Jo(this,"timeout_session",Go,this),this.root_store=o,this.WS=r}var t,r;return function(e,t,r){t&&Yo(e.prototype,t),r&&Yo(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"setSessionTimeout",value:function(e){this.is_session_timeout=e,e&&this.removeOnIframeLoaded()}},{key:"checkIframeLoaded",value:(t=regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.root_store,r=t.modules,o=t.ui,this.removeOnIframeLoaded(),this.onIframeLoaded=function(e){/cashier|doughflow/.test(e.origin)&&(r.cashier.general_store.setLoading(!1),o.is_mobile?this.setContainerHeight(window.innerHeight-100):this.setContainerHeight(window.innerHeight-190))}.bind(this),window.addEventListener("message",this.onIframeLoaded,!1);case 4:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,r=arguments;return new Promise((function(o,n){var i=t.apply(e,r);function a(e){Ko(i,o,n,a,s,"next",e)}function s(e){Ko(i,o,n,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})},{key:"removeOnIframeLoaded",value:function(){this.onIframeLoaded&&(window.removeEventListener("message",this.onIframeLoaded,!1),this.onIframeLoaded="")}},{key:"clearTimeoutCashierUrl",value:function(){this.timeout_session&&clearTimeout(this.timeout_session)}},{key:"setTimeoutCashierUrl",value:function(){var e=this;this.clearTimeoutCashierUrl(),this.timeout_session=setTimeout((function(){e.setSessionTimeout(!0)}),6e4)}},{key:"setIframeUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root_store.modules.cashier.general_store.active_container,r=this.root_store,o=r.client,n=r.ui;e?(this.iframe_url="".concat(e,"&theme=").concat(n.is_dark_mode_on?"dark":"light"),o.setVerificationCode("",P.map_action[t])):this.iframe_url=e}},{key:"setContainerHeight",value:function(e){this.iframe_height=e}},{key:"clearIframe",value:function(){this.setIframeUrl(""),this.clearTimeoutCashierUrl(),this.setSessionTimeout(!0)}}]),e}(),Ho=$o(No.prototype,"iframe_height",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Uo=$o(No.prototype,"iframe_url",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),qo=$o(No.prototype,"is_session_timeout",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Go=$o(No.prototype,"timeout_session",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$o(No.prototype,"setSessionTimeout",[Eo],Object.getOwnPropertyDescriptor(No.prototype,"setSessionTimeout"),No.prototype),$o(No.prototype,"checkIframeLoaded",[Mo],Object.getOwnPropertyDescriptor(No.prototype,"checkIframeLoaded"),No.prototype),$o(No.prototype,"clearTimeoutCashierUrl",[Lo],Object.getOwnPropertyDescriptor(No.prototype,"clearTimeoutCashierUrl"),No.prototype),$o(No.prototype,"setTimeoutCashierUrl",[Wo],Object.getOwnPropertyDescriptor(No.prototype,"setTimeoutCashierUrl"),No.prototype),$o(No.prototype,"setIframeUrl",[Fo],Object.getOwnPropertyDescriptor(No.prototype,"setIframeUrl"),No.prototype),$o(No.prototype,"setContainerHeight",[Vo],Object.getOwnPropertyDescriptor(No.prototype,"setContainerHeight"),No.prototype),$o(No.prototype,"clearIframe",[Bo],Object.getOwnPropertyDescriptor(No.prototype,"clearIframe"),No.prototype),No);const Zo=function(e){return{icon:{dark:"IcCashierBanxaDark",light:"IcCashierBanxaLight"},name:"Banxa",getDescription:function(){return(0,k.localize)("A fast and secure fiat-to-crypto payment service. Deposit cryptocurrencies from anywhere in the world using your credit/debit cards and bank transfers.")},getAllowedResidencies:function(){return["*"]},getPaymentIcons:function(){return[{dark:"IcCashierVisaDark",light:"IcCashierVisaLight"},{dark:"IcCashierMastercardDark",light:"IcCashierMastercardLight"},{dark:"IcCashierBpayDark",light:"IcCashierBpayLight"},{dark:"IcCashierSepaDark",light:"IcCashierSepaLight"},{dark:"IcCashierBlueshyftDark",light:"IcCashierBlueshyftLight"},{dark:"IcCashierFlexepinDark",light:"IcCashierFlexepinLight"},{dark:"IcCashierPayIdDark",light:"IcCashierPayIdLight"},{dark:"IcCashierPoliDark",light:"IcCashierPoliLight"},{dark:"IcCashierApplePay",light:"IcCashierApplePay"},{dark:"IcCashierInteracEtransfer",light:"IcCashierInteracEtransfer"},{dark:"IcCashierIdeal",light:"IcCashierIdeal"},{dark:"IcCashierPostBillPayDark",light:"IcCashierPostBillPayLight"},{dark:"IcCashierSofort",light:"IcCashierSofort"}]},getScriptDependencies:function(){return[]},getDefaultFromCurrency:function(){return""},getFromCurrencies:function(){return["*"]},getToCurrencies:function(){return["*"]},getWidgetHtml:function(){return new Promise((function(t,r){e.WS.serviceToken({service_token:1,service:"banxa",referrer:window.location.href}).then((function(e){if(e.error)r(e.error.message);else{var o=e.service_token.banxa.url;o&&window.open(o),t()}}))}))},onMountWidgetContainer:function(){},should_show_deposit_address:!1}},en=function(e){return{icon:{dark:"IcCashierChangellyDark",light:"IcCashierChangellyLight"},name:"Changelly",getDescription:function(){return(0,k.localize)("Your simple access to crypto. Fast and secure way to exchange and purchase cryptocurrencies. 24/7 live chat support.")},getAllowedResidencies:function(){return["*"]},getPaymentIcons:function(){return[{dark:"IcCashierVisaDark",light:"IcCashierVisaLight"},{dark:"IcCashierMastercardDark",light:"IcCashierMastercardLight"}]},getScriptDependencies:function(){return[]},getDefaultFromCurrency:function(){return"usd"},getFromCurrencies:function(){return["usd","eur","gbp"]},getToCurrencies:function(){return["bch","btc","etc","eth","ltc","ust"]},getWidgetHtml:function(){var t=this;return new Promise((function(r){var o=new URL("https://widget.changelly.com/?v=3&theme=default");o.searchParams.append("fromDefault",t.getDefaultFromCurrency());var n=e.root_store.client.currency.toLowerCase();if(t.getToCurrencies().includes(n)){var i="ust"===n?"usdt":n;o.searchParams.append("to",i),o.searchParams.append("toDefault",i)}o.searchParams.append("amount",1),o.searchParams.append("merchant_id","iiq3jdt2p44yrfbx"),window.open(o),r()}))},onMountWidgetContainer:function(){},should_show_deposit_address:!0}},tn=function(e){return{icon:{dark:"IcCashierXanpoolDark",light:"IcCashierXanpoolLight"},name:"XanPool",getDescription:function(){return(0,k.localize)("Buy cryptocurrencies in an instant. Enjoy easy, quick, and secure exchanges using your local payment methods.")},getAllowedResidencies:function(){return["*"]},getPaymentIcons:function(){return[{dark:"IcCashierFpsDark",light:"IcCashierFpsLight"},{dark:"IcCashierAliPayDark",light:"IcCashierAliPayLight"},{dark:"IcCashierGoPayDark",light:"IcCashierGoPayLight"},{dark:"IcCashierMandiriPay",light:"IcCashierMandiriPay"},{dark:"IcCashierInstaPayLight",light:"IcCashierInstaPayDark"},{dark:"IcCashierCebuanaLhuillierDark",light:"IcCashierCebuanaLhuillierLight"},{dark:"IcCashierPayNowDark",light:"IcCashierPayNowLight"},{dark:"IcCashierUpiDark",light:"IcCashierUpiLight"},{dark:"IcCashierPromptPayDark",light:"IcCashierPromptPayLight"},{dark:"IcCashierViettlePay",light:"IcCashierViettlePay"}]},getScriptDependencies:function(){return[]},getToCurrencies:function(){return["btc","eth","ust","zil","nem"]},getWidgetHtml:function(){return new Promise((function(t){var r=e.root_store.client.currency,o="https://checkout.xanpool.com/";o+="?apiKey=db4ec638dff9a68abda1ef6b7638c220",o+="&redirectUrl=".concat(window.location.href),o+="&wallet=".concat(e.deposit_address),o+="&cryptoCurrency=".concat("UST"===r?"USDT":r),o+="&transactionType=buy",window.open(o),t()}))},onMountWidgetContainer:function(){},should_show_deposit_address:!1}};function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}var on,nn,an,sn,cn,un,pn,ln,fn,yn,hn,dn,bn,_n,mn,vn,gn,wn,On,kn,Pn,Cn,Tn,Sn,An,Dn,jn,In,xn,zn,Rn,En,Mn,Ln;function Wn(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function Fn(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){Wn(i,o,n,a,s,"next",e)}function s(e){Wn(i,o,n,a,s,"throw",e)}a(void 0)}))}}function Vn(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Bn(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Nn(e,t){return Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nn(e,t)}function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Gn(e);if(t){var n=Gn(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Un(this,r)}}function Un(e,t){if(t&&("object"===rn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qn(e)}function qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(e){return Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(e)}function Xn(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Kn,Jn,Yn,$n,Qn,Zn,ei,ti,ri,oi,ni,ii,ai,si,ci,ui=(on=y.observable.shallow,nn=y.observable.ref,an=y.action.bound,sn=y.action.bound,cn=y.action.bound,un=y.action.bound,pn=y.action.bound,ln=y.action.bound,fn=y.action.bound,yn=y.action.bound,hn=y.action.bound,dn=y.action.bound,bn=y.action.bound,_n=y.action.bound,mn=y.action.bound,vn=y.action.bound,gn=y.action.bound,wn=y.action.bound,On=y.action.bound,kn=y.action.bound,Pn=y.action.bound,Cn=y.action.bound,Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nn(e,t)}(r,e);var t=Hn(r);function r(e){var o,n=e.WS,i=e.root_store;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Vn(o=t.call(this,{root_store:i}),"api_error",Sn,qn(o)),Vn(o,"deposit_address",An,qn(o)),Vn(o,"is_deposit_address_loading",Dn,qn(o)),Vn(o,"is_deposit_address_popover_open",jn,qn(o)),Vn(o,"is_onramp_modal_open",In,qn(o)),Vn(o,"is_requesting_widget_html",xn,qn(o)),Vn(o,"onramp_providers",zn,qn(o)),Vn(o,"selected_provider",Rn,qn(o)),Vn(o,"should_show_widget",En,qn(o)),Vn(o,"widget_error",Mn,qn(o)),Vn(o,"widget_html",Ln,qn(o)),o.deposit_address_ref=null,o.WS=n,o.onClientInit(Fn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.setOnrampProviders([en(qn(o)),tn(qn(o)),Zo(qn(o))]);case 1:case"end":return e.stop()}}),e)})))),o}return function(e,t,r){t&&Bn(e.prototype,t),r&&Bn(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"is_onramp_tab_visible",get:function(){var e=this.root_store.client;return!1===e.is_virtual&&(0,h.isCryptocurrency)(e.currency)&&this.filtered_onramp_providers.length>0}},{key:"filtered_onramp_providers",get:function(){var e=this.root_store.client;return this.onramp_providers.filter((function(t){var r=t.getToCurrencies();return r.includes("*")||r.includes(e.currency.toLowerCase())})).filter((function(t){var r=t.getAllowedResidencies();return r.includes("*")||r.includes(e.residence)}))}},{key:"onramp_popup_modal_title",get:function(){return this.should_show_widget?(0,k.localize)("Payment channel"):this.selected_provider?this.should_show_dialog?(0,k.localize)("Our server cannot retrieve an address."):" ":void 0}},{key:"should_show_dialog",get:function(){return this.api_error}},{key:"onMountOnramp",value:function(){var e=this;this.disposeThirdPartyJsReaction=(0,y.reaction)((function(){return e.selected_provider}),function(){var t=Fn(regeneratorRuntime.mark((function t(r){var o,n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:if(0!==(o=r.getScriptDependencies()).length){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,l.e("loadjs").then(l.t.bind(l,"../../../node_modules/loadjs/dist/loadjs.umd.js",23));case 7:n=t.sent,i=n.default,a="".concat((0,h.getKebabCase)(r.name),"-onramp"),i.isDefined(a)||i(o,a,{error:function(){console.warn("Dependencies for onramp provider ".concat(r.name," could not be loaded.")),e.setSelectedProvider(null)}});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.disposeGetWidgetHtmlReaction=(0,y.reaction)((function(){return e.should_show_widget}),(function(t){if(t){if(e.is_requesting_widget_html)return;e.setIsRequestingWidgetHtml(!0),e.selected_provider.getWidgetHtml().then((function(t){t?e.setWidgetHtml(t):e.setShouldShowWidget(!1)})).catch((function(t){e.setWidgetError(t)})).finally((function(){return e.setIsRequestingWidgetHtml(!1)}))}}))}},{key:"onUnmountOnramp",value:function(){"function"==typeof this.disposeThirdPartyJsReaction&&this.disposeThirdPartyJsReaction(),"function"==typeof this.disposeGetWidgetHtmlReaction&&this.disposeGetWidgetHtmlReaction()}},{key:"onClickCopyDepositAddress",value:function(){var e=this,t=document.createRange();t.selectNodeContents(this.deposit_address_ref);var r=window.getSelection();r.removeAllRanges(),r.addRange(t),navigator.clipboard.writeText(this.deposit_address).then((function(){e.setIsDepositAddressPopoverOpen(!0),setTimeout((function(){return e.setIsDepositAddressPopoverOpen(!1)}),500)}))}},{key:"onClickDisclaimerContinue",value:function(){this.setShouldShowWidget(!0)}},{key:"onClickGoToDepositPage",value:function(){this.pollApiForDepositAddress(!1),window.open((0,h.websiteUrl)()+h.routes.cashier_deposit.substring(1))}},{key:"pollApiForDepositAddress",value:function(e){var t=this;this.setIsDepositAddressLoading(!0),this.setApiError(null);var r=setInterval((function(){return o}),3e3),o=function(){t.WS.authorized.cashier("deposit",{provider:"crypto",type:"api"}).then((function(o){var n=!1;if(o.error)t.setApiError(o.error),n=!0;else{var i=o.cashier.deposit.address;(i||e)&&(t.setDepositAddress(i),n=!0)}n&&(clearInterval(r),t.setIsDepositAddressLoading(!1))}))};o(),setTimeout((function(){clearInterval(r),t.setIsDepositAddressLoading(!1)}),3e4)}},{key:"resetPopup",value:function(){this.setApiError(null),this.setDepositAddress(null),this.setDepositAddressRef(null),this.setIsDepositAddressLoading(!0),this.setSelectedProvider(null),this.setShouldShowWidget(!1),this.setWidgetError(null),this.setWidgetHtml(null)}},{key:"setApiError",value:function(e){this.api_error=e}},{key:"setCopyIconRef",value:function(e){this.copy_icon_ref=e}},{key:"setDepositAddress",value:function(e){this.deposit_address=e}},{key:"setDepositAddressRef",value:function(e){this.deposit_address_ref=e}},{key:"setIsDepositAddressLoading",value:function(e){this.is_deposit_address_loading=e}},{key:"setIsDepositAddressPopoverOpen",value:function(e){this.is_deposit_address_popover_open=e}},{key:"setIsOnRampModalOpen",value:function(e){this.is_onramp_modal_open=e}},{key:"setIsRequestingWidgetHtml",value:function(e){this.is_requesting_widget_html=e}},{key:"setSelectedProvider",value:function(e){e?(this.selected_provider=e,this.setIsOnRampModalOpen(!0),this.pollApiForDepositAddress(!0)):(this.setIsOnRampModalOpen(!1),this.selected_provider=null)}},{key:"setShouldShowWidget",value:function(e){this.should_show_widget=e}},{key:"setOnrampProviders",value:function(e){this.onramp_providers=e.slice()}},{key:"setWidgetError",value:function(e){this.widget_error=e}},{key:"setWidgetHtml",value:function(e){this.widget_html=e}}]),r}(ko),Sn=Xn(Tn.prototype,"api_error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),An=Xn(Tn.prototype,"deposit_address",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dn=Xn(Tn.prototype,"is_deposit_address_loading",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),jn=Xn(Tn.prototype,"is_deposit_address_popover_open",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),In=Xn(Tn.prototype,"is_onramp_modal_open",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xn=Xn(Tn.prototype,"is_requesting_widget_html",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zn=Xn(Tn.prototype,"onramp_providers",[on],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rn=Xn(Tn.prototype,"selected_provider",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),En=Xn(Tn.prototype,"should_show_widget",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mn=Xn(Tn.prototype,"widget_error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ln=Xn(Tn.prototype,"widget_html",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xn(Tn.prototype,"is_onramp_tab_visible",[y.computed],Object.getOwnPropertyDescriptor(Tn.prototype,"is_onramp_tab_visible"),Tn.prototype),Xn(Tn.prototype,"filtered_onramp_providers",[y.computed],Object.getOwnPropertyDescriptor(Tn.prototype,"filtered_onramp_providers"),Tn.prototype),Xn(Tn.prototype,"onramp_popup_modal_title",[y.computed],Object.getOwnPropertyDescriptor(Tn.prototype,"onramp_popup_modal_title"),Tn.prototype),Xn(Tn.prototype,"should_show_dialog",[y.computed],Object.getOwnPropertyDescriptor(Tn.prototype,"should_show_dialog"),Tn.prototype),Xn(Tn.prototype,"onMountOnramp",[an],Object.getOwnPropertyDescriptor(Tn.prototype,"onMountOnramp"),Tn.prototype),Xn(Tn.prototype,"onUnmountOnramp",[sn],Object.getOwnPropertyDescriptor(Tn.prototype,"onUnmountOnramp"),Tn.prototype),Xn(Tn.prototype,"onClickCopyDepositAddress",[cn],Object.getOwnPropertyDescriptor(Tn.prototype,"onClickCopyDepositAddress"),Tn.prototype),Xn(Tn.prototype,"onClickDisclaimerContinue",[un],Object.getOwnPropertyDescriptor(Tn.prototype,"onClickDisclaimerContinue"),Tn.prototype),Xn(Tn.prototype,"onClickGoToDepositPage",[pn],Object.getOwnPropertyDescriptor(Tn.prototype,"onClickGoToDepositPage"),Tn.prototype),Xn(Tn.prototype,"pollApiForDepositAddress",[ln],Object.getOwnPropertyDescriptor(Tn.prototype,"pollApiForDepositAddress"),Tn.prototype),Xn(Tn.prototype,"resetPopup",[fn],Object.getOwnPropertyDescriptor(Tn.prototype,"resetPopup"),Tn.prototype),Xn(Tn.prototype,"setApiError",[yn],Object.getOwnPropertyDescriptor(Tn.prototype,"setApiError"),Tn.prototype),Xn(Tn.prototype,"setCopyIconRef",[hn],Object.getOwnPropertyDescriptor(Tn.prototype,"setCopyIconRef"),Tn.prototype),Xn(Tn.prototype,"setDepositAddress",[dn],Object.getOwnPropertyDescriptor(Tn.prototype,"setDepositAddress"),Tn.prototype),Xn(Tn.prototype,"setDepositAddressRef",[bn],Object.getOwnPropertyDescriptor(Tn.prototype,"setDepositAddressRef"),Tn.prototype),Xn(Tn.prototype,"setIsDepositAddressLoading",[_n],Object.getOwnPropertyDescriptor(Tn.prototype,"setIsDepositAddressLoading"),Tn.prototype),Xn(Tn.prototype,"setIsDepositAddressPopoverOpen",[mn],Object.getOwnPropertyDescriptor(Tn.prototype,"setIsDepositAddressPopoverOpen"),Tn.prototype),Xn(Tn.prototype,"setIsOnRampModalOpen",[vn],Object.getOwnPropertyDescriptor(Tn.prototype,"setIsOnRampModalOpen"),Tn.prototype),Xn(Tn.prototype,"setIsRequestingWidgetHtml",[gn],Object.getOwnPropertyDescriptor(Tn.prototype,"setIsRequestingWidgetHtml"),Tn.prototype),Xn(Tn.prototype,"setSelectedProvider",[wn],Object.getOwnPropertyDescriptor(Tn.prototype,"setSelectedProvider"),Tn.prototype),Xn(Tn.prototype,"setShouldShowWidget",[On],Object.getOwnPropertyDescriptor(Tn.prototype,"setShouldShowWidget"),Tn.prototype),Xn(Tn.prototype,"setOnrampProviders",[kn],Object.getOwnPropertyDescriptor(Tn.prototype,"setOnrampProviders"),Tn.prototype),Xn(Tn.prototype,"setWidgetError",[Pn],Object.getOwnPropertyDescriptor(Tn.prototype,"setWidgetError"),Tn.prototype),Xn(Tn.prototype,"setWidgetHtml",[Cn],Object.getOwnPropertyDescriptor(Tn.prototype,"setWidgetHtml"),Tn.prototype),Tn);function pi(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function li(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function fi(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yi(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var hi,di,bi,_i,mi,vi,gi,wi,Oi,ki,Pi,Ci,Ti,Si,Ai,Di,ji,Ii,xi,zi,Ri,Ei,Mi,Li,Wi,Fi,Vi,Bi,Ni,Hi,Ui,qi,Gi,Xi,Ki,Ji,Yi,$i,Qi,Zi,ea,ta,ra=(Kn=y.action.bound,Jn=y.action.bound,Yn=y.action.bound,$n=y.action.bound,Qn=y.action.bound,Zn=y.action.bound,ei=y.action.bound,ti=y.action.bound,ri=function(){function e(t){var r=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),li(this,"is_button_clicked",oi,this),li(this,"timeout_button",ni,this),li(this,"error",ii,this),li(this,"is_email_sent",ai,this),li(this,"is_resend_clicked",si,this),li(this,"resend_timeout",ci,this),this.root_store=o,this.WS=r}var t,r;return function(e,t,r){t&&fi(e.prototype,t),r&&fi(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"setIsButtonClicked",value:function(e){this.is_button_clicked=e}},{key:"setTimeoutButton",value:function(e){this.timeout_button=e}},{key:"setIsEmailSent",value:function(e){this.is_email_sent=e}},{key:"setIsResendClicked",value:function(e){this.is_resend_clicked=e}},{key:"setResendTimeout",value:function(e){this.resend_timeout=e}},{key:"clearTimeoutVerification",value:function(){this.timeout_button&&clearTimeout(this.timeout_button)}},{key:"setTimeoutVerification",value:function(){var e=this;this.clearTimeoutVerification(),this.setTimeoutButton(setTimeout((function(){e.clearVerification()}),36e5))}},{key:"sendVerificationEmail",value:(t=regeneratorRuntime.mark((function e(){var t,r,o,n,i,a,s,c,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.root_store,r=t.client,o=t.modules,n=o.cashier.payment_agent.resetPaymentAgent,i=o.cashier.general_store.active_container,a=P.map_action[i],!this.is_button_clicked&&r.email){e.next=6;break}return e.abrupt("return");case 6:return this.error.setErrorMessage(""),this.setIsButtonClicked(!0),s="payment_agent_withdraw"===a?"paymentagent_withdraw":"payment_withdraw",e.next=11,this.WS.verifyEmail(r.email,s);case 11:(c=e.sent).error?(this.clearVerification(),"PaymentAgentWithdrawError"===c.error.code?this.error.setErrorMessage(c.error,n,null):this.error.setErrorMessage(c.error,(function(){u.error.setErrorMessage("",null,null)}),null)):(this.setIsEmailSent(!0),this.setTimeoutVerification());case 13:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,r=arguments;return new Promise((function(o,n){var i=t.apply(e,r);function a(e){pi(i,o,n,a,s,"next",e)}function s(e){pi(i,o,n,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})},{key:"resendVerificationEmail",value:function(){this.resend_timeout<60||(this.setIsButtonClicked(!1),this.setCountDownResendVerification(),this.sendVerificationEmail())}},{key:"setCountDownResendVerification",value:function(){var e=this;this.setResendTimeout(this.resend_timeout-1);var t=setInterval((function(){1===e.resend_timeout?(e.setResendTimeout(60),clearInterval(t)):e.setResendTimeout(e.resend_timeout-1)}),1e3)}},{key:"clearVerification",value:function(){var e=this.root_store,t=e.client,r=e.modules.cashier.general_store.active_container,o=P.map_action[r];this.clearTimeoutVerification(),this.setIsButtonClicked(!1),this.setIsEmailSent(!1),this.setIsResendClicked(!1),this.setResendTimeout(60),this.error.setErrorMessage("",null,null),t.setVerificationCode("",o)}}]),e}(),oi=yi(ri.prototype,"is_button_clicked",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ni=yi(ri.prototype,"timeout_button",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ii=yi(ri.prototype,"error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Re}}),ai=yi(ri.prototype,"is_email_sent",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),si=yi(ri.prototype,"is_resend_clicked",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ci=yi(ri.prototype,"resend_timeout",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),yi(ri.prototype,"setIsButtonClicked",[Kn],Object.getOwnPropertyDescriptor(ri.prototype,"setIsButtonClicked"),ri.prototype),yi(ri.prototype,"setTimeoutButton",[Jn],Object.getOwnPropertyDescriptor(ri.prototype,"setTimeoutButton"),ri.prototype),yi(ri.prototype,"setIsEmailSent",[Yn],Object.getOwnPropertyDescriptor(ri.prototype,"setIsEmailSent"),ri.prototype),yi(ri.prototype,"setIsResendClicked",[$n],Object.getOwnPropertyDescriptor(ri.prototype,"setIsResendClicked"),ri.prototype),yi(ri.prototype,"setResendTimeout",[Qn],Object.getOwnPropertyDescriptor(ri.prototype,"setResendTimeout"),ri.prototype),yi(ri.prototype,"setTimeoutVerification",[Zn],Object.getOwnPropertyDescriptor(ri.prototype,"setTimeoutVerification"),ri.prototype),yi(ri.prototype,"sendVerificationEmail",[ei],Object.getOwnPropertyDescriptor(ri.prototype,"sendVerificationEmail"),ri.prototype),yi(ri.prototype,"resendVerificationEmail",[ti],Object.getOwnPropertyDescriptor(ri.prototype,"resendVerificationEmail"),ri.prototype),ri);function oa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(r),!0).forEach((function(t){ia(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ia(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aa(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function sa(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){aa(i,o,n,a,s,"next",e)}function s(e){aa(i,o,n,a,s,"throw",e)}a(void 0)}))}}function ca(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function ua(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pa(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var la,fa,ya,ha,da,ba,_a,ma,va,ga,wa,Oa,ka,Pa,Ca,Ta,Sa,Aa,Da,ja,Ia,xa,za=(hi=y.action.bound,di=y.action.bound,bi=y.action.bound,_i=y.action.bound,mi=y.action.bound,vi=y.action.bound,gi=y.action.bound,wi=y.action.bound,Oi=y.action.bound,ki=y.action.bound,Pi=y.action.bound,Ci=y.action.bound,Ti=y.action.bound,Si=y.action.bound,Ai=y.action.bound,Di=y.action.bound,ji=y.action.bound,Ii=y.action.bound,xi=y.action.bound,zi=y.action.bound,Ri=y.action.bound,Ei=y.action.bound,Mi=y.action.bound,Li=y.action.bound,Wi=function(){function e(t){var r=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ca(this,"list",Fi,this),ca(this,"agents",Vi,this),ca(this,"container",Bi,this),ca(this,"error",Ni,this),ca(this,"filtered_list",Hi,this),ca(this,"is_name_selected",Ui,this),ca(this,"is_withdraw",qi,this),ca(this,"is_try_withdraw_successful",Gi,this),ca(this,"is_withdraw_successful",Xi,this),ca(this,"confirm",Ki,this),ca(this,"receipt",Ji,this),ca(this,"selected_bank",Yi,this),ca(this,"supported_banks",$i,this),ca(this,"verification",Qi,this),ca(this,"active_tab_index",Zi,this),ca(this,"all_payment_agent_list",ea,this),ca(this,"resetPaymentAgent",ta,this),this.root_store=o,this.WS=r}var t,r,o,n,i,a,s,c;return function(e,t,r){t&&ua(e.prototype,t),r&&ua(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"setActiveTabIndex",value:function(e){this.active_tab_index=e}},{key:"setActiveTab",value:function(e){this.setActiveTabIndex(e),1===e&&this.verification.sendVerificationEmail()}},{key:"is_payment_agent_visible",get:function(){return!(!this.filtered_list.length&&!this.agents.length)}},{key:"getPaymentAgentList",value:(c=sa(regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.wait("get_settings");case 2:return t=this.root_store.client,r=t.residence,o=t.currency,e.abrupt("return",this.WS.authorized.paymentAgentList(r,o));case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getPaymentAgentDetails",value:(s=sa(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.authorized.paymentAgentDetails();case 2:return t=e.sent,r=t.paymentagent_details,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"addSupportedBank",value:function(e){this.supported_banks.find((function(t){return t.value===e.toLowerCase()}))||this.supported_banks.push({text:e,value:e.toLowerCase()})}},{key:"clearSuppertedBanks",value:function(){this.supported_banks=[]}},{key:"sortSupportedBanks",value:function(){this.supported_banks.replace(this.supported_banks.slice().sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})))}},{key:"setList",value:function(e){this.list.push(e)}},{key:"clearList",value:function(){this.list=[]}},{key:"setPaymentAgentList",value:(a=sa(regeneratorRuntime.mark((function e(t){var r,o,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,e.t0){e.next=5;break}return e.next=4,this.getPaymentAgentList();case 4:e.t0=e.sent;case 5:r=e.t0,this.clearList(),this.clearSuppertedBanks();try{null===(o=r.paymentagent_list)||void 0===o||o.list.forEach((function(e){n.setList({email:e.email,phones:(null==e?void 0:e.phone_numbers)||(null==e?void 0:e.telephone),name:e.name,supported_banks:(null==e?void 0:e.supported_payment_methods)||(null==e?void 0:e.supported_banks),urls:(null==e?void 0:e.urls)||(null==e?void 0:e.url)}),e.supported_banks&&(null!=e&&e.supported_payment_methods?e.supported_payment_methods.map((function(e){return e.payment_method})):e.supported_banks.split(",")).forEach((function(e){n.addSupportedBank(e)}))}))}catch(e){console.error(e)}this.sortSupportedBanks();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"filterPaymentAgentList",value:function(e){var t=this,r=this.root_store.common;e?(this.filtered_list=[],this.list.forEach((function(r){var o=null==r?void 0:r.supported_banks;o&&-1!==("string"==typeof o?o.toLowerCase().split(",").indexOf(e):o.map((function(e){return e.payment_method.toLowerCase()})).indexOf(e))&&t.filtered_list.push(r)}))):this.filtered_list=this.list,!this.is_payment_agent_visible&&window.location.pathname.endsWith(h.routes.cashier_pa)&&r.routeTo(h.routes.cashier_deposit)}},{key:"onChangePaymentMethod",value:function(e){var t=e.target,r="0"===t.value?parseInt(t.value):t.value;this.selected_bank=r,this.filterPaymentAgentList(r)}},{key:"setIsWithdraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_withdraw;this.is_withdraw=e}},{key:"setIsTryWithdrawSuccessful",value:function(e){this.error.setErrorMessage(""),this.is_try_withdraw_successful=e}},{key:"setIsWithdrawSuccessful",value:function(e){this.is_withdraw_successful=e}},{key:"setConfirmation",value:function(e){var t=e.amount,r=e.currency,o=e.loginid,n=e.payment_agent_name;this.confirm={amount:t,currency:r,loginid:o,payment_agent_name:n}}},{key:"setReceipt",value:function(e){var t=e.amount_transferred,r=e.payment_agent_email,o=e.payment_agent_id,n=e.payment_agent_name,i=e.payment_agent_phone,a=e.payment_agent_url;this.receipt={amount_transferred:t,payment_agent_email:r,payment_agent_id:o,payment_agent_name:n,payment_agent_phone:i,payment_agent_url:a}}},{key:"addPaymentAgent",value:function(e){this.agents.push({text:e.name,value:e.paymentagent_loginid,max_withdrawal:e.max_withdrawal,min_withdrawal:e.min_withdrawal,email:e.email,phone:e.telephone,url:e.url})}},{key:"onMountPaymentAgentWithdraw",value:(i=sa(regeneratorRuntime.mark((function e(){var t,r,o,n,i,a,s,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.root_store,r=t.common,o=t.modules,n=o.cashier.general_store,i=n.setLoading,a=n.onMountCommon,i(!0),this.onRemount=this.onMountPaymentAgentWithdraw,a(),this.setIsWithdraw(!0),this.setIsWithdrawSuccessful(!1),this.setReceipt({}),this.agents.length){e.next=14;break}return e.next=11,this.getPaymentAgentList();case 11:(s=e.sent).paymentagent_list.list.forEach((function(e){c.addPaymentAgent(e)})),!s.paymentagent_list.list.length&&window.location.pathname.endsWith(h.routes.cashier_pa)&&r.routeTo(h.routes.cashier_deposit);case 14:i(!1);case 15:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"requestTryPaymentAgentWithdraw",value:(n=sa(regeneratorRuntime.mark((function e(t){var r,o,n,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.loginid,o=t.currency,n=t.amount,i=t.verification_code,this.error.setErrorMessage(""),e.next=4,this.WS.authorized.paymentAgentWithdraw({loginid:r,currency:o,amount:n,verification_code:i,dry_run:1});case 4:2==+(a=e.sent).paymentagent_withdraw?(s=this.agents.find((function(e){return e.value===r})),this.setConfirmation(na({amount:n,currency:o,loginid:r},s&&{payment_agent_name:s.text})),this.setIsTryWithdrawSuccessful(!0)):this.error.setErrorMessage(a.error,this.resetPaymentAgent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onMountPaymentAgentList",value:(o=sa(regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.root_store.modules.cashier.general_store,r=t.setLoading,o=t.onMountCommon,r(!0),this.onRemount=this.onMountPaymentAgentList,e.next=5,o();case 5:return e.next=7,this.getPaymentAgentList();case 7:r(!1);case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getAllPaymentAgentList",value:(r=sa(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.wait("get_settings");case 2:return e.abrupt("return",this.WS.allPaymentAgentList(this.root_store.client.residence));case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setAllPaymentAgentList",value:function(e){this.all_payment_agent_list=e}},{key:"is_payment_agent_visible_in_onboarding",get:function(){var e,t,r;return!(null===(e=this.all_payment_agent_list)||void 0===e||null===(t=e.paymentagent_list)||void 0===t||null===(r=t.list)||void 0===r||!r.length)}},{key:"requestPaymentAgentWithdraw",value:(t=sa(regeneratorRuntime.mark((function e(t){var r,o,n,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.loginid,o=t.currency,n=t.amount,i=t.verification_code,this.error.setErrorMessage(""),e.next=4,this.WS.authorized.paymentAgentWithdraw({loginid:r,currency:o,amount:n,verification_code:i});case 4:1==+(a=e.sent).paymentagent_withdraw?(s=this.agents.find((function(e){return e.value===r})),this.setReceipt(na(na({amount_transferred:(0,h.formatMoney)(o,n,!0)},s&&{payment_agent_email:s.email,payment_agent_id:s.value,payment_agent_name:s.text,payment_agent_phone:s.phone,payment_agent_url:s.url}),!s&&{payment_agent_id:r})),this.setIsWithdrawSuccessful(!0),this.setIsTryWithdrawSuccessful(!1),this.setConfirmation({})):this.error.setErrorMessage(a.error,this.resetPaymentAgent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Fi=pa(Wi.prototype,"list",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Vi=pa(Wi.prototype,"agents",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Bi=pa(Wi.prototype,"container",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.containers.payment_agent}}),Ni=pa(Wi.prototype,"error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Re}}),Hi=pa(Wi.prototype,"filtered_list",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ui=pa(Wi.prototype,"is_name_selected",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qi=pa(Wi.prototype,"is_withdraw",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gi=pa(Wi.prototype,"is_try_withdraw_successful",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xi=pa(Wi.prototype,"is_withdraw_successful",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ki=pa(Wi.prototype,"confirm",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ji=pa(Wi.prototype,"receipt",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Yi=pa(Wi.prototype,"selected_bank",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$i=pa(Wi.prototype,"supported_banks",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qi=pa(Wi.prototype,"verification",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ra({root_store:this.root_store,WS:this.WS})}}),Zi=pa(Wi.prototype,"active_tab_index",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ea=pa(Wi.prototype,"all_payment_agent_list",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pa(Wi.prototype,"setActiveTabIndex",[hi],Object.getOwnPropertyDescriptor(Wi.prototype,"setActiveTabIndex"),Wi.prototype),pa(Wi.prototype,"setActiveTab",[di],Object.getOwnPropertyDescriptor(Wi.prototype,"setActiveTab"),Wi.prototype),pa(Wi.prototype,"is_payment_agent_visible",[y.computed],Object.getOwnPropertyDescriptor(Wi.prototype,"is_payment_agent_visible"),Wi.prototype),pa(Wi.prototype,"getPaymentAgentList",[bi],Object.getOwnPropertyDescriptor(Wi.prototype,"getPaymentAgentList"),Wi.prototype),pa(Wi.prototype,"getPaymentAgentDetails",[_i],Object.getOwnPropertyDescriptor(Wi.prototype,"getPaymentAgentDetails"),Wi.prototype),pa(Wi.prototype,"addSupportedBank",[mi],Object.getOwnPropertyDescriptor(Wi.prototype,"addSupportedBank"),Wi.prototype),pa(Wi.prototype,"clearSuppertedBanks",[vi],Object.getOwnPropertyDescriptor(Wi.prototype,"clearSuppertedBanks"),Wi.prototype),pa(Wi.prototype,"sortSupportedBanks",[gi],Object.getOwnPropertyDescriptor(Wi.prototype,"sortSupportedBanks"),Wi.prototype),pa(Wi.prototype,"setList",[wi],Object.getOwnPropertyDescriptor(Wi.prototype,"setList"),Wi.prototype),pa(Wi.prototype,"clearList",[Oi],Object.getOwnPropertyDescriptor(Wi.prototype,"clearList"),Wi.prototype),pa(Wi.prototype,"setPaymentAgentList",[ki],Object.getOwnPropertyDescriptor(Wi.prototype,"setPaymentAgentList"),Wi.prototype),pa(Wi.prototype,"filterPaymentAgentList",[Pi],Object.getOwnPropertyDescriptor(Wi.prototype,"filterPaymentAgentList"),Wi.prototype),pa(Wi.prototype,"onChangePaymentMethod",[Ci],Object.getOwnPropertyDescriptor(Wi.prototype,"onChangePaymentMethod"),Wi.prototype),pa(Wi.prototype,"setIsWithdraw",[Ti],Object.getOwnPropertyDescriptor(Wi.prototype,"setIsWithdraw"),Wi.prototype),pa(Wi.prototype,"setIsTryWithdrawSuccessful",[Si],Object.getOwnPropertyDescriptor(Wi.prototype,"setIsTryWithdrawSuccessful"),Wi.prototype),pa(Wi.prototype,"setIsWithdrawSuccessful",[Ai],Object.getOwnPropertyDescriptor(Wi.prototype,"setIsWithdrawSuccessful"),Wi.prototype),pa(Wi.prototype,"setConfirmation",[Di],Object.getOwnPropertyDescriptor(Wi.prototype,"setConfirmation"),Wi.prototype),pa(Wi.prototype,"setReceipt",[ji],Object.getOwnPropertyDescriptor(Wi.prototype,"setReceipt"),Wi.prototype),pa(Wi.prototype,"addPaymentAgent",[Ii],Object.getOwnPropertyDescriptor(Wi.prototype,"addPaymentAgent"),Wi.prototype),pa(Wi.prototype,"onMountPaymentAgentWithdraw",[xi],Object.getOwnPropertyDescriptor(Wi.prototype,"onMountPaymentAgentWithdraw"),Wi.prototype),pa(Wi.prototype,"requestTryPaymentAgentWithdraw",[zi],Object.getOwnPropertyDescriptor(Wi.prototype,"requestTryPaymentAgentWithdraw"),Wi.prototype),ta=pa(Wi.prototype,"resetPaymentAgent",[Ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.error.setErrorMessage(""),e.setIsWithdraw(!1),e.verification.clearVerification(),e.setActiveTabIndex(0)}}}),pa(Wi.prototype,"onMountPaymentAgentList",[Ei],Object.getOwnPropertyDescriptor(Wi.prototype,"onMountPaymentAgentList"),Wi.prototype),pa(Wi.prototype,"setAllPaymentAgentList",[Mi],Object.getOwnPropertyDescriptor(Wi.prototype,"setAllPaymentAgentList"),Wi.prototype),pa(Wi.prototype,"is_payment_agent_visible_in_onboarding",[y.computed],Object.getOwnPropertyDescriptor(Wi.prototype,"is_payment_agent_visible_in_onboarding"),Wi.prototype),pa(Wi.prototype,"requestPaymentAgentWithdraw",[Li],Object.getOwnPropertyDescriptor(Wi.prototype,"requestPaymentAgentWithdraw"),Wi.prototype),Wi);function Ra(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function Ea(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){Ra(i,o,n,a,s,"next",e)}function s(e){Ra(i,o,n,a,s,"throw",e)}a(void 0)}))}}function Ma(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function La(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wa(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Fa,Va,Ba,Na,Ha,Ua,qa,Ga,Xa,Ka,Ja,Ya,$a,Qa,Za,es,ts,rs,os,ns,is,as,ss,cs,us,ps,ls,fs=(la=y.action.bound,fa=y.action.bound,ya=y.action.bound,ha=y.action.bound,da=y.action.bound,ba=y.action.bound,_a=y.action.bound,ma=y.action.bound,va=y.action.bound,ga=y.action.bound,wa=function(){function e(t){var r=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ma(this,"container",Oa,this),Ma(this,"error",ka,this),Ma(this,"is_payment_agent",Pa,this),Ma(this,"is_try_transfer_successful",Ca,this),Ma(this,"is_transfer_successful",Ta,this),Ma(this,"confirm",Sa,this),Ma(this,"receipt",Aa,this),Ma(this,"transfer_limit",Da,this),Ma(this,"requestTryPaymentAgentTransfer",ja,this),Ma(this,"requestPaymentAgentTransfer",Ia,this),Ma(this,"resetPaymentAgentTransfer",xa,this),this.root_store=o,this.WS=r}var t,r,o;return function(e,t,r){t&&La(e.prototype,t),r&&La(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"is_payment_agent_transfer_visible",get:function(){return this.is_payment_agent}},{key:"checkIsPaymentAgent",value:(o=Ea(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.authorized.storage.getSettings();case 2:r=e.sent.get_settings,this.setIsPaymentAgent(null!==(t=null==r?void 0:r.is_authenticated_payment_agent)&&void 0!==t&&t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"setIsPaymentAgent",value:function(e){!e&&window.location.pathname.endsWith(h.routes.cashier_pa_transfer)&&this.root_store.common.routeTo(h.routes.cashier_deposit),this.is_payment_agent=!!e}},{key:"setIsTryTransferSuccessful",value:function(e){this.error.setErrorMessage(""),this.is_try_transfer_successful=e}},{key:"setIsTransferSuccessful",value:function(e){this.is_transfer_successful=e}},{key:"setConfirmationPaymentAgentTransfer",value:function(e){var t=e.amount,r=e.client_id,o=e.client_name,n=e.description;this.confirm={amount:t,client_id:r,client_name:o,description:n}}},{key:"setReceiptPaymentAgentTransfer",value:function(e){var t=e.amount_transferred,r=e.client_id,o=e.client_name;this.receipt={amount_transferred:t,client_id:r,client_name:o}}},{key:"getCurrentPaymentAgent",value:(r=Ea(regeneratorRuntime.mark((function e(t){var r,o,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store,o=r.client,n=r.modules,i=t.paymentagent_list.list.find((function(e){return e.paymentagent_loginid===o.loginid})),e.t0=i,e.t0){e.next=7;break}return e.next=6,n.cashier.payment_agent.getPaymentAgentDetails();case 6:e.t0=e.sent;case 7:return a=e.t0,e.abrupt("return",null!=a?a:{});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setMinMaxPaymentAgentTransfer",value:function(e){var t=e.min_withdrawal,r=e.max_withdrawal;this.transfer_limit={min:t,max:r}}},{key:"onMountPaymentAgentTransfer",value:(t=Ea(regeneratorRuntime.mark((function e(){var t,r,o,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.root_store.modules.cashier,r=t.general_store,o=t.payment_agent,r.setLoading(!0),this.onRemount=this.onMountPaymentAgentTransfer,e.next=5,r.onMountCommon();case 5:if(this.transfer_limit.min_withdrawal){e.next=13;break}return e.next=8,o.getPaymentAgentList();case 8:return n=e.sent,e.next=11,this.getCurrentPaymentAgent(n);case 11:i=e.sent,this.setMinMaxPaymentAgentTransfer(i);case 13:r.setLoading(!1);case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Oa=Wa(wa.prototype,"container",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.containers.payment_agent_transfer}}),ka=Wa(wa.prototype,"error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Re}}),Pa=Wa(wa.prototype,"is_payment_agent",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ca=Wa(wa.prototype,"is_try_transfer_successful",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ta=Wa(wa.prototype,"is_transfer_successful",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sa=Wa(wa.prototype,"confirm",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Aa=Wa(wa.prototype,"receipt",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Da=Wa(wa.prototype,"transfer_limit",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Wa(wa.prototype,"is_payment_agent_transfer_visible",[y.computed],Object.getOwnPropertyDescriptor(wa.prototype,"is_payment_agent_transfer_visible"),wa.prototype),Wa(wa.prototype,"setIsPaymentAgent",[la],Object.getOwnPropertyDescriptor(wa.prototype,"setIsPaymentAgent"),wa.prototype),Wa(wa.prototype,"setIsTryTransferSuccessful",[fa],Object.getOwnPropertyDescriptor(wa.prototype,"setIsTryTransferSuccessful"),wa.prototype),Wa(wa.prototype,"setIsTransferSuccessful",[ya],Object.getOwnPropertyDescriptor(wa.prototype,"setIsTransferSuccessful"),wa.prototype),Wa(wa.prototype,"setConfirmationPaymentAgentTransfer",[ha],Object.getOwnPropertyDescriptor(wa.prototype,"setConfirmationPaymentAgentTransfer"),wa.prototype),Wa(wa.prototype,"setReceiptPaymentAgentTransfer",[da],Object.getOwnPropertyDescriptor(wa.prototype,"setReceiptPaymentAgentTransfer"),wa.prototype),Wa(wa.prototype,"setMinMaxPaymentAgentTransfer",[ba],Object.getOwnPropertyDescriptor(wa.prototype,"setMinMaxPaymentAgentTransfer"),wa.prototype),Wa(wa.prototype,"onMountPaymentAgentTransfer",[_a],Object.getOwnPropertyDescriptor(wa.prototype,"onMountPaymentAgentTransfer"),wa.prototype),ja=Wa(wa.prototype,"requestTryPaymentAgentTransfer",[ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Ea(regeneratorRuntime.mark((function t(r){var o,n,i,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.amount,n=r.currency,i=r.description,a=r.transfer_to,e.error.setErrorMessage(""),t.next=4,e.WS.authorized.paymentAgentTransfer({amount:o,currency:n,description:i,transfer_to:a,dry_run:1});case 4:return 2==+(s=t.sent).paymentagent_transfer?(e.setConfirmationPaymentAgentTransfer({client_id:a,client_name:s.client_to_full_name,amount:o,description:i}),e.setIsTryTransferSuccessful(!0)):e.error.setErrorMessage(s.error,e.resetPaymentAgentTransfer),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Ia=Wa(wa.prototype,"requestPaymentAgentTransfer",[va],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Ea(regeneratorRuntime.mark((function t(r){var o,n,i,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.amount,n=r.currency,i=r.description,a=r.transfer_to,e.error.setErrorMessage(""),t.next=4,e.WS.authorized.paymentAgentTransfer({amount:o,currency:n,description:i,transfer_to:a});case 4:return 1==+(s=t.sent).paymentagent_transfer?(e.setReceiptPaymentAgentTransfer({amount_transferred:o,client_id:a,client_name:s.client_to_full_name}),e.setIsTransferSuccessful(!0),e.setIsTryTransferSuccessful(!1),e.setConfirmationPaymentAgentTransfer({})):e.error.setErrorMessage(s.error,e.resetPaymentAgentTransfer),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),xa=Wa(wa.prototype,"resetPaymentAgentTransfer",[ga],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.setIsTransferSuccessful(!1),e.error.setErrorMessage("")}}}),wa);function ys(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function hs(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){ys(i,o,n,a,s,"next",e)}function s(e){ys(i,o,n,a,s,"throw",e)}a(void 0)}))}}function ds(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function bs(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _s(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var ms,vs,gs,ws,Os,ks,Ps,Cs,Ts,Ss,As,Ds,js,Is,xs,zs,Rs,Es,Ms,Ls,Ws,Fs,Vs,Bs,Ns,Hs=(Fa=y.action.bound,Va=y.action.bound,Ba=y.action.bound,Na=y.action.bound,Ha=y.action.bound,Ua=y.action.bound,qa=y.action.bound,Ga=y.action.bound,Xa=y.action.bound,Ka=y.action.bound,Ja=y.action.bound,Ya=y.action.bound,$a=y.action.bound,Qa=y.action.bound,Za=y.action.bound,es=y.action.bound,ts=y.action.bound,rs=y.action.bound,os=function(){function e(t){var r=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ds(this,"crypto_transactions",ns,this),ds(this,"is_crypto_transactions_cancel_modal_visible",is,this),ds(this,"is_crypto_transactions_status_modal_visible",as,this),ds(this,"is_crypto_transactions_visible",ss,this),ds(this,"is_loading",cs,this),ds(this,"selected_crypto_transaction_id",us,this),ds(this,"selected_crypto_status",ps,this),ds(this,"selected_crypto_status_description",ls,this),this.root_store=o,this.WS=r}var t,r,o,n;return function(e,t,r){t&&bs(e.prototype,t),r&&bs(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"onMount",value:(n=hs(regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.root_store.client,r=t.currency,o=t.switched,!r||!(0,h.isCryptocurrency)(r)||o){e.next=9;break}return this.setLoading(!0),e.next=6,this.unsubscribeCryptoTransactions();case 6:return e.next=8,this.getCryptoTransactions();case 8:this.setLoading(!1);case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"unsubscribeCryptoTransactions",value:(o=hs(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.authorized.cashierPayments({provider:"crypto",transaction_type:"all"}).then((function(e){if(!e.error){var r=e.cashier_payments.crypto;t.setCryptoTransactionsHistory(r)}}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getCryptoTransactions",value:(r=hs(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.subscribeCashierPayments((function(e){if(!e.error){var r=e.cashier_payments.crypto;t.updateCryptoTransactions(r)}}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setCryptoTransactionsHistory",value:function(e){this.crypto_transactions=e,this.sortCryptoTransactions()}},{key:"updateCryptoTransactions",value:function(e){var t=this;e.forEach((function(e){var r=t.crypto_transactions.findIndex((function(t){return t.id===e.id}));-1===r?t.crypto_transactions.push(e):Object.assign(t.crypto_transactions[r],e)})),this.sortCryptoTransactions()}},{key:"sortCryptoTransactions",value:function(){this.crypto_transactions=this.crypto_transactions.sort((function(e,t){return t.submit_date-e.submit_date}))}},{key:"cancelCryptoTransaction",value:(t=hs(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.cancelCryptoTransaction(t).then((function(e){return e.error?Promise.reject(e.error):(r.setSelectedCryptoTransactionId(""),r.setIsCryptoTransactionsCancelModalVisible(!1),Promise.resolve(e))}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setSelectedCryptoTransactionId",value:function(e){this.selected_crypto_transaction_id=e}},{key:"setIsCryptoTransactionsCancelModalVisible",value:function(e){this.is_crypto_transactions_cancel_modal_visible=e}},{key:"showCryptoTransactionsCancelModal",value:function(e){this.setSelectedCryptoTransactionId(e),this.setIsCryptoTransactionsCancelModalVisible(!0)}},{key:"hideCryptoTransactionsCancelModal",value:function(){this.setSelectedCryptoTransactionId(""),this.setIsCryptoTransactionsCancelModalVisible(!1)}},{key:"setSelectedCryptoStatus",value:function(e){this.selected_crypto_status=e}},{key:"setSelectedCryptoStatusDescription",value:function(e){this.selected_crypto_status_description=e}},{key:"setIsCryptoTransactionsStatusModalVisible",value:function(e){this.is_crypto_transactions_status_modal_visible=e}},{key:"showCryptoTransactionsStatusModal",value:function(e,t){this.setSelectedCryptoStatusDescription(e),this.setSelectedCryptoStatus(t),this.setIsCryptoTransactionsStatusModalVisible(!0)}},{key:"hideCryptoTransactionsStatusModal",value:function(){this.setIsCryptoTransactionsStatusModalVisible(!1)}},{key:"setLoading",value:function(e){this.is_loading=e}},{key:"setIsCryptoTransactionsVisible",value:function(e){this.is_crypto_transactions_visible=e}}]),e}(),ns=_s(os.prototype,"crypto_transactions",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),is=_s(os.prototype,"is_crypto_transactions_cancel_modal_visible",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),as=_s(os.prototype,"is_crypto_transactions_status_modal_visible",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ss=_s(os.prototype,"is_crypto_transactions_visible",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),cs=_s(os.prototype,"is_loading",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),us=_s(os.prototype,"selected_crypto_transaction_id",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ps=_s(os.prototype,"selected_crypto_status",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ls=_s(os.prototype,"selected_crypto_status_description",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_s(os.prototype,"onMount",[Fa],Object.getOwnPropertyDescriptor(os.prototype,"onMount"),os.prototype),_s(os.prototype,"unsubscribeCryptoTransactions",[Va],Object.getOwnPropertyDescriptor(os.prototype,"unsubscribeCryptoTransactions"),os.prototype),_s(os.prototype,"getCryptoTransactions",[Ba],Object.getOwnPropertyDescriptor(os.prototype,"getCryptoTransactions"),os.prototype),_s(os.prototype,"setCryptoTransactionsHistory",[Na],Object.getOwnPropertyDescriptor(os.prototype,"setCryptoTransactionsHistory"),os.prototype),_s(os.prototype,"updateCryptoTransactions",[Ha],Object.getOwnPropertyDescriptor(os.prototype,"updateCryptoTransactions"),os.prototype),_s(os.prototype,"sortCryptoTransactions",[Ua],Object.getOwnPropertyDescriptor(os.prototype,"sortCryptoTransactions"),os.prototype),_s(os.prototype,"cancelCryptoTransaction",[qa],Object.getOwnPropertyDescriptor(os.prototype,"cancelCryptoTransaction"),os.prototype),_s(os.prototype,"setSelectedCryptoTransactionId",[Ga],Object.getOwnPropertyDescriptor(os.prototype,"setSelectedCryptoTransactionId"),os.prototype),_s(os.prototype,"setIsCryptoTransactionsCancelModalVisible",[Xa],Object.getOwnPropertyDescriptor(os.prototype,"setIsCryptoTransactionsCancelModalVisible"),os.prototype),_s(os.prototype,"showCryptoTransactionsCancelModal",[Ka],Object.getOwnPropertyDescriptor(os.prototype,"showCryptoTransactionsCancelModal"),os.prototype),_s(os.prototype,"hideCryptoTransactionsCancelModal",[Ja],Object.getOwnPropertyDescriptor(os.prototype,"hideCryptoTransactionsCancelModal"),os.prototype),_s(os.prototype,"setSelectedCryptoStatus",[Ya],Object.getOwnPropertyDescriptor(os.prototype,"setSelectedCryptoStatus"),os.prototype),_s(os.prototype,"setSelectedCryptoStatusDescription",[$a],Object.getOwnPropertyDescriptor(os.prototype,"setSelectedCryptoStatusDescription"),os.prototype),_s(os.prototype,"setIsCryptoTransactionsStatusModalVisible",[Qa],Object.getOwnPropertyDescriptor(os.prototype,"setIsCryptoTransactionsStatusModalVisible"),os.prototype),_s(os.prototype,"showCryptoTransactionsStatusModal",[Za],Object.getOwnPropertyDescriptor(os.prototype,"showCryptoTransactionsStatusModal"),os.prototype),_s(os.prototype,"hideCryptoTransactionsStatusModal",[es],Object.getOwnPropertyDescriptor(os.prototype,"hideCryptoTransactionsStatusModal"),os.prototype),_s(os.prototype,"setLoading",[ts],Object.getOwnPropertyDescriptor(os.prototype,"setLoading"),os.prototype),_s(os.prototype,"setIsCryptoTransactionsVisible",[rs],Object.getOwnPropertyDescriptor(os.prototype,"setIsCryptoTransactionsVisible"),os.prototype),os);function Us(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function qs(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){Us(i,o,n,a,s,"next",e)}function s(e){Us(i,o,n,a,s,"throw",e)}a(void 0)}))}}function Gs(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Xs(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ks(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Js=(ms=y.action.bound,vs=y.action.bound,gs=y.action.bound,ws=y.action.bound,Os=y.action.bound,ks=y.action.bound,Ps=y.action.bound,Cs=y.action.bound,Ts=y.action.bound,Ss=y.action.bound,As=y.action.bound,Ds=y.action.bound,js=y.action.bound,Is=y.action.bound,xs=y.action.bound,zs=function(){function e(t){var r=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gs(this,"blockchain_address",Rs,this),Gs(this,"container",Es,this),Gs(this,"error",Ms,this),Gs(this,"is_10k_withdrawal_limit_reached",Ls,this),Gs(this,"is_withdraw_confirmed",Ws,this),Gs(this,"verification",Fs,this),Gs(this,"withdraw_amount",Vs,this),Gs(this,"max_withdraw_amount",Bs,this),Gs(this,"crypto_config",Ns,this),this.root_store=o,this.WS=r}var t,r,o,n,i;return function(e,t,r){t&&Xs(e.prototype,t),r&&Xs(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"setIsWithdrawConfirmed",value:function(e){var t=this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount;this.is_withdraw_confirmed=e,e&&this.setWithdrawAmount(t),!e&&this.verification&&this.verification.clearVerification()}},{key:"setWithdrawAmount",value:function(e){this.withdraw_amount=e}},{key:"requestWithdraw",value:(i=qs(regeneratorRuntime.mark((function e(t){var r,o,n,i,a,s,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store,o=r.client,n=r.modules,i=n.cashier,a=i.crypto_fiat_converter,s=i.error_dialog,o.is_logged_in){e.next=4;break}return e.abrupt("return");case 4:if(a.converter_from_amount){e.next=7;break}return a.setConverterFromError((0,k.localize)("This field is required.")),e.abrupt("return");case 7:return e.next=9,this.WS.cryptoWithdraw({address:this.blockchain_address,amount:+a.converter_from_amount,verification_code:t,dry_run:1}).then((function(e){e.error?s.setErrorMessage(e.error.message):c.saveWithdraw(t)}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"saveWithdraw",value:(n=qs(regeneratorRuntime.mark((function e(t){var r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount,this.error.setErrorMessage(""),e.next=4,this.WS.cryptoWithdraw({address:this.blockchain_address,amount:+r,verification_code:t}).then((function(e){e.error?(o.error.setErrorMessage(e.error),t&&o.verification.clearVerification(),o.resetWithrawForm()):o.setIsWithdrawConfirmed(!0)}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"resetWithrawForm",value:function(){var e=this.root_store.modules.cashier.crypto_fiat_converter,t=e.setConverterFromAmount,r=e.setConverterToAmount;this.setBlockchainAddress(""),t(""),r(""),this.verification.clearVerification()}},{key:"setBlockchainAddress",value:function(e){this.blockchain_address=e}},{key:"willMountWithdraw",value:function(e){e&&this.verification.clearVerification()}},{key:"onMountWithdraw",value:(o=qs(regeneratorRuntime.mark((function e(t){var r,o,n,i,a,s,c,u,p,l,f,y,h,d,b,_,m,v,g,w,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.root_store,o=r.client,n=r.modules,i=n.cashier.general_store,a=i.active_container,s=i.is_crypto,c=i.onMountCommon,u=i.setLoading,p=i.setOnRemount,l=n.cashier.iframe,f=l.checkIframeLoaded,y=l.clearTimeoutCashierUrl,h=l.clearIframe,d=l.is_session_timeout,b=l.setContainerHeight,_=l.setIframeUrl,m=l.setSessionTimeout,v=l.setTimeoutCashierUrl,g=o.is_virtual,w=a,p(this.onMountWithdraw),e.next=8,c();case 8:if(this.error.setErrorMessage(""),b(0),h(),u(!0),d){e.next=15;break}return f(),e.abrupt("return");case 15:if(_(""),t&&!g){e.next=19;break}return u(!1),e.abrupt("return");case 19:return e.next=21,this.WS.authorized.cashier(a,{verification_code:t});case 21:if(O=e.sent,w===a){e.next=25;break}return u(!1),e.abrupt("return");case 25:if(!O.error){e.next=33;break}this.error.handleCashierError(O.error),u(!1),m(!0),y(),t&&this.verification.clearVerification(),e.next=43;break;case 33:if(!s){e.next=37;break}u(!1),e.next=43;break;case 37:return e.next=39,f();case 39:u(!1),_(O.cashier),m(!1),v();case 43:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"onMountCryptoWithdraw",value:(r=qs(regeneratorRuntime.mark((function e(t){var r,o,n,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store.modules.cashier,o=r.crypto_fiat_converter,n=r.general_store,i=r.iframe,n.setLoading(!0),!/^\w{8,128}$/.test(t)){e.next=9;break}return e.next=6,this.WS.cryptoWithdraw({address:this.blockchain_address,amount:+o.converter_from_amount,verification_code:t,dry_run:1});case 6:a=e.sent,e.next=10;break;case 9:a={error:{code:"InvalidToken",message:"Your token has expired or is invalid."}};case 10:if("InvalidToken"!==a.error.code){e.next=18;break}this.error.handleCashierError(a.error),n.setLoading(!1),i.setSessionTimeout(!0),i.clearTimeoutCashierUrl(),t&&this.verification.clearVerification(),e.next=31;break;case 18:return e.next=20,this.WS.cryptoConfig();case 20:if(e.t1=s=e.sent,e.t0=null===e.t1,e.t0){e.next=24;break}e.t0=void 0===s;case 24:if(!e.t0){e.next=28;break}e.t2=void 0,e.next=29;break;case 28:e.t2=s.crypto_config;case 29:this.crypto_config=e.t2,n.setLoading(!1);case 31:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"is_withdrawal_locked",get:function(){var e,t=this.root_store.client,r=t.account_status.authentication;if(null===(e=t.account_status)||void 0===e||!e.status)return!1;var o=r.needs_verification.includes("identity"),n=this.error.is_ask_authentication&&o;return t.is_withdrawal_lock||n||this.error.is_ask_financial_risk_approval}},{key:"setMaxWithdrawAmount",value:function(e){this.max_withdraw_amount=e}},{key:"check10kLimit",value:(t=qs(regeneratorRuntime.mark((function e(){var t,r,o,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.root_store.client,e.next=3,o.getLimits();case 3:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===t;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=null===(r=t.get_limits)||void 0===r?void 0:r.remainder;case 12:n=e.t2,this.setMaxWithdrawAmount(n),i=(0,h.getMinWithdrawal)(o.currency),a=!!(void 0!==n&&+n<i),this.set10kLimitation(a);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"set10kLimitation",value:function(e){this.is_10k_withdrawal_limit_reached=e}},{key:"setWithdrawPercentageSelectorResult",value:function(e){var t=this.root_store,r=t.client,o=t.modules.cashier,n=o.crypto_fiat_converter,i=o.general_store,a=r.currency,s=r.current_fiat_currency;e>0?(n.setConverterFromAmount(e),this.validateWithdrawFromAmount(),n.onChangeConverterFromAmount({target:{value:e}},a,s||"USD")):n.resetConverter(),n.setIsTimerVisible(!1),i.percentageSelectorSelectionStatus(!1)}},{key:"validateWithdrawFromAmount",value:function(){var e,t,r,o="",n=this.root_store,i=n.client,a=n.modules,s=i.balance,c=i.currency,u=a.cashier,p=u.crypto_fiat_converter,l=u.error_dialog,f=p.converter_from_amount,y=p.setConverterFromError,d=l.openReadMoreDialog,b=null===(e=this.crypto_config)||void 0===e||null===(t=e.currencies_config)||void 0===t||null===(r=t[c])||void 0===r?void 0:r.minimum_withdrawal,_=+this.max_withdraw_amount>+s?+s:+this.max_withdraw_amount,m=(0,h.formatMoney)(c,s,!0),v=(0,h.formatMoney)(c,b,!0),g=(0,h.formatMoney)(c,_,!0);if(f){var w=(0,h.validNumber)(f,{type:"float",decimals:(0,h.getDecimalPlaces)(c)}),P=w.is_ok,C=w.message;if(P?+s<+f?o=(0,k.localize)("Insufficient funds"):+s<+b?o=(0,k.localize)("Your balance ({{format_balance}} {{currency}}) is less than the current minimum withdrawal allowed ({{format_min_withdraw_amount}} {{currency}}). Please top up your account to continue with your withdrawal.",{format_balance:m,currency:c,format_min_withdraw_amount:v}):(+f<+b||+f>+_)&&(o=(0,k.localize)("The current allowed withdraw amount is {{format_min_withdraw_amount}} to {{format_max_withdraw_amount}} {{currency}}",{format_min_withdraw_amount:v,format_max_withdraw_amount:g,currency:c})):o=C,(0,h.isMobile)()&&o.length>35){var T=o;o=O().createElement(Xt.ReadMore,{expand_text:(0,k.localize)("more"),text:T,collapse_length:28,openDialog:function(){return d(T,(0,k.localize)("OK"))},show_dialog:!0})}}y(o)}},{key:"validateWithdrawToAmount",value:function(){var e="",t=this.root_store,r=t.client,o=t.modules,n=r.current_fiat_currency,i=o.cashier.crypto_fiat_converter,a=i.converter_to_amount,s=i.setConverterToError;if(a){var c=(0,h.validNumber)(a,{type:"float",decimals:(0,h.getDecimalPlaces)(n)}),u=c.is_ok,p=c.message;u||(e=p)}s(e)}},{key:"account_platform_icon",get:function(){var e=this.root_store.client,t=e.account_list,r=e.loginid;return t.find((function(e){return r===e.loginid})).icon}}]),e}(),Rs=Ks(zs.prototype,"blockchain_address",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Es=Ks(zs.prototype,"container",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.containers.withdraw}}),Ms=Ks(zs.prototype,"error",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Re}}),Ls=Ks(zs.prototype,"is_10k_withdrawal_limit_reached",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Ws=Ks(zs.prototype,"is_withdraw_confirmed",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fs=Ks(zs.prototype,"verification",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ra({root_store:this.root_store,WS:this.WS})}}),Vs=Ks(zs.prototype,"withdraw_amount",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Bs=Ks(zs.prototype,"max_withdraw_amount",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ns=Ks(zs.prototype,"crypto_config",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ks(zs.prototype,"setIsWithdrawConfirmed",[ms],Object.getOwnPropertyDescriptor(zs.prototype,"setIsWithdrawConfirmed"),zs.prototype),Ks(zs.prototype,"setWithdrawAmount",[vs],Object.getOwnPropertyDescriptor(zs.prototype,"setWithdrawAmount"),zs.prototype),Ks(zs.prototype,"requestWithdraw",[gs],Object.getOwnPropertyDescriptor(zs.prototype,"requestWithdraw"),zs.prototype),Ks(zs.prototype,"saveWithdraw",[ws],Object.getOwnPropertyDescriptor(zs.prototype,"saveWithdraw"),zs.prototype),Ks(zs.prototype,"resetWithrawForm",[Os],Object.getOwnPropertyDescriptor(zs.prototype,"resetWithrawForm"),zs.prototype),Ks(zs.prototype,"setBlockchainAddress",[ks],Object.getOwnPropertyDescriptor(zs.prototype,"setBlockchainAddress"),zs.prototype),Ks(zs.prototype,"willMountWithdraw",[Ps],Object.getOwnPropertyDescriptor(zs.prototype,"willMountWithdraw"),zs.prototype),Ks(zs.prototype,"onMountWithdraw",[Cs],Object.getOwnPropertyDescriptor(zs.prototype,"onMountWithdraw"),zs.prototype),Ks(zs.prototype,"onMountCryptoWithdraw",[Ts],Object.getOwnPropertyDescriptor(zs.prototype,"onMountCryptoWithdraw"),zs.prototype),Ks(zs.prototype,"is_withdrawal_locked",[y.computed],Object.getOwnPropertyDescriptor(zs.prototype,"is_withdrawal_locked"),zs.prototype),Ks(zs.prototype,"setMaxWithdrawAmount",[Ss],Object.getOwnPropertyDescriptor(zs.prototype,"setMaxWithdrawAmount"),zs.prototype),Ks(zs.prototype,"check10kLimit",[As],Object.getOwnPropertyDescriptor(zs.prototype,"check10kLimit"),zs.prototype),Ks(zs.prototype,"set10kLimitation",[Ds],Object.getOwnPropertyDescriptor(zs.prototype,"set10kLimitation"),zs.prototype),Ks(zs.prototype,"setWithdrawPercentageSelectorResult",[js],Object.getOwnPropertyDescriptor(zs.prototype,"setWithdrawPercentageSelectorResult"),zs.prototype),Ks(zs.prototype,"validateWithdrawFromAmount",[Is],Object.getOwnPropertyDescriptor(zs.prototype,"validateWithdrawFromAmount"),zs.prototype),Ks(zs.prototype,"validateWithdrawToAmount",[xs],Object.getOwnPropertyDescriptor(zs.prototype,"validateWithdrawToAmount"),zs.prototype),Ks(zs.prototype,"account_platform_icon",[y.computed],Object.getOwnPropertyDescriptor(zs.prototype,"account_platform_icon"),zs.prototype),zs);function Ys(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $s(e,t,r){return t&&Ys(e.prototype,t),r&&Ys(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Qs=$s((function e(t){var r=t.root_store,o=t.WS;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.account_prompt_dialog=new g(r),this.account_transfer=new lt({root_store:r,WS:o}),this.crypto_fiat_converter=new Ot({root_store:r,WS:o}),this.deposit=new Vt({root_store:r,WS:o}),this.error_dialog=new Ut,this.error=new Re,this.general_store=new Xo({root_store:r,WS:o}),this.iframe=new Qo({root_store:r,WS:o}),this.onramp=new ui({root_store:r,WS:o}),this.payment_agent=new za({root_store:r,WS:o}),this.payment_agent_transfer=new fs({root_store:r,WS:o}),this.transaction_history=new Hs({root_store:r,WS:o}),this.verification=new ra({root_store:r,WS:o}),this.withdraw=new Js({root_store:r,WS:o})}))})(),f.default})())}}]);