"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["cfd"],{"./src/Modules/CFD/index.js":(e,t,a)=>{a.r(t),a.d(t,{CFDPasswordModal:()=>xt,CFDServerErrorDialog:()=>St,default:()=>Qt});var n=a("react"),r=a("react-router"),o=a("react-router-dom"),i=a("@deriv/components"),l=a("@deriv/shared"),c=a("@deriv/translations"),s=a("@deriv/account/dist/account/js/reset-trading-password-modal"),u=a.n(s),d=(a("@deriv/account/dist/account/css/reset-trading-password-modal.css"),a("./src/Stores/connect.js"));const _=function(e){var t=e.onClickSignup,a=e.platform;return n.createElement("div",{className:"cfd-dashboard__missing-real"},n.createElement("h1",{className:"cfd-dashboard__missing-real--heading"},a===l.CFD_PLATFORMS.MT5?n.createElement(c.Localize,{i18n_default_text:"You need a real account (fiat currency or cryptocurrency) in Deriv to create a real DMT5 account."}):n.createElement(c.Localize,{i18n_default_text:"To create a Deriv X real account, create a Deriv real account first."})),n.createElement(i.Button,{className:"cfd-dashboard__missing-real--button",onClick:t,type:"button",primary:!0},n.createElement("span",{className:"btn__text"},n.createElement(c.Localize,{i18n_default_text:"Create a Deriv account"}))))};var m=a("./src/templates/_common/components/loading.tsx");const f=function(){return n.createElement("div",{className:"cfd-real-accounts-display"},n.createElement(m.Z,null))};var p=a("../../node_modules/formik/dist/formik.esm.js"),g=a("@deriv/account/dist/account/js/file-uploader-container"),h=a.n(g),v=a("@deriv/account/dist/account/js/form-sub-header"),b=a.n(v),y=a("@deriv/account/dist/account/js/poa-expired"),w=a.n(y),E=a("@deriv/account/dist/account/js/poa-needs-review"),z=a.n(E),x=a("@deriv/account/dist/account/js/poa-verified"),S=a.n(x),M=a("@deriv/account/dist/account/js/poa-unverified"),D=a.n(M),T=a("@deriv/account/dist/account/js/poa-submitted"),C=a.n(T),N=a("@deriv/account/dist/account/js/poa-status-codes"),F=a.n(N),P=["maxLength","name","optional"],A=["citizen","tax_residence"];function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},I.apply(this,arguments)}function R(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var B=function(e){var t=e.maxLength,a=e.name,r=e.optional,o=void 0!==r&&r,l=R(e,P);return n.createElement(p.gN,{name:a},(function(e){var r=e.field,c=e.form,s=c.errors,u=c.touched;return n.createElement(i.Input,I({},r,{type:"text",required:!o,name:a,autoComplete:"off",maxLength:t||"30",error:u[r.name]&&s[r.name]},l))}))};const U=function(e){var t,a,r=e.onSave,o=e.is_fully_authenticated,s=e.is_loading,u=e.landing_company,d=e.residence_list,_=e.onCancel,m=e.onSubmit,f=e.value,g=e.index,h=e.form_error,v=[{text:(0,c.localize)("Hedging"),value:"Hedging"},{text:(0,c.localize)("Income Earning"),value:"Income Earning"},{text:(0,c.localize)("Speculative"),value:"Speculative"},{text:(0,c.localize)("Peer-to-peer exchange"),value:"Peer-to-peer exchange"}],y=!(null===(t=null==u||null===(a=u.config)||void 0===a?void 0:a.tax_details_required)||void 0===t||!t),w=function(e){r(g,e),_()};return 0===d.length||s?n.createElement(i.Loading,{is_fullscreen:!1}):n.createElement(p.J9,{initialValues:{citizen:f.citizen,tax_residence:f.tax_residence,tax_identification_number:f.tax_identification_number,account_opening_reason:f.account_opening_reason},validateOnMount:!0,validateOnChange:!0,validateOnBlur:!0,validate:function(e){return function(e){var t,a=e.values,n=e.residence_list,r=e.account_opening_reason,o=e.is_tin_required,i=L(n.filter((function(e){return e.text===a.tax_residence&&e.tin_format})),1)[0],l=L(null!==(t=null==i?void 0:i.tin_format)&&void 0!==t?t:[],1)[0],s=l||"^[A-Za-z0-9./s-]{0,25}$",u={citizen:[function(e){return!!e},function(e){return n.map((function(e){return e.text})).includes(e)}],tax_residence:[function(e){return!!e},function(e){return n.map((function(e){return e.text})).includes(e)}],tax_identification_number:[function(e){return!(!a.tax_residence&&o||l)||!!e},function(e){return!s||e.match(s)}],account_opening_reason:[function(e){return!!e},function(e){return r.map((function(e){return e.value})).includes(e)}]},d={citizen:(0,c.localize)("Citizenship"),tax_residence:(0,c.localize)("Tax residence"),tax_identification_number:(0,c.localize)("Tax identification number"),account_opening_reason:(0,c.localize)("Account opening reason")},_={};return Object.entries(u).forEach((function(e){var t,n=L(e,2),r=n[0],o=n[1].findIndex((function(e){return!e(a[r])}));-1!==o&&(_[r]=(t=d[r],[(0,c.localize)("{{field_name}} is required",{field_name:t}),(0,c.localize)("{{field_name}} is not properly formatted.",{field_name:t})])[o])})),_}({values:e,residence_list:d,account_opening_reason:v,is_tin_required:y})},onSubmit:function(e,t){return function(e,t,a,n,r,o){var i=e.citizen,l=e.tax_residence,c=R(e,A),s=function(e,t,a){var n,r;return a.forEach((function(a){a.text===e&&(n=a),a.text===t&&(r=a)})),{citizen:n,tax_residence:r}}(i,l,o),u=s.citizen,d=s.tax_residence,_=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({citizen:u&&u.value?u.value:"",tax_residence:d&&d.value?d.value:""},c);n(a,_,t.setSubmitting,r)}(e,t,g,m,!(0,l.isDeepEqual)(f,e),d)}},(function(e){var t=e.handleSubmit,a=e.isSubmitting,r=e.handleChange,s=e.handleBlur,u=e.errors,_=e.touched,m=e.values,g=e.setFieldValue,y=e.isValid,E=_.citizen&&u.citizen,z=_.tax_residence&&u.tax_residence,x=_.account_opening_reason&&u.account_opening_reason,S=!(!f.citizen||!o),M=!(!f.tax_residence||!o),D=function(e,t){var a=e.value?e.text:"";g(t,a,!0)};return n.createElement(i.AutoHeightWrapper,{default_height:200,height_offset:(0,l.isDesktop)()?148:null},(function(e){var o=e.height,u=e.setRef;return n.createElement("form",{className:"cfd-financial-stp-modal__form",ref:u,onSubmit:t,autoComplete:"off"},n.createElement(i.Div100vhContainer,{className:"details-form",max_autoheight_offset:"179px",is_disabled:(0,l.isDesktop)()},n.createElement(i.Text,{as:"p",size:"xxxs",align:"center",className:"details-form__description"},n.createElement(c.Localize,{i18n_default_text:"Any information you provide is confidential and will be used for verification purposes only."})),n.createElement(i.ThemedScrollbars,{height:o,is_bypassed:(0,l.isMobile)()},n.createElement("div",{className:"details-form__elements"},n.createElement(b(),{title:(0,c.localize)("Details")}),n.createElement("fieldset",{className:"account-form__fieldset"},n.createElement(i.DesktopWrapper,null,n.createElement(p.gN,{name:"citizen"},(function(e){var t=e.field;return n.createElement(i.Autocomplete,I({},t,{id:"real_mt5_citizenship","data-lpignore":"true",autoComplete:"off",type:"text",label:(0,c.localize)("Citizenship"),error:E,disabled:S,list_items:d,onItemSelection:function(e){return D(e,"citizen")},list_portal_id:"modal_root",required:!0}))}))),n.createElement(i.MobileWrapper,null,n.createElement(i.SelectNative,{placeholder:(0,c.localize)("Please select"),label:(0,c.localize)("Citizenship"),value:m.citizen,list_items:d,error:E,disabled:S,use_text:!0,onChange:function(e){return g("citizen",e.target.value,!0)},required:!0,should_hide_disabled_options:!1}))),n.createElement(b(),{title:(0,c.localize)("Tax information")}),n.createElement("fieldset",{className:"account-form__fieldset"},n.createElement(i.DesktopWrapper,null,n.createElement(p.gN,{name:"tax_residence"},(function(e){var t=e.field;return n.createElement(i.Autocomplete,I({id:"real_mt5_tax_residence","data-lpignore":"true",type:"text",autoComplete:"off",label:(0,c.localize)("Tax residence"),error:z,disabled:M,list_items:d,onItemSelection:function(e){return D(e,"tax_residence")},list_portal_id:"modal_root"},t))}))),n.createElement(i.MobileWrapper,null,n.createElement(i.SelectNative,{placeholder:(0,c.localize)("Please select"),label:(0,c.localize)("Tax residence"),value:m.tax_residence,error:z,disabled:M,list_items:d,use_text:!0,onChange:function(e){return g("tax_residence",e.target.value,!0)},required:!0}))),n.createElement("fieldset",{className:"account-form__fieldset"},n.createElement(B,{id:"real_mt5_tax_identification_number",name:"tax_identification_number",label:(0,c.localize)("Tax identification number"),placeholder:(0,c.localize)("Tax identification number"),value:m.tax_identification_number,onBlur:s,optional:!0})),n.createElement(b(),{title:(0,c.localize)("Account opening reason")}),n.createElement(p.gN,{name:"account_opening_reason"},(function(e){var t=e.field;return n.createElement(n.Fragment,null,n.createElement(i.DesktopWrapper,null,n.createElement(i.Dropdown,I({},t,{placeholder:(0,c.localize)("Account opening reason"),is_align_text_left:!0,name:t.name,list:v,value:m.account_opening_reason,onChange:r,handleBlur:s,error:x,list_portal_id:"modal_root"}))),n.createElement(i.MobileWrapper,null,n.createElement(i.SelectNative,I({},t,{placeholder:(0,c.localize)("Please select"),name:t.name,label:(0,c.localize)("Account opening reason"),list_items:v,value:m.account_opening_reason,error:x,onChange:function(e){r(e),g("account_opening_reason",e.target.value,!0)}}))))}))))),n.createElement(i.Modal.Footer,{is_bypassed:(0,l.isMobile)()},h&&n.createElement(i.FormSubmitErrorMessage,{message:h}),n.createElement(i.FormSubmitButton,{cancel_label:(0,c.localize)("Previous"),is_disabled:a||!y,is_absolute:(0,l.isMobile)(),label:(0,c.localize)("Next"),onCancel:function(){return w(m)}})))}))}))};var W,V=["onSave","onCancel","index","onSubmit","refreshNotifications"],X=["document_file"];function q(e,t,a,n,r,o,i){try{var l=e[o](i),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){Y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function J(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const Z=function(e){var t=e.onSave,a=e.onCancel,r=e.index,o=e.onSubmit,s=e.refreshNotifications,u=J(e,V),d=n.useRef(null),_=K(n.useState(!0),2),m=_[0],f=_[1],g=K((0,i.useStateCallback)({poa_status:"none",resubmit_poa:!1,has_poi:!1,form_error:""}),2),v=g[0],y=g[1],E=K((0,i.useStateCallback)({files:[],error_message:null}),2),x=E[0],M=E[1],T=K(n.useState({}),2),N=T[0],P=T[1],A=function(e){t(r,e),a()},k=function(){var e,a=(e=regeneratorRuntime.mark((function e(a,n){var i,s,u,d,_,m,f,p,g,h,b,w,E,z,S,M;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.document_file,i=J(a,X),n.setSubmitting(!0),e.next=4,l.WS.setSettings(i);case 4:if(!(s=e.sent).error){e.next=9;break}return y(H(H({},v),{form_error:s.error.message})),n.setSubmitting(!1),e.abrupt("return");case 9:return e.next=11,l.WS.authorized.storage.getSettings();case 11:if(u=e.sent,d=u.error,_=u.get_settings,!d){e.next=17;break}return y(H(H({},v),{form_error:d.message})),e.abrupt("return");case 17:return m=_._address_line_1,f=_._address_line_2,p=_._address_city,g=_._address_state,h=_._address_postcode,P({_address_line_1:m,_address_line_2:f,_address_city:p,_address_postcode:h,_address_state:g}),y(H(H({},v),{form_error:""})),e.prev=20,e.next=23,null===(b=W.current)||void 0===b?void 0:b.upload();case 23:if(!(w=e.sent)||null==w||!w.warning){e.next=28;break}return y(H(H({},v),{form_error:w.warning})),n.setSubmitting(!1),e.abrupt("return");case 28:return e.next=30,l.WS.authorized.storage.getAccountStatus();case 30:if(E=e.sent,z=E.error,S=E.get_account_status,!z){e.next=37;break}return y(H(H({},v),{form_error:d.message})),n.setSubmitting(!1),e.abrupt("return");case 37:(M=S.authentication.identity)&&"none"===M.status?(y(H(H({},v),{form_error:(0,c.localize)("Identity confirmation failed. You will be redirected to the previous step.")})),setTimeout((function(){A(_)}),3e3)):(void 0,void 0,D=x.files,T=x.error_message,o(r,H(H(H({},N),v),{document_file:D,file_error_message:T}))),e.next=45;break;case 42:e.prev=42,e.t0=e.catch(20),y(H(H({},v),{form_error:e.t0.message}));case 45:n.setSubmitting(!1),t(r,a),o(r,a,n.setSubmitting);case 48:case"end":return e.stop()}var D,T}),e,null,[[20,42]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){q(o,n,r,i,l,"next",e)}function l(e){q(o,n,r,i,l,"throw",e)}i(void 0)}))});return function(e,t){return a.apply(this,arguments)}}();n.useEffect((function(){l.WS.authorized.getAccountStatus().then((function(e){l.WS.wait("states_list").then((function(){var t=e.get_account_status,a=null==t?void 0:t.authentication,n=a.document,r=a.identity,o=!(!r||"none"!==r.status);y(H(H({},v),{poa_status:null==n?void 0:n.status,__has_poi:o}),(function(){f(!1),s()}))}))}))}),[s,y]);var O=function(e,t){return v.poa_status!==F().verified&&0!==Object.keys(t).length},L=function(){y(H(H({},v),{resubmit_poa:!0}))},j=u.states_list,I=u.value,R=I.address_line_1,U=I.address_line_2,$=I.address_city,Y=I.address_state,G=I.address_postcode,Z=v.form_error,Q=v.has_poi,ee=v.poa_status,te=v.resubmit_poa,ae=v.submitted_poa,ne=!m&&(te||ee===F().none);return n.createElement(p.J9,{initialValues:{address_line_1:R,address_line_2:U,address_city:$,address_state:Y,address_postcode:G,document_file:x.files},validateOnMount:!0,validate:function(e){if([F().verified,F().pending].includes(v.poa_status))return{};var t={address_line_1:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,l.validAddress)(e)},function(e){return(0,l.validLength)(e,{max:70})}],address_line_2:[function(e){return!e||(0,l.validAddress)(e)},function(e){return(0,l.validLength)(e,{max:70})}],address_city:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,l.validLength)(e,{min:1,max:35})},function(e){return(0,l.validLetterSymbol)(e)}],address_state:[function(e){return(0,l.validLength)(e,{max:35})}],address_postcode:[function(e){return(0,l.validLength)(e,{max:20})},function(e){return!e||(0,l.validPostCode)(e)}]},a={address_line_1:[(0,c.localize)("First line of address is required"),(0,c.localize)("First line of address is not in a proper format."),(0,c.localize)("This should not exceed {{max}} characters.",{max:70})],address_line_2:[(0,c.localize)("Second line of address is not in a proper format."),(0,c.localize)("This should not exceed {{max}} characters.",{max:70})],address_city:[(0,c.localize)("Town/City is required."),(0,c.localize)("This should not exceed {{max_number}} characters.",{max_number:35}),(0,c.localize)("Town/City is not in a proper format.")],address_state:[(0,c.localize)("State/Province is not in a proper format.")],address_postcode:[(0,c.localize)("This should not exceed {{max_number}} characters.",{max_number:20}),(0,c.localize)("Only letters, numbers, space, and hyphen are allowed.")]},n={};return Object.entries(t).forEach((function(t){var r=K(t,2),o=r[0],i=r[1].findIndex((function(t){return!t(e[o])}));-1!==i&&(n[o]=a[o][i])})),n},enableReinitialize:!0,onSubmit:k,innerRef:d},(function(e){e.dirty;var a=e.errors,o=e.handleSubmit,s=e.isSubmitting,u=e.handleBlur,d=e.handleChange,_=e.setFieldTouched,f=e.setFieldValue,g=e.values,v=e.touched;return n.createElement(i.AutoHeightWrapper,{default_height:200},(function(e){var y=e.setRef,E=e.height;return n.createElement("form",{ref:y,onSubmit:o,className:"cfd-proof-of-address"},n.createElement(i.Div100vhContainer,{className:"details-form",height_offset:"100px",is_disabled:(0,l.isDesktop)()},m&&n.createElement(i.Loading,{is_fullscreen:!1}),ne&&n.createElement(i.ThemedScrollbars,{autohide:!1,height:"".concat(E-77,"px"),is_bypassed:(0,l.isMobile)()},n.createElement("div",{className:"cfd-proof-of-address__field-area"},n.createElement(b(),{title:(0,c.localize)("Address information")}),n.createElement(B,{name:"address_line_1",maxLength:255,required:!0,label:(0,c.localize)("First line of address*"),placeholder:(0,c.localize)("First line of address*"),onBlur:u}),n.createElement(B,{name:"address_line_2",maxLength:255,label:(0,c.localize)("Second line of address (optional)"),optional:!0,placeholder:(0,c.localize)("Second line of address"),onBlur:u}),n.createElement("div",{className:"cfd-proof-of-address__inline-fields"},n.createElement(B,{maxLength:255,name:"address_city",required:!0,label:(0,c.localize)("Town/City*"),placeholder:(0,c.localize)("Town/City*"),onBlur:u}),n.createElement("fieldset",{className:"address-state__fieldset"},(null==j?void 0:j.length)>0?n.createElement(n.Fragment,null,n.createElement(i.DesktopWrapper,null,n.createElement(p.gN,{name:"address_state"},(function(e){var t=e.field;return n.createElement(i.Dropdown,{id:"address_state",className:"address_state-dropdown",is_align_text_left:!0,list:j,error:v[t.name]&&a[t.name],name:"address_state",value:g.address_state,onChange:d,placeholder:(0,c.localize)("State/Province"),list_portal_id:"modal_root"})}))),n.createElement(i.MobileWrapper,null,n.createElement(i.SelectNative,{label:(0,c.localize)("State/Province"),value:g.address_state,list_items:j,error:v.address_state&&a.address_state,onChange:function(e){d(e),f("address_state",e.target.value,!0)}}))):n.createElement(B,{name:"address_state",label:(0,c.localize)("State/Province"),placeholder:(0,c.localize)("State/Province"),value:g.address_state,onBlur:u})),n.createElement(B,{maxLength:255,name:"address_postcode",label:(0,c.localize)("Postal/ZIP code"),placeholder:(0,c.localize)("Postal/ZIP code"),onBlur:u,optional:!0})),n.createElement("div",{className:"cfd-proof-of-address__file-upload"},n.createElement(h(),{onRef:function(e){return W=e},getSocket:l.WS.getSocket,onFileDrop:function(e){return function(e,a,n,o,i){n("document_file",!0),o("document_file",e),M({files:e,error_message:a},(function(){"function"==typeof t&&t(r,H(H({},i),{document_file:e}))}))}(e.files,e.error_message,_,f,g)}})))),ee!==F().none&&!te&&n.createElement(i.ThemedScrollbars,{height:E,is_bypassed:(0,l.isMobile)()},ae&&n.createElement(C(),{is_description_enabled:!1,has_poi:Q}),ee===F().pending&&n.createElement(z(),{is_description_enabled:!1}),ee===F().verified&&n.createElement(S(),{is_description_enabled:!1,has_poi:Q}),ee===F().expired&&n.createElement(w(),{onClick:L}),(ee===F().rejected||ee===F().suspected)&&n.createElement(D(),null)),n.createElement(i.Modal.Footer,{is_bypassed:(0,l.isMobile)()},(ee===F().verified||ne)&&n.createElement(i.FormSubmitButton,{has_cancel:!0,cancel_label:(0,c.localize)("Previous"),is_disabled:O(0,a)||ee!==F().verified&&x.files&&x.files.length<1||!!x.error_message,label:ee===F().verified?(0,c.localize)("Submit"):(0,c.localize)("Next"),is_absolute:(0,l.isMobile)(),is_loading:s,form_error:Z,onCancel:function(){return A(g)}}))))}))}))};var Q=a("@deriv/account/dist/account/js/proof-of-identity-container"),ee=a.n(Q),te=["authentication_status","form_error","index","onCancel","onSubmit","value"];function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ae.apply(this,arguments)}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const re=(0,d.$j)((function(e){var t=e.client,a=e.common,n=e.notifications;return{account_status:t.account_status,app_routing_history:a.app_routing_history,fetchResidenceList:t.fetchResidenceList,is_switching:t.is_switching,is_virtual:t.is_virtual,refreshNotifications:n.refreshNotifications,routeBackInApp:a.routeBackInApp,should_allow_authentication:t.should_allow_authentication}}))((function(e){var t=e.authentication_status,a=e.form_error,r=e.index,o=e.onCancel,s=e.onSubmit,u=e.value,d=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,te),_=t.identity_status,m=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.useState("none"),2),f=m[0],g=m[1],h=n.useCallback((function(){var e={};return["pending"].includes(f)&&["pending","verified"].includes(_)||(e.poi_state=!0),e}),[f,_]),v=!(["pending"].includes(f)||["pending","verified"].includes(_));return n.createElement(p.J9,{initialValues:{poi_state:u.poi_state},validate:h,onSubmit:function(e,t){return s(r,{poi_state:f},t.setSubmitting)}},(function(e){var t=e.handleSubmit;return n.createElement(i.AutoHeightWrapper,{default_height:200},(function(e){var u=e.setRef,_=e.height;return n.createElement("form",{ref:u,className:"cfd-proof-of-identity",onSubmit:t},n.createElement("div",{className:"details-form"},n.createElement("input",{type:"hidden",name:"poi_state",value:f,readOnly:!0}),n.createElement(i.Div100vhContainer,{className:"cfd-proof-of-identity__fields",height_offset:"180px",is_disabled:(0,l.isDesktop)()},n.createElement(ee(),ae({},d,{height:_,is_from_external:!0,onStateChange:function(e){return g(e)}}))),n.createElement(i.Modal.Footer,{is_bypassed:(0,l.isMobile)()},n.createElement(i.FormSubmitButton,{has_cancel:!0,cancel_label:(0,c.localize)("Previous"),is_disabled:v,is_absolute:(0,l.isMobile)(),label:(0,c.localize)("Next"),onCancel:o,form_error:a,onClick:function(){v||s(r,{poi_state:f},!1)}}))))}))}))}));function oe(){return oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},oe.apply(this,arguments)}function ie(e,t,a,n,r,o,i){try{var l=e[o](i),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function le(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){ie(o,n,r,i,l,"next",e)}function l(e){ie(o,n,r,i,l,"throw",e)}i(void 0)}))}}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const ue=(0,d.$j)((function(e){var t=e.client,a=e.modules.cfd,n=e.notifications;return{addNotificationByKey:n.addNotificationMessageByKey,authentication_status:t.authentication_status,get_settings:t.account_settings,client_email:t.email,is_fully_authenticated:t.is_fully_authenticated,landing_company:t.landing_company,openPendingDialog:a.openPendingDialog,refreshNotifications:n.refreshNotifications,removeNotificationMessage:n.removeNotificationMessage,removeNotificationByKey:n.removeNotificationByKey,residence_list:t.residence_list,states_list:t.states_list,storeProofOfAddress:a.storeProofOfAddress}}))((function(e){var t=e.refreshNotifications,a=ce(n.useState(0),2),r=a[0],o=a[1],s=ce(n.useState(""),2),u=s[0],d=s[1],_=ce(n.useState(!1),2),m=_[0],f=_[1],p=ce(n.useState([{header:{active_title:(0,c.localize)("Complete your personal details"),title:(0,c.localize)("Personal details")},body:U,form_value:{citizen:"",tax_residence:"",tax_identification_number:"",account_opening_reason:""},props:["residence_list","is_fully_authenticated","landing_company"]},{header:{active_title:(0,c.localize)("Complete your proof of identity"),title:(0,c.localize)("Proof of identity")},body:re,form_value:{poi_state:"unknown"},props:["addNotificationByKey","authentication_status","refreshNotifications","removeNotificationMessage","removeNotificationByKey"]},{header:{active_title:(0,c.localize)("Complete your proof of address"),title:(0,c.localize)("Proof of address")},body:Z,form_value:{address_line_1:e.get_settings.address_line_1,address_line_2:e.get_settings.address_line_2,address_city:e.get_settings.address_city,address_state:e.get_settings.address_state,address_postcode:e.get_settings.address_postcode,upload_file:""},props:["states_list","get_settings","storeProofOfAddress","refreshNotifications"]}]),2),g=p[0],h=p[1],v=r,b=function(){d(""),r+1<g.length?o(r+1):(e.openPendingDialog(),e.toggleModal())},y=function(){var t=le(regeneratorRuntime.mark((function t(a,n,r){var o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.length>3&&void 0!==i[3]&&!i[3]||0!==a){t.next=10;break}return t.next=4,l.WS.setSettings(n);case 4:if(!(o=t.sent).error){t.next=9;break}return d(o.error.message),r(!1),t.abrupt("return");case 9:w(r);case 10:if(0!==a){t.next=13;break}return t.next=13,l.WS.triggerMt5DryRun({email:e.client_email});case 13:x(a,n),b();case 15:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),w=function(){var e=le(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.WS.authorized.storage.getSettings();case 2:if(!(a=e.sent).error){e.next=7;break}return d(a.error.message),"function"==typeof t&&t(!1),e.abrupt("return");case 7:n=Object.assign([],g),a.get_settings.citizen&&(n[0].form_value.citizen=E(a.get_settings.citizen)),a.get_settings.tax_residence&&(n[0].form_value.tax_residence=E(a.get_settings.tax_residence)),a.get_settings.tax_identification_number&&(n[0].form_value.tax_identification_number=a.get_settings.tax_identification_number),a.get_settings.account_opening_reason&&(n[0].form_value.account_opening_reason=a.get_settings.account_opening_reason),h(n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.useEffect((function(){t()}),[g,t]);var E=function(t){var a=ce(e.residence_list.filter((function(e){return e.value===t})),1)[0];return(0,l.getPropertyValue)(a,["text"])||t};n.useEffect((function(){0===v&&(f(!0),w().then((function(){f(!1)})))}),[]);var z=function(e){return e?g[v][e]:g[v]},x=function(e,t){var a=Object.assign([],g);a[e].form_value=t,0===v&&(a[0].form_value.citizen=E(t.citizen),a[0].form_value.tax_residence=E(t.tax_residence)),h(a)},S=z("body"),M=z("form_value"),D=(z("props")||[]).reduce((function(t,a){return Object.assign(t,(n={},r=a,o=e[a],r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o}),{});return n.createElement(i.Div100vhContainer,{className:"cfd-financial-stp-modal",id:"real_mt5_financial_stp_account_opening",is_disabled:(0,l.isDesktop)(),height_offset:"40px"},n.createElement("div",{className:"cfd-financial-stp-modal__heading"},z()&&n.createElement(n.Fragment,null,n.createElement(i.DesktopWrapper,null,n.createElement(i.FormProgress,{steps:g,current_step:r})),n.createElement(i.MobileWrapper,null,n.createElement("div",{className:"cfd-financial-stp-modal__header-steps"},n.createElement("h4",{className:"cfd-financial-stp-modal__header-steps-title"},n.createElement(c.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:r+1,steps:g.length,step_title:g[r].header.title}})),g[r].header.active_title&&n.createElement("h4",{className:"cfd-financial-stp-modal__header-steps-subtitle"},g[r].header.active_title))))),n.createElement("div",{className:"cfd-financial-stp-modal__body"},n.createElement(S,oe({value:M,index:v,onSubmit:y,height:"auto",is_loading:m,onCancel:function(){o(r-1),d("")},onSave:x,form_error:u},D))))})),de=(0,d.$j)((function(e){var t=e.ui,a=e.modules;return{disableApp:t.disableApp,disableMt5FinancialStpModal:a.cfd.disableMt5FinancialStpModal,enableApp:t.enableApp,is_mt5_financial_stp_modal_open:a.cfd.is_mt5_financial_stp_modal_open}}))((function(e){var t=e.disableApp,a=e.disableMt5FinancialStpModal,r=e.enableApp,o=e.is_mt5_financial_stp_modal_open;return n.createElement(n.Fragment,null,n.createElement(i.DesktopWrapper,null,n.createElement(i.Modal,{id:"mt5_financial_stp_signup_modal",className:"mt5-financial-stp-signup-modal",disableApp:t,width:"904px",title:(0,c.localize)("Create a DMT5 real Financial STP account"),enableApp:r,is_open:o,has_close_icon:!0,height:"740px",toggleModal:a},n.createElement(ue,{toggleModal:a}))),n.createElement(i.MobileWrapper,null,n.createElement(i.MobileDialog,{portal_element_id:"modal_root",title:(0,c.localize)("Create a DMT5 real Financial STP account"),wrapper_classname:"mt5-financial-stp-signup-modal",visible:o,onClose:a},n.createElement(ue,{toggleModal:a}))))}));function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),!0).forEach((function(t){fe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function fe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var he=function(e){var t,a,r,o=e.landing_companies,s=e.platform,u=e.is_logged_in,d=e.is_uk,_=u?(s===l.CFD_PLATFORMS.MT5?[null==o||null===(t=o.mt_gaming_company)||void 0===t?void 0:t.financial,null==o||null===(a=o.mt_financial_company)||void 0===a?void 0:a.financial,(null==o||null===(r=o.mt_financial_company)||void 0===r?void 0:r.financial_stp)&&s===l.CFD_PLATFORMS.MT5]:[null==o?void 0:o.dxtrade_gaming_company,null==o?void 0:o.dxtrade_financial_company]).filter(Boolean).length:s===l.CFD_PLATFORMS.MT5?3:2,m=d?n.createElement("div",null,(0,c.localize)("Forex, stocks, stock indices, cryptocurrencies"),n.createElement(i.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"**"),(0,c.localize)(", synthetic indices")):(0,c.localize)("Forex, stocks, stock indices, cryptocurrencies, synthetic indices");return[{attribute:(0,c.localize)("Account currency"),mt5:{synthetic:(0,c.localize)("USD"),synthetic_eu:(0,c.localize)("EUR"),financial:(0,c.localize)("USD"),financial_au:(0,c.localize)("USD"),financial_eu:(0,c.localize)("EUR/GBP/USD"),financial_stp:(0,c.localize)("USD"),footnote:null},dxtrade:{synthetic:(0,c.localize)("USD"),synthetic_eu:(0,c.localize)("EUR"),financial:(0,c.localize)("USD"),financial_au:(0,c.localize)("USD"),financial_eu:(0,c.localize)("EUR/GBP"),footnote:null}},{attribute:(0,c.localize)("Maximum leverage"),mt5:{synthetic:(0,c.localize)("Up to 1:1000"),synthetic_eu:(0,c.localize)("Up to 1:1000"),financial:(0,c.localize)("Up to 1:1000"),financial_au:(0,c.localize)("Up to 1:30"),financial_eu:(0,c.localize)("Up to 1:30"),financial_stp:(0,c.localize)("Up to 1:100"),footnote:(0,c.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")},dxtrade:{synthetic:(0,c.localize)("Up to 1:1000"),synthetic_eu:(0,c.localize)("Up to 1:1000"),financial:(0,c.localize)("Up to 1:1000"),financial_au:(0,c.localize)("Up to 1:30"),financial_eu:(0,c.localize)("Up to 1:30"),footnote:(0,c.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")}},{attribute:(0,c.localize)("Order execution"),mt5:{synthetic:(0,c.localize)("Market"),synthetic_eu:(0,c.localize)("Market"),financial:(0,c.localize)("Market"),financial_au:(0,c.localize)("Market"),financial_eu:(0,c.localize)("Market"),financial_stp:(0,c.localize)("Market"),footnote:(0,c.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:_})},dxtrade:{synthetic:(0,c.localize)("Market"),synthetic_eu:(0,c.localize)("Market"),financial:(0,c.localize)("Market"),financial_au:(0,c.localize)("Market"),financial_eu:(0,c.localize)("Market"),footnote:(0,c.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:_})}},{attribute:(0,c.localize)("Spread"),mt5:{synthetic:(0,c.localize)("Fixed/Variable"),synthetic_eu:(0,c.localize)("Fixed/Variable"),financial:(0,c.localize)("Variable"),financial_au:(0,c.localize)("Variable"),financial_eu:(0,c.localize)("Fixed/Variable"),financial_stp:(0,c.localize)("Variable"),footnote:(0,c.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")},dxtrade:{synthetic:(0,c.localize)("Fixed/Variable"),synthetic_eu:(0,c.localize)("Fixed/Variable"),financial:(0,c.localize)("Variable"),financial_au:(0,c.localize)("Variable"),financial_eu:(0,c.localize)("Variable"),footnote:(0,c.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")}},{attribute:(0,c.localize)("Commission"),mt5:{synthetic:(0,c.localize)("No"),synthetic_eu:(0,c.localize)("No"),financial:(0,c.localize)("No"),financial_au:(0,c.localize)("No"),financial_eu:(0,c.localize)("No"),financial_stp:(0,c.localize)("No"),footnote:(0,c.localize)("Deriv charges no commission across all account types.")},dxtrade:{synthetic:(0,c.localize)("No"),synthetic_eu:(0,c.localize)("No"),financial:(0,c.localize)("No"),financial_au:(0,c.localize)("No"),financial_eu:(0,c.localize)("No"),footnote:(0,c.localize)("Deriv charges no commission across all account types.")}},{attribute:(0,c.localize)("Minimum deposit"),mt5:{synthetic:(0,c.localize)("No"),synthetic_eu:(0,c.localize)("No"),financial:(0,c.localize)("No"),financial_au:(0,c.localize)("No"),financial_eu:(0,c.localize)("No"),financial_stp:(0,c.localize)("No"),footnote:null},dxtrade:{synthetic:(0,c.localize)("No"),synthetic_eu:(0,c.localize)("No"),financial:(0,c.localize)("No"),financial_au:(0,c.localize)("No"),financial_eu:(0,c.localize)("No"),footnote:null}},{attribute:(0,c.localize)("Margin call"),mt5:{synthetic:(0,c.localize)("100%"),synthetic_eu:(0,c.localize)("100%"),financial:(0,c.localize)("100%"),financial_au:(0,c.localize)("100%"),financial_eu:(0,c.localize)("100%"),financial_stp:(0,c.localize)("100%"),footnote:(0,c.localize)("You’ll get a warning, known as margin call, if your account balance drops down close to the stop out level.")},dxtrade:{synthetic:(0,c.localize)("100%"),synthetic_eu:(0,c.localize)("100%"),financial:(0,c.localize)("100%"),financial_au:(0,c.localize)("100%"),financial_eu:(0,c.localize)("100%"),footnote:(0,c.localize)("You’ll get a warning, known as margin call, if your account balance drops down close to the stop out level.")}},{attribute:(0,c.localize)("Stop out level"),mt5:{synthetic:(0,c.localize)("50%"),synthetic_eu:(0,c.localize)("50%"),financial:(0,c.localize)("50%"),financial_au:(0,c.localize)("50%"),financial_eu:(0,c.localize)("50%"),financial_stp:(0,c.localize)("50%"),footnote:(0,c.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")},dxtrade:{synthetic:(0,c.localize)("50%"),synthetic_eu:(0,c.localize)("50%"),financial:(0,c.localize)("50%"),financial_au:(0,c.localize)("50%"),financial_eu:(0,c.localize)("50%"),footnote:(0,c.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")}},{attribute:(0,c.localize)("Number of assets"),mt5:{synthetic:(0,c.localize)("20+"),synthetic_eu:(0,c.localize)("20+"),financial:(0,c.localize)("150+"),financial_au:(0,c.localize)("100+"),financial_eu:(0,c.localize)("50+"),financial_stp:(0,c.localize)("70+"),footnote:null},dxtrade:{synthetic:(0,c.localize)("20+"),synthetic_eu:(0,c.localize)("20+"),financial:(0,c.localize)("90+"),financial_au:(0,c.localize)("90+"),financial_eu:(0,c.localize)("90+"),footnote:null}},{attribute:(0,c.localize)("Cryptocurrency trading"),mt5:{synthetic:(0,c.localize)("N/A"),synthetic_eu:(0,c.localize)("N/A"),financial:(0,c.localize)("24/7"),financial_au:(0,c.localize)("24/7"),financial_eu:(0,c.localize)("24/7"),financial_stp:(0,c.localize)("24/7"),footnote:(0,c.localize)("Indicates the availability of cryptocurrency trading on a particular account.")},dxtrade:{synthetic:(0,c.localize)("N/A"),synthetic_eu:(0,c.localize)("N/A"),financial:(0,c.localize)("24/7"),financial_au:(0,c.localize)("24/7"),financial_eu:(0,c.localize)("24/7"),footnote:(0,c.localize)("Indicates the availability of cryptocurrency trading on a particular account.")}},{attribute:(0,c.localize)("Trading instruments"),mt5:{synthetic:(0,c.localize)("Synthetics"),synthetic_eu:(0,c.localize)("Synthetics"),financial:(0,c.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies, Stocks, and Stock Indices"),financial_au:(0,c.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies, Stocks, and Stock Indices"),financial_eu:m,financial_stp:(0,c.localize)("FX-majors, FX-minors, FX-exotics, Cryptocurrencies"),footnote:null},dxtrade:{synthetic:(0,c.localize)("Synthetics"),synthetic_eu:(0,c.localize)("Synthetics"),financial:(0,c.localize)("FX-majors (standard/micro lots), FX-minors, Smart-FX, Commodities, Cryptocurrencies"),financial_au:(0,c.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies"),financial_eu:(0,c.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies (except UK)"),footnote:null}}]},ve=function(e){var t=e.name,a=e.counter,r=pe(n.useState(!1),2),o=r[0],l=r[1];return a?n.createElement(n.Fragment,null,n.createElement(i.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer",onClick:function(){return l(!o)}},t,n.createElement(i.Text,{weight:"bold",as:"span",line_height:"x",size:"xxxs",className:"counter"},a))):n.createElement(i.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer"},t)},be=function(e){var t=e.landing_companies,a=e.is_logged_in,r=e.show_eu_related,o=e.platform,i=e.residence,c=e.is_uk,s="au"===i;return function(e,t,a,r,o,i){var c=function(e,t,a){return i?t:r?a:e},s=0;return t.filter((function(e){return e[o]})).map((function(t){var i,u,d,_=t.attribute,m=t.mt5,f=void 0===m?{}:m,p=t.dxtrade,g=void 0===p?{}:p,h=o===l.CFD_PLATFORMS.MT5?f:g,v=h.synthetic,b=h.synthetic_eu,y=h.financial,w=h.financial_au,E=h.financial_eu,z=h.footnote,x={synthetic:r?b:v},S={financial:c(y,w,E)},M=z?++s:null;return a?me(me(me({attribute:n.createElement(ve,{name:_,counter:M})},null!=e&&null!==(i=e.mt_gaming_company)&&void 0!==i&&i.financial?x:{}),null!=e&&null!==(u=e.mt_financial_company)&&void 0!==u&&u.financial?S:{}),null!=e&&null!==(d=e.mt_financial_company)&&void 0!==d&&d.financial_stp&&o===l.CFD_PLATFORMS.MT5?{financial_stp:null==f?void 0:f.financial_stp}:{}):o===l.CFD_PLATFORMS.DXTRADE?me(me({attribute:n.createElement(ve,{name:_,counter:M})},x),S):me(me(me({attribute:n.createElement(ve,{name:_,counter:M})},x),S),{financial_stp:null==f?void 0:f.financial_stp})}))}(t,he({landing_companies:t,platform:o,is_logged_in:a,is_uk:c}),a,r,o,s)},ye=function(e){var t=e.platform,a=e.show_risk_message,r=e.landing_companies,o=e.is_logged_in,s=e.is_uk;return n.createElement("div",{className:"cfd-compare-account--hint"},n.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},n.createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),n.createElement(c.Localize,{i18n_default_text:"At bank rollover, liquidity in the forex markets is reduced and may increase the spread and processing time for client orders. This happens around 21:00 GMT during daylight saving time, and 22:00 GMT non-daylight saving time."})),a&&n.createElement(n.Fragment,null,n.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},n.createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),n.createElement(c.Localize,{i18n_default_text:"Margin call and stop out level will change from time to time based on market condition."})),n.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},n.createElement(i.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"*"),n.createElement(c.Localize,{i18n_default_text:"To protect your portfolio from adverse market movements due to the market opening gap, we reserve the right to decrease leverage on all offered symbols for financial accounts before market close and increase it again after market open. Please make sure that you have enough funds available in your {{platform}} account to support your positions at all times.",values:{platform:t===l.CFD_PLATFORMS.MT5?(0,c.localize)("MT5"):(0,c.localize)("Deriv X")}})),s&&n.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},n.createElement(i.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"**"),n.createElement(c.Localize,{i18n_default_text:"Cryptocurrency trading is not available for clients residing in the United Kingdom.",values:{platform:t===l.CFD_PLATFORMS.MT5?(0,c.localize)("MT5"):(0,c.localize)("Deriv X")}}))),he({landing_companies:r,platform:t,is_logged_in:o,is_uk:s}).filter((function(e){var a;return!(null===(a=e[t])||void 0===a||!a.footnote)})).map((function(e,a){return n.createElement("div",{key:a,className:"cfd-compare-accounts__bullet-wrapper"},n.createElement(i.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},a+1),n.createElement("div",{className:"cfd-compare-accounts__footnote"},n.createElement(i.Text,{as:"p",size:"xs",weight:"bold",color:"prominent",className:"cfd-compare-accounts__footnote-title"},e.attribute),n.createElement(i.Text,{size:"xs",color:"prominent"},e[t].footnote)))})))};const we=function(e){var t=e.landing_companies,a=e.is_logged_in,r=e.platform,o=e.show_eu_related,s=e.residence,u=e.is_eu,d=e.is_uk,_=pe(n.useState([]),2),m=_[0],f=_[1],p=pe(n.useState(r===l.CFD_PLATFORMS.DXTRADE?"1.5fr 1fr 2fr":"1.5fr 1fr 2fr 1fr"),2),g=p[0],h=p[1];n.useEffect((function(){var e,n,i;f(be({landing_companies:t,is_logged_in:a,platform:r,show_eu_related:o,residence:s,is_uk:d})),a&&r===l.CFD_PLATFORMS.MT5?h("1.5fr ".concat(null!=t&&null!==(e=t.mt_gaming_company)&&void 0!==e&&e.financial?"1fr":""," ").concat(null!=t&&null!==(n=t.mt_financial_company)&&void 0!==n&&n.financial?"2fr":""," ").concat(null!=t&&null!==(i=t.mt_financial_company)&&void 0!==i&&i.financial_stp?" 1fr ":"")):a&&r===l.CFD_PLATFORMS.DXTRADE&&h("1.5fr ".concat(null!=t&&t.dxtrade_gaming_company?"1fr":""," ").concat(null!=t&&t.dxtrade_financial_company?"2fr":""))}),[null==t?void 0:t.mt_financial_company,null==t?void 0:t.mt_gaming_company,a,d,t,r,o,s,d]);var v=r===l.CFD_PLATFORMS.MT5||!o,b=u?(0,c.localize)("CFDs"):(0,c.localize)("Financial");return n.createElement(i.Div100vhContainer,{height_offset:"40px",is_bypassed:(0,l.isDesktop)()},n.createElement(i.ThemedScrollbars,{className:"cfd-compare-accounts",style:{"--cfd-compare-accounts-template-columns":g}},n.createElement("div",{className:"cfd-compare-accounts__table-wrapper"},n.createElement(i.Table,{className:"cfd-compare-accounts__table"},n.createElement(i.Table.Header,null,n.createElement(i.Table.Row,{className:"cfd-compare-accounts__table-row"},n.createElement(i.Table.Head,null),a?n.createElement(n.Fragment,null,(0,l.isLandingCompanyEnabled)({landing_companies:t,platform:r,type:"gaming"})&&n.createElement(i.Table.Head,null,(0,c.localize)("Synthetic")),(0,l.isLandingCompanyEnabled)({landing_companies:t,platform:r,type:"financial"})&&n.createElement(i.Table.Head,null,b,n.createElement(i.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),(0,l.isLandingCompanyEnabled)({landing_companies:t,platform:r,type:"financial_stp"})&&n.createElement(i.Table.Head,null,(0,c.localize)("Financial STP"),n.createElement(i.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))):n.createElement(n.Fragment,null,n.createElement(i.Table.Head,null,(0,c.localize)("Synthetic")),n.createElement(i.Table.Head,null,(0,c.localize)("Financial"),n.createElement(i.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),r===l.CFD_PLATFORMS.MT5&&n.createElement(i.Table.Head,null,(0,c.localize)("Financial STP"),n.createElement(i.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))))),n.createElement(i.Table.Body,null,m.map((function(e,t){return n.createElement(i.Table.Row,{key:t,className:"cfd-compare-accounts__table-row"},Object.keys(e).map((function(t,a){return n.createElement(i.Table.Cell,{key:a,fixed:0===a},e[t])})))}))))),n.createElement(ye,{platform:r,show_risk_message:v,landing_companies:t,is_logged_in:a,is_uk:d})))},Ee=(0,d.$j)((function(e){var t=e.modules,a=e.ui,n=e.client;return{disableApp:a.disableApp,enableApp:a.enableApp,is_compare_accounts_visible:t.cfd.is_compare_accounts_visible,is_loading:n.is_populating_mt5_account_list,is_eu:n.is_eu,is_uk:n.is_uk,is_eu_country:n.is_eu_country,is_logged_in:n.is_logged_in,landing_companies:n.landing_companies,residence:n.residence,toggleCompareAccounts:t.cfd.toggleCompareAccountsModal}}))((function(e){var t,a,r,o=e.disableApp,s=e.enableApp,u=e.is_compare_accounts_visible,d=e.landing_companies,_=e.is_loading,m=e.is_logged_in,f=e.is_eu,p=e.is_uk,g=e.is_eu_country,h=e.platform,v=e.residence,b=e.toggleCompareAccounts,y=m&&f||!m&&g,w=1===[null==d||null===(t=d.mt_gaming_company)||void 0===t?void 0:t.financial,null==d||null===(a=d.mt_financial_company)||void 0===a?void 0:a.financial,null==d||null===(r=d.mt_financial_company)||void 0===r?void 0:r.financial_stp].filter(Boolean).length?(0,c.localize)("Account Information"):(0,c.localize)("Compare accounts");return n.createElement(n.Fragment,null,n.createElement("div",{className:"cfd-compare-accounts-modal__wrapper",style:{marginTop:h===l.CFD_PLATFORMS.DXTRADE?"5rem":"2.4rem"}},n.createElement(i.Button,{className:"cfd-dashboard__welcome-message--button",has_effect:!0,text:w,onClick:b,secondary:!0,disabled:_}),n.createElement(n.Suspense,{fallback:n.createElement(i.UILoader,null)},n.createElement(i.DesktopWrapper,null,n.createElement(i.Modal,{className:"cfd-dashboard__compare-accounts",disableApp:o,enableApp:s,is_open:u,title:w,toggleModal:b,type:"button",height:"696px",width:"903px"},n.createElement(we,{is_logged_in:m,landing_companies:d,platform:h,show_eu_related:y,residence:v,is_eu:f,is_uk:p}))),n.createElement(i.MobileWrapper,null,n.createElement(i.MobileDialog,{portal_element_id:"deriv_app",title:(0,c.localize)("Compare accounts"),wrapper_classname:"cfd-dashboard__compare-accounts",visible:u,onClose:b},n.createElement(we,{is_logged_in:m,landing_companies:d,platform:h,show_eu_related:y,residence:v,is_eu:f,is_uk:p}))))))}));var ze=function(e,t){return e===l.CFD_PLATFORMS.DXTRADE?(0,c.localize)("Trade forex, commodities and cryptocurrencies at high leverage."):e===l.CFD_PLATFORMS.MT5?t?(0,c.localize)("Trade CFDs on forex, stocks, stock indices, synthetic indices, and commodities with leverage."):(0,c.localize)("Trade major (standard and micro-lots) and minor currency pairs, stocks, stock indices, commodities, and cryptocurrencies with high leverage."):""},xe="https://apps.apple.com/us/app/deriv-x/id1563337503",Se="https://play.google.com/store/apps/details?id=com.deriv.dx",Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||(0,l.OSDetect)()){case"ios":return xe;case"android":return Se;default:return Te()}},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||(0,l.OSDetect)()){case"windows":return"https://download.mql5.com/cdn/web/deriv.limited/mt5/deriv5setup.exe";case"linux":return"https://www.metatrader5.com/en/terminal/help/start_advanced/install_linux";case"macos":return"https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/MetaTrader5.dmg";case"ios":return"https://download.mql5.com/cdn/mobile/mt5/ios?server=Deriv-Demo,Deriv-Server";case"android":return"https://download.mql5.com/cdn/mobile/mt5/android?server=Deriv-Demo,Deriv-Server";default:return Ce({category:"real"})}},Te=function(e){return"real"===e?"https://dx.deriv.com":"https://dx-demo.deriv.com/"},Ce=function(e){var t=e.category,a=e.loginid,n=e.server_name,r="demo"===t?"Deriv-Demo":void 0===n?"Deriv-Server":n,o=null!=a?a:"";return"https://trade.mql5.com/trade?servers=".concat(r,"&trade_server=").concat(r).concat(o&&"&login=".concat(o))};const Ne=function(e){var t=e.platform,a=e.active_index,r=e.is_dark_mode_on;return n.createElement("div",{className:"cfd-dashboard__download-center"},n.createElement("h1",{className:"cfd-dashboard__download-center--heading"},function(e){return e===l.CFD_PLATFORMS.DXTRADE?(0,c.localize)("Run Deriv X on your browser or download the mobile app"):e===l.CFD_PLATFORMS.MT5?(0,c.localize)("Run MT5 from your browser or download the MT5 app for your devices"):""}(t)),n.createElement("div",{className:"cfd-dashboard__download-center-options",style:{justifyContent:t===l.CFD_PLATFORMS.DXTRADE?"space-evenly":void 0}},n.createElement("div",{className:"cfd-dashboard__download-center-options--desktop"},n.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-links"},n.createElement("div",null,n.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-row"},t===l.CFD_PLATFORMS.MT5&&n.createElement(n.Fragment,null,n.createElement(i.Icon,{icon:"IcMt5DeviceDesktop",width:118,height:85}),n.createElement(i.Icon,{icon:"IcMt5DeviceLaptop",width:75,height:51})),t===l.CFD_PLATFORMS.DXTRADE&&n.createElement(n.Fragment,null,n.createElement(i.Icon,{icon:r?"IcDxtradeDeviceDesktopLight":"IcDxtradeDeviceDesktop",width:128,height:83}),n.createElement(i.Icon,{icon:r?"IcDxtradeDeviceLaptopLight":"IcDxtradeDeviceLaptop",width:81,height:54}))),t===l.CFD_PLATFORMS.DXTRADE&&n.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-download"},n.createElement("a",{className:"cfd-dashboard__dxtrade-download",href:Te(0===a?"real":"demo"),target:"_blank",rel:"noopener noreferrer"},n.createElement(i.Icon,{className:"cfd-dashboard__dxtrade-download--icon",icon:"IcBrandDxtrade",width:32,height:32}),n.createElement("div",{className:"cfd-dashboard__dxtrade-download-text"},n.createElement(i.Text,{className:"cfd-dashboard__dxtrade-download--title",color:"colored-background",size:"xxs",weight:"bold"},n.createElement(c.Localize,{i18n_default_text:"Web terminal"})))))),t===l.CFD_PLATFORMS.MT5&&n.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-download"},n.createElement("a",{href:De("windows"),target:"_blank",rel:"noopener noreferrer"},n.createElement(i.Icon,{icon:"IcInstallationWindows",width:138,height:40})),n.createElement("a",{href:De("macos"),target:"_blank",rel:"noopener noreferrer"},n.createElement(i.Icon,{icon:"IcInstallationMacos",width:138,height:40})),n.createElement("a",{href:De("linux"),target:"_blank",rel:"noopener noreferrer"},n.createElement(i.Icon,{icon:"IcInstallationLinux",width:138,height:40})))),t===l.CFD_PLATFORMS.MT5&&n.createElement(i.Text,{as:"p",align:"center",size:"xxxs",className:"cfd-dashboard__download-center--hint"},n.createElement(c.Localize,{i18n_default_text:"The MT5 desktop app is not supported by Windows XP, Windows 2003, and Windows Vista."}))),n.createElement("div",{className:"cfd-dashboard__download-center-options--mobile"},n.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-devices"},t===l.CFD_PLATFORMS.MT5&&n.createElement(n.Fragment,null,n.createElement(i.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),n.createElement(i.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),t===l.CFD_PLATFORMS.DXTRADE&&n.createElement(n.Fragment,null,n.createElement(i.Icon,{icon:r?"IcDxtradeDeviceTabletLight":"IcDxtradeDeviceTablet",width:133,height:106}),n.createElement(i.Icon,{icon:r?"IcDxtradeDevicePhoneLight":"IcDxtradeDevicePhone",width:48,height:74}))),n.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-links"},n.createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:t===l.CFD_PLATFORMS.DXTRADE?Me("android"):De("android"),target:"_blank",rel:"noopener noreferrer"},n.createElement(i.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),n.createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:t===l.CFD_PLATFORMS.DXTRADE?Me("ios"):De("ios"),target:"_blank",rel:"noopener noreferrer"},n.createElement(i.Icon,{icon:"IcInstallationApple",width:120,height:40}))))))};var Fe=a("../../node_modules/prop-types/index.js"),Pe=a.n(Fe),Ae=a("./src/Stores/Modules/CFD/cfd-store.js"),ke=a("../../node_modules/classnames/index.js"),Oe=a.n(ke);const Le=function(e){var t=e.confirm_label,a=e.className,r=e.platform,o=e.onConfirm,s=e.onCancel;return n.createElement(p.J9,{initialValues:{password:""},onSubmit:o},(function(e){var o,u,d,_=e.isSubmitting,m=e.handleSubmit;return n.createElement("form",{onSubmit:m},n.createElement("div",{className:Oe()("cfd-change-password-confirmation__wrapper",(o={},u="".concat(a,"-wrapper"),d=a,u in o?Object.defineProperty(o,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[u]=d,o))},n.createElement("div",{className:Oe()("cfd-change-password-confirmation",a)},n.createElement(i.Icon,{className:"cfd-change-password__icon",icon:r===l.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),n.createElement(i.Text,{as:"p",align:"center",size:"s",weight:"bold"},n.createElement(c.Localize,{i18n_default_text:"Confirm to change your {{platform}} password",values:{platform:(0,l.getCFDPlatformLabel)(r)}})),n.createElement(i.Text,{className:"cfd-change-password-confirmation__description",as:"p",align:"center",color:"loss-danger",size:"xs"},n.createElement(c.Localize,{i18n_default_text:"This will change the password to all of your {{platform}} accounts.",values:{platform:(0,l.getCFDPlatformLabel)(r)}})),n.createElement(i.FormSubmitButton,{is_center:!0,label:t||(0,c.localize)("Create"),cancel_label:(0,c.localize)("Cancel"),is_loading:_,has_cancel:!0,onCancel:s}))))}))};var je=function(e){var t=e.platform,a=e.onConfirm;return n.createElement("div",{className:"cfd-change-password"},n.createElement(i.Icon,{className:"cfd-change-password__icon",icon:t===l.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),n.createElement(i.Text,{as:"p",align:"center",size:"s",weight:"bold"},n.createElement(c.Localize,{i18n_default_text:"{{platform}} password",values:{platform:(0,l.getCFDPlatformLabel)(t)}})),n.createElement(i.Text,{as:"p",align:"center",className:"cfd-change-password__description",size:"xs"},t===l.CFD_PLATFORMS.MT5?n.createElement(c.Localize,{i18n_default_text:"Use this password to log in to your DMT5 accounts on the desktop, web, and mobile apps."}):n.createElement(c.Localize,{i18n_default_text:"Use this password to log in to your Deriv X accounts on the web and mobile apps."})),n.createElement(i.Button,{className:"dc-btn dc-btn--primary dc-btn__large dc-modal__container_cfd-reset-password-modal__button",onClick:a},n.createElement(i.Text,{size:"xs",weight:"bold",color:"colored-background"},n.createElement(c.Localize,{i18n_default_text:"Change {{platform}} password",values:{platform:(0,l.getCFDPlatformLabel)(t)}}))))},Ie=function(e){var t=e.email,a=e.platform,r=e.account_group,o=n.useCallback((function(){var e=a===l.CFD_PLATFORMS.MT5?1:2;"real"===r?e=Number("".concat(e,"0")):"demo"===r&&(e=Number("".concat(e,"1")));var n=a===l.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";l.WS.verifyEmail(t,n,{url_parameters:{redirect_to:e}})}),[t,a,r]);return n.useEffect((function(){o()}),[o]),n.createElement(i.SendEmailTemplate,{title:(0,c.localize)("We've sent you an email"),subtitle:(0,c.localize)("Please click on the link in the email to change your {{platform}} password.",{platform:(0,l.getCFDPlatformLabel)(a)}),lbl_no_receive:(0,c.localize)("Didn't receive the email?"),txt_resend:(0,c.localize)("Resend email"),txt_resend_in:(0,c.localize)("Resend email in"),onClickSendEmail:o})};const Re=function(e){var t=e.platform,a=e.email,r=e.account_group,o=n.useRef(),l=[{component:n.createElement(je,{platform:t,onConfirm:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.goNextStep()}})},{component:n.createElement(Le,{confirm_label:(0,c.localize)("Confirm"),platform:t,onConfirm:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.goNextStep()},onCancel:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.goPrevStep()}})},{component:n.createElement(Ie,{platform:t,email:a,account_group:r})}];return n.createElement("div",{className:"cfd-trading-password"},n.createElement(i.MultiStep,{ref:o,steps:l}))};function Be(){return Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Be.apply(this,arguments)}var Ue=function(e){var t=e.toggleModal,a=e.is_investor;return n.createElement("div",{className:"cfd-password-manager__success"},n.createElement(i.Icon,{icon:"IcPasswordUpdated",size:128}),n.createElement(i.Text,{as:"p",size:"xxs",align:"center"},a?n.createElement(c.Localize,{i18n_default_text:"Your investor password has been changed."}):n.createElement(c.Localize,{i18n_default_text:"Your password has been changed."})),n.createElement(i.Button,{onClick:t,className:"cfd-password-manager__success-btn",primary:!0,large:!0},n.createElement("p",{className:"dc-btn__text"},(0,c.localize)("OK"))))};const We=function(e){var t=e.error_message_investor,a=e.is_submit_success_investor,r=e.multi_step_ref,o=e.onSubmit,s=e.setPasswordType,u=e.toggleModal,d=e.validatePassword;return a?n.createElement(Ue,{toggleModal:u,is_investor:!0}):n.createElement("div",{className:"cfd-password-manager__investor-wrapper"},n.createElement(i.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},n.createElement(c.Localize,{i18n_default_text:"Use this password to grant viewing access to another user. While they may view your trading account, they will not be able to trade or take any other actions."})),n.createElement(i.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},n.createElement(c.Localize,{i18n_default_text:"If this is the first time you try to create a password, or you have forgotten your password, please reset it."})),t&&n.createElement(i.Text,{as:"p",color:"loss-danger",size:"xs",className:"cfd-password-manager--error-message"},t),n.createElement(p.J9,{initialValues:{old_password:"",new_password:"",password_type:"investor"},validate:d,onSubmit:o},(function(e){var t=e.isSubmitting,a=e.errors,o=e.setFieldTouched,u=e.values,d=e.touched;return n.createElement(p.l0,{className:"cfd-password-manager__investor-form",noValidate:!0},n.createElement(p.gN,{name:"old_password"},(function(e){var t=e.field;return n.createElement(i.PasswordInput,Be({},t,{autoComplete:"current-password",label:(0,c.localize)("Current investor password"),error:d.old_password&&a.old_password,required:!0}))})),n.createElement(p.gN,{name:"new_password"},(function(e){var t=e.field;return n.createElement(i.PasswordMeter,{input:t.value,has_error:!(!d.new_password||!a.new_password),custom_feedback_messages:(0,l.getErrorMessages)().password_warnings},(function(e){var r=e.has_warning;return n.createElement(i.PasswordInput,Be({},t,{autoComplete:"new-password",label:(0,c.localize)("New investor password"),hint:!r&&(0,c.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:d.new_password&&a.new_password,onChange:function(e){o("new_password",!0,!0),t.onChange(e)},className:"cfd-password-manager__new-password",required:!0}))}))})),n.createElement("div",{className:"cfd-password-manager__actions"},n.createElement(i.Button,{className:"cfd-password-manager--button",is_disabled:t||!u.old_password||!u.new_password||Object.keys(a).length>0,is_loading:t,text:(0,c.localize)("Change investor password"),primary:!0,large:!0}),n.createElement(i.Button,{className:"cfd-password-manager--button",type:"button",onClick:function(){var e;s("investor"),null===(e=r.current)||void 0===e||e.goNextStep()},text:(0,c.localize)("Create or reset investor password"),tertiary:!0,large:!0})))})))};function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(a),!0).forEach((function(t){qe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function qe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $e(e,t,a,n,r,o,i){try{var l=e[o](i),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ke=function(e){var t=e.count_from,a=void 0===t?60:t,r=e.onTimeout,o=He(n.useState(a),2),i=o[0],l=o[1];return n.useEffect((function(){if(0!==i){var e=setTimeout((function(){l(i-1)}),1e3);return function(){return clearTimeout(e)}}return r(),function(){}}),[i]),n.createElement("span",{className:"countdown"},i)},Ge=function(e){var t=e.sendVerifyEmail,a=e.account_type,r=e.account_group,o=e.server,l=e.password_type,s=He(n.useState(!1),2),u=s[0],d=s[1],_=He(n.useState(!1),2),m=_[0],f=_[1];return n.useEffect((function(){localStorage.setItem("cfd_reset_password_intent",[o,r,a].join(".")),localStorage.setItem("cfd_reset_password_type",l),t()}),[]),n.createElement("div",{className:"cfd-verification-email-sent"},n.createElement(i.Icon,{icon:"IcEmailSent",size:128}),n.createElement("h2",{className:"cfd-verification-email-sent__title"},n.createElement(c.Localize,{i18n_default_text:"We've sent you an email"})),n.createElement(i.Text,{as:"p",size:"xs",align:"center"},n.createElement(c.Localize,{i18n_default_text:"Please click on the link in the email to reset your password."})),!u&&n.createElement(i.Button,{className:"cfd-verification-email-sent__resend-button",primary:!0,onClick:function(){d(!0)}},n.createElement(c.Localize,{i18n_default_text:"Didn't receive the email?"})),u&&n.createElement(n.Fragment,null,n.createElement(i.Text,{as:"p",size:"xs",align:"center",weight:"bold",className:"cfd-verification-email-sent__title--sub"},n.createElement(c.Localize,{i18n_default_text:"Didn't receive the email?"})),n.createElement(i.Text,{as:"p",size:"xs",align:"center"},n.createElement(c.Localize,{i18n_default_text:"Check your spam or junk folder. If it's not there, try resending the email."})),n.createElement(i.Button,{className:"cfd-verification-email-sent__resend-button",large:!0,primary:!0,disabled:m,onClick:function(){t(),f(!0)}},!m&&n.createElement(c.Localize,{i18n_default_text:"Resend email"}),m&&n.createElement(n.Fragment,null,n.createElement(c.Localize,{i18n_default_text:"Resend in <0 /> seconds",components:[n.createElement(Ke,{key:0,onTimeout:function(){return f(!1)},count_from:60})]})))))},Je=function(e){var t=e.multi_step_ref,a=e.steps;return n.createElement(i.MultiStep,{ref:t,steps:a,className:"cfd-password-manager",lbl_previous:(0,c.localize)("Back")})},Ze=function(e){var t=e.toggleModal,a=e.selected_login,r=e.email,o=e.setPasswordType,s=e.multi_step_ref,u=e.platform,d=e.onChangeActiveTabIndex,_=e.account_group,m=He(n.useState(0),2),f=m[0],p=m[1],g=He(n.useState(""),2),h=g[0],v=g[1],b=He(n.useState(!1),2),y=b[0],w=b[1],E="calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)",z=function(e){var t={};return(0,l.validLength)(e.new_password,{min:8,max:25})?(0,l.validPassword)(e.new_password)?e.new_password.toLowerCase()===r.toLowerCase()&&(t.new_password=(0,c.localize)("Your password cannot be the same as your email address.")):t.new_password=(0,l.getErrorMessages)().password():t.new_password=(0,c.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.old_password||void 0===e.old_password||(t.old_password=(0,c.localize)("This field is required")),t},x=n.useCallback(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ae.default.changePassword(Xe({login:a},t));case 4:(n=e.sent)?v(n):(v(""),w(!0));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){$e(o,n,r,i,l,"next",e)}function l(e){$e(o,n,r,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[a]),S=n.createElement(n.Fragment,null,n.createElement(i.DesktopWrapper,null,n.createElement(i.ThemedScrollbars,{height:E,is_bypassed:(0,l.isMobile)(),autohide:!1},n.createElement(Re,{toggleModal:t,platform:u,email:r,account_group:_}))),n.createElement(i.MobileWrapper,null,n.createElement(i.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},n.createElement(Re,{toggleModal:t,platform:u,email:r,account_group:_}))));return u===l.CFD_PLATFORMS.DXTRADE?S:n.createElement(i.Tabs,{active_index:f,onTabItemClick:function(e){p(e),d(e),v(""),w(!1)},top:!0},n.createElement("div",{label:(0,c.localize)("{{platform}} password",{platform:(0,l.getCFDPlatformLabel)(u)})},S),n.createElement("div",{label:(0,c.localize)("Investor password")},n.createElement(i.DesktopWrapper,null,n.createElement(i.ThemedScrollbars,{height:E},n.createElement(We,{is_submit_success_investor:y,toggleModal:t,error_message_investor:h,validatePassword:z,onSubmit:x,setPasswordType:o,multi_step_ref:s}))),n.createElement(i.MobileWrapper,null,n.createElement(i.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},n.createElement(We,{is_submit_success_investor:y,toggleModal:t,error_message_investor:h,validatePassword:z,onSubmit:x,setPasswordType:o,multi_step_ref:s})))))},Qe=function(e){var t=e.enableApp,a=e.email,r=e.disableApp,o=e.is_visible,s=e.platform,u=e.selected_login,d=e.selected_account,_=e.toggleModal,m=e.selected_account_type,f=e.selected_account_group,p=e.selected_server,g=e.sendVerifyEmail,h=n.useRef(),v=He(n.useState(0),2),b=v[0],y=v[1],w=He(n.useState("main"),2),E=w[0],z=w[1];if(!u)return null;var x,S=[{component:n.createElement(Ze,{email:a,selected_login:u,toggleModal:_,password_type:E,setPasswordType:z,multi_step_ref:h,platform:s,onChangeActiveTabIndex:function(e){y(e)},account_group:f})},{component:n.createElement(Ge,{server:p,sendVerifyEmail:g,account_type:m,account_group:f,password_type:E})}];return n.createElement(n.Suspense,{fallback:n.createElement(i.UILoader,null)},n.createElement(i.DesktopWrapper,null,n.createElement(i.Modal,{className:"cfd-password-manager__modal",disableApp:r,enableApp:t,is_open:o,title:(x=b,0===x?(0,c.localize)("Manage {{platform}} password",{platform:(0,l.getCFDPlatformLabel)(s)}):"real"===f?(0,c.localize)("Manage {{platform}} Real {{account_title}} account password",{platform:(0,l.getCFDPlatformLabel)(s),account_title:d}):(0,c.localize)("Manage {{platform}} Demo {{account_title}} account password",{platform:(0,l.getCFDPlatformLabel)(s),account_title:d})),toggleModal:_,height:"688px",width:"904px",should_header_stick_body:!1},n.createElement(Je,{steps:S,multi_step_ref:h}))),n.createElement(i.MobileWrapper,null,n.createElement(i.PageOverlay,{is_open:o,portal_id:"deriv_app",header:function(e){return 0===e?(0,c.localize)("Manage {{platform}} password",{platform:(0,l.getCFDPlatformLabel)(s)}):(0,c.localize)("Manage password")}(b),onClickClose:_},n.createElement(Je,{steps:S,multi_step_ref:h}))))};Qe.propTypes={email:Pe().string,is_visible:Pe().bool,selected_account:Pe().string,selected_server:Pe().string,selected_login:Pe().string,toggleModal:Pe().func,platform:Pe().string};const et=(0,d.$j)((function(e){var t=e.modules.cfd,a=e.client,n=e.ui;return{email:a.email,enableApp:n.enableApp,disableApp:n.disableApp,sendVerifyEmail:t.sendVerifyEmail}}))(Qe);var tt=a("@deriv/account/dist/account/js/sent-email-modal"),at=a.n(tt),nt=a("./src/Stores/Modules/CFD/Helpers/cfd-config.ts");function rt(){return rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},rt.apply(this,arguments)}var ot=function(e){var t=e.className;return n.createElement(i.Icon,{className:t,icon:"IcCheckmarkCircle",custom_color:"var(--status-success)",size:24})},it=function(e){var t=e.classNameMessage,a=void 0===t?"":t,r=e.has_cancel,o=e.has_submit,l=e.icon,s=e.message,u=e.onCancel,d=e.onSubmit,_=e.heading,m=e.icon_size,f=e.text_submit,p=e.text_cancel,g=e.is_open,h=e.toggleModal,v=e.title,b=e.has_close_icon,y=e.width,w=void 0===y?"":y,E=e.is_medium_button;return n.createElement(i.Modal,{className:"cfd-success-dialog",is_open:g,toggleModal:h,has_close_icon:b,small:!v,title:v,width:w},n.createElement(i.Modal.Body,null,n.createElement("div",{className:Oe()("success-change__icon-area",{"success-change__icon-area--large":"large"===m,"success-change__icon-area--xlarge":"xlarge"===m})},l,n.createElement(ot,{className:"bottom-right-overlay"})),!_&&n.createElement(i.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},n.createElement(c.Localize,{i18n_default_text:"Success!"})),_&&_,n.isValidElement(s)&&s,!n.isValidElement(s)&&n.createElement("p",{className:a},s)),n.createElement(i.Modal.Footer,null,r&&n.createElement(i.Button,rt({onClick:u,has_effect:!0,text:p||(0,c.localize)("Maybe later"),secondary:!0},E?{medium:!0}:{large:!0})),o&&n.createElement(i.Button,rt({has_effect:!0,onClick:d,text:f,primary:!0},E?{medium:!0}:{large:!0}))))};it.defaultProps={icon_size:"large",has_cancel:!1,has_submit:!0},it.propTypes={classNameMessage:Pe().string,has_cancel:Pe().bool,has_submit:Pe().bool,heading:Pe().oneOfType([Pe().string,Pe().object]),icon:Pe().object,icon_size:Pe().string,icon_type:Pe().string,is_medium_button:Pe().bool,message:Pe().oneOfType([Pe().string,Pe().object]),onCancel:Pe().func,onSubmit:Pe().func,text_cancel:Pe().string,text_submit:Pe().string,title:Pe().string,width:Pe().string};const lt=it;function ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function st(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(a),!0).forEach((function(t){ut(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ct(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ut(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function dt(){return dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},dt.apply(this,arguments)}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){if(e){if("string"==typeof e)return ft(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ft(e,t):void 0}}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var pt=function(e){var t=e.should_set_trading_password,a=e.should_show_server_form,r=e.account_title,o=e.is_password_reset_error,s=e.platform,u=(0,l.isMobile)()?"p":"span",d=(0,l.isMobile)()?{padding:"2rem"}:{};return n.createElement(i.Text,{styles:d,as:u,line_height:"m",weight:"bold",size:"s",align:"center"},!a&&!t&&!o&&n.createElement(c.Localize,{i18n_default_text:"Enter your {{platform}} password",values:{platform:(0,l.getCFDPlatformLabel)(s)}}),!a&&o&&n.createElement(c.Localize,{i18n_default_text:"Too many attempts"}),a&&n.createElement(c.Localize,{i18n_default_text:"Choose a region for your DMT5 real {{ account_type }} account",values:{account_type:r}}))},gt=function(e,t,a,r,o){if(!o&&!r)return"";var i="real"===o?(0,c.localize)("real"):(0,c.localize)("demo"),s=(0,nt.o)(t)[o][r].short_title;return"real"===o?a?(0,c.localize)("We need proof of your identity and address before you can start trading."):n.createElement(c.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}}</1> account. To start trading, transfer funds from your Deriv account into this account.",values:{type:s,platform:(0,l.getCFDPlatformLabel)(e),category:i},components:[n.createElement("i",{className:"cfd-account__platform",key:0}),n.createElement("strong",{key:1})]}):n.createElement(c.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}}</1> account.",values:{type:s,platform:(0,l.getCFDPlatformLabel)(e),category:i},components:[n.createElement("i",{className:"cfd-account__platform",key:0}),n.createElement("strong",{key:1})]})},ht=n.memo((function(e){var t=e.platform,a=e.type,r=e.is_eu;if(t===l.CFD_PLATFORMS.DXTRADE){if("synthetic"===a)return n.createElement(i.Icon,{icon:"IcDxtradeSyntheticPlatform",size:128});if("financial"===a)return n.createElement(i.Icon,{icon:"IcDxtradeFinancialPlatform",size:128})}switch(a){case"synthetic":return n.createElement(i.Icon,{icon:"IcMt5SyntheticPlatform",size:128});case"financial":return r?n.createElement(i.Icon,{icon:"IcMt5Cfds",size:128}):n.createElement(i.Icon,{icon:"IcMt5FinancialPlatform",size:128});default:return n.createElement(i.Icon,{icon:"IcMt5FinancialStpPlatform",size:128})}}));ht.displayName="IconType";var vt=function(e,t,a,n){t(e),a().then((function(){n("password",!0)}))},bt=function(e){var t=e.password,a=e.platform,r=e.validatePassword,o=e.onSubmit,s=e.error_message;return n.createElement(p.J9,{initialValues:{password:t},enableReinitialize:!0,validate:r,onSubmit:o},(function(e){var t=e.errors,r=e.isSubmitting,o=e.handleBlur,u=e.handleChange,d=e.handleSubmit,_=e.setFieldTouched,m=e.touched,f=e.values,p=e.validateForm;return n.createElement("form",{onSubmit:d},n.createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body cfd-password-modal__create-password-content"},n.createElement(i.Icon,{icon:a===l.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),n.createElement(i.Text,{size:"s",weight:"bold",className:"cfd-password-modal__create-password-title"},n.createElement(c.Localize,{i18n_default_text:"Create a {{platform}} password",values:{platform:(0,l.getCFDPlatformLabel)(a)}})),n.createElement(i.Text,{size:"xs",align:"center",className:"cfd-password-modal__create-password-description"},n.createElement(c.Localize,{i18n_default_text:"You can use this password for all your {{platform}} accounts.",values:{platform:(0,l.getCFDPlatformLabel)(a)}})),n.createElement("div",{className:"input-element"},n.createElement(i.PasswordMeter,{input:f.password,has_error:!(!m.password||!t.password),custom_feedback_messages:(0,l.getErrorMessages)().password_warnings},(function(){return n.createElement(i.PasswordInput,{autoComplete:"new-password",label:(0,c.localize)("{{platform}} password",{platform:(0,l.getCFDPlatformLabel)(a)}),error:m.password&&t.password||(0===f.password.length?s:""),name:"password",value:f.password,onBlur:o,onChange:function(e){vt(e,u,p,_)}})}))),n.createElement(i.FormSubmitButton,{is_disabled:!f.password||Object.keys(t).length>0,is_loading:r,label:(0,c.localize)("Create {{platform}} password",{platform:(0,l.getCFDPlatformLabel)(a)}),is_center:!0})))}))},yt=function(e){var t=e.has_mt5_account,a=e.platform,r=e.error_message,o=e.validatePassword,c=e.submitPassword,s=n.useRef(),u=_t(n.useState(""),2),d=u[0],_=u[1],m=[{component:n.createElement(bt,{password:d,platform:a,error_message:r,validatePassword:o,onSubmit:function(e,n){var r;a===l.CFD_PLATFORMS.MT5&&t?(_(e.password),null===(r=s.current)||void 0===r||r.goNextStep()):c(e,n)}})},{component:n.createElement(Le,{className:"cfd-password-modal__change-password-confirmation",platform:a,onConfirm:function(e,t){return c({password:d},t)},onCancel:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.goPrevStep()}})}];return n.createElement(i.MultiStep,{ref:s,steps:m})},wt=function(e){var t,a,r,o,s=n.useMemo((function(){return e.should_show_server_form?(0,c.localize)("Next"):"PasswordReset"===e.error_type?(0,c.localize)("Try later"):(0,c.localize)("Add account")}),[e.should_show_server_form,e.error_type]),u=e.should_show_server_form||!(0,l.isDesktop)()||!e.should_set_trading_password||"PasswordReset"===e.error_type,d=(a=(t=e).should_set_trading_password,r=t.error_type,o=t.should_show_server_form,a&&"PasswordReset"!==r?(0,l.isDesktop)()?null:(0,c.localize)("Cancel"):o?(0,c.localize)("Back"):(0,c.localize)("Forgot password?")),_=function(){if(u)return e.should_set_trading_password?e.onCancel():e.onForgotPassword()};return"PasswordReset"===e.error_type?n.createElement(n.Fragment,null,n.createElement("div",{className:"cfd-password-reset"},n.createElement("div",{className:"cfd-password-modal__content cfd-password-modal__content--password-reset"},n.createElement(i.Text,{as:"p",line_height:"24",size:"xs"},n.createElement(c.Localize,{i18n_default_text:"Please try again in a minute."}))),n.createElement(p.J9,{onSubmit:e.closeModal,initialValues:{}},(function(e){var t=e.handleSubmit;return n.createElement("form",{onSubmit:t},n.createElement(i.FormSubmitButton,{has_cancel:u,cancel_label:d,onCancel:_,is_absolute:(0,l.isMobile)(),label:s}))})))):e.should_set_trading_password?n.createElement(yt,{platform:e.platform,error_message:e.error_message,validatePassword:e.validatePassword,submitPassword:e.submitPassword,has_mt5_account:e.has_mt5_account}):n.createElement(p.J9,{initialValues:{password:""},enableReinitialize:!0,validate:e.validatePassword,onSubmit:e.submitPassword},(function(t){var a=t.errors,r=t.isSubmitting,o=t.handleBlur,m=t.handleChange,f=t.handleSubmit,p=t.setFieldTouched,g=t.touched,h=t.values,v=t.validateForm;return n.createElement("form",{onSubmit:f},n.createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body"},!e.should_set_trading_password&&n.createElement(i.Text,{size:"xs",className:"dc-modal__container_cfd-password-modal__account-title"},n.createElement(c.Localize,{i18n_default_text:"Enter your {{platform}} password to add a {{platform}} {{account}} account.",values:{platform:(0,l.getCFDPlatformLabel)(e.platform),account:e.account_title}})),n.createElement("div",{className:"input-element"},n.createElement(i.PasswordInput,{autoComplete:"new-password",label:(0,c.localize)("{{platform}} password",{platform:(0,l.getCFDPlatformLabel)(e.platform)}),error:g.password&&a.password||(0===h.password.length?e.error_message:""),name:"password",value:h.password,onBlur:o,onChange:function(e){vt(e,m,v,p)}})),e.is_real_financial_stp&&!e.is_bvi&&n.createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},n.createElement(c.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (FX) Ltd. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA)."})),e.is_real_financial_stp&&e.is_bvi&&n.createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},n.createElement(c.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (BVI) Ltd. All trading in this account is subject to the regulations and guidelines of the British Virgin Islands Financial Services Commission (BVIFSC). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the British Virgin Islands Financial Services Commission (BVIFSC)."})),"PasswordError"===e.error_type&&n.createElement(i.Text,{size:"xs",as:"p",className:"dc-modal__container_mt5-password-modal__hint"},n.createElement(c.Localize,{i18n_default_text:"Hint: You may have entered your Deriv password, which is different from your {{platform}} password.",values:{platform:(0,l.getCFDPlatformLabel)(e.platform)}}))),n.createElement(i.FormSubmitButton,{is_disabled:!h.password,has_cancel:u,cancel_label:d,onCancel:_,is_absolute:(0,l.isMobile)(),is_loading:r,label:s,is_center:e.should_set_trading_password,form_error:e.form_error}))}))},Et=function(e){var t=e.show_warning,a=void 0===t||t,r=e.platform;return a?n.createElement("div",{className:"cfd-password-modal__warning"},n.createElement(i.Text,{as:"p",className:"cfd-password-modal__warning-text",lineHeight:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},n.createElement(c.Localize,{i18n_default_text:"Due to an issue on our server, some of your {{platform}} accounts are unavailable at the moment. Please bear with us and thank you for your patience.",values:{platform:r===l.CFD_PLATFORMS.MT5?"DMT5":"Deriv X"}}))):null},zt=function(e){var t,a,r=dt({},e),o=n.useMemo((function(){return function(e){return function(e){if(Array.isArray(e))return ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.mt5_trading_servers).map((function(e){var t,a,n,r=1===(null===(t=e.geolocation)||void 0===t?void 0:t.sequence)?"":null===(a=e.geolocation)||void 0===a?void 0:a.sequence,o=e.disabled?"(".concat(e.message_to_client,")"):"";return st(st({},e),{label:"".concat(null===(n=e.geolocation)||void 0===n?void 0:n.region," ").concat(r," ").concat(o),value:e.id,disabled:e.disabled})})).sort((function(e,t){return e.recommended?-1:1})).sort((function(e,t){return(e.disabled?e.disabled:0)-(t.disabled?t.disabled:0)}))}),[r.mt5_trading_servers]);return n.createElement(n.Fragment,null,n.createElement(Et,{platform:r.platform,show_warning:r.has_error}),n.createElement(p.J9,{initialValues:{server:null!==(t=null===(a=r.mt5_trading_servers.find((function(e){return!e.disabled})))||void 0===a?void 0:a.id)&&void 0!==t?t:""},validate:r.validateServer,onSubmit:function(e){return r.submitMt5Server(e.server)}},(function(e){var t,a=e.handleSubmit,s=e.setFieldValue,u=e.errors,d=e.values,_=e.isSubmitting;return n.createElement("form",{onSubmit:a},n.createElement("div",{className:"cfd-password-modal__content"},n.createElement("div",{className:"dc-modal__container_cfd-password-modal__body"},n.createElement("div",{className:"input-element"},n.createElement(i.RadioGroup,{className:"cfd-password-modal__radio",name:"server",required:!0,selected:null===(t=r.mt5_trading_servers.find((function(e){return!e.disabled})))||void 0===t?void 0:t.id,onToggle:function(e){e.persist(),s("server",e.target.value)}},o.map((function(e){return n.createElement(i.RadioGroup.Item,{key:e.value,label:e.label,value:e.value,disabled:e.disabled})})))))),n.createElement(i.FormSubmitButton,{is_disabled:_||!d.server||Object.keys(u).length>0,has_cancel:!0,cancel_label:(0,c.localize)("Cancel"),onCancel:r.closeModal,is_absolute:(0,l.isMobile)(),is_loading:_,label:(0,c.localize)("Next"),form_error:r.form_error}))})))};const xt=(0,d.$j)((function(e){var t=e.client,a=e.modules;return{email:t.email,account_title:a.cfd.account_title,account_type:a.cfd.account_type,account_status:t.account_status,disableCFDPasswordModal:a.cfd.disableCFDPasswordModal,error_message:a.cfd.error_message,error_type:a.cfd.error_type,getAccountStatus:a.cfd.getAccountStatus,has_cfd_error:a.cfd.has_cfd_error,landing_companies:t.landing_companies,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_logged_in:t.is_logged_in,is_cfd_success_dialog_enabled:a.cfd.is_cfd_success_dialog_enabled,is_cfd_password_modal_enabled:a.cfd.is_cfd_password_modal_enabled,is_dxtrade_allowed:t.is_dxtrade_allowed,setMt5Error:a.cfd.setError,setCFDSuccessDialog:a.cfd.setCFDSuccessDialog,submitMt5Password:a.cfd.submitMt5Password,submitCFDPassword:a.cfd.submitCFDPassword,cfd_new_account:a.cfd.new_account_response,mt5_trading_servers:t.mt5_trading_servers,mt5_login_list:t.mt5_login_list,is_fully_authenticated:t.is_fully_authenticated}}))((0,r.withRouter)((function(e){var t,a,r=e.account_title,o=e.account_type,s=e.account_status,u=e.disableCFDPasswordModal,d=e.email,_=e.error_message,m=e.error_type,f=e.form_error,p=e.getAccountStatus,g=e.history,h=e.is_eu,v=e.is_eu_country,b=e.is_fully_authenticated,y=e.is_logged_in,w=e.is_cfd_password_modal_enabled,E=e.is_cfd_success_dialog_enabled,z=e.is_dxtrade_allowed,x=e.platform,S=e.has_cfd_error,M=e.has_suspended_account,D=e.landing_companies,T=e.mt5_login_list,C=e.cfd_new_account,N=e.setCFDSuccessDialog,F=e.setMt5Error,P=e.submitMt5Password,A=e.submitCFDPassword,k=e.mt5_trading_servers,O=_t(n.useState(""),2),L=O[0],j=O[1],I=_t(n.useState(!0),2),R=I[0],B=I[1],U="bvi"===(null==D||null===(t=D.mt_financial_company)||void 0===t||null===(a=t.financial_stp)||void 0===a?void 0:a.shortcode),W=Boolean(null==T?void 0:T.length),V=Array.isArray(null==s?void 0:s.status)&&s.status.includes(x===l.CFD_PLATFORMS.MT5?"mt5_password_not_set":"dxtrade_password_not_set"),X="PasswordError"===m,q="PasswordReset"===m,$=_t(n.useState(!1),2),H=$[0],Y=$[1],K=function(){N(!1),F(!1),setTimeout((function(){return j("")}),300)},G=function(){K(),u()},J=function(){G();var e=x===l.CFD_PLATFORMS.MT5?1:2;"real"===o.category?e=Number("".concat(e,"0")):"demo"===o.category&&(e=Number("".concat(e,"1")));var t=x===l.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";l.WS.verifyEmail(d,t,{url_parameters:{redirect_to:e}}),Y(!0)},Z=w&&!E&&(!S||X||q),Q=!S&&E&&w&&R,ee=H&&R,te="real_financial_stp"===[o.category,o.type].join("_"),ae="real_synthetic"===[o.category,o.type].join("_"),ne=n.useMemo((function(){return(y?!h:!v)&&ae&&T.some((function(e){return"real"===e.account_type&&("gaming"===e.market_type||"synthetic"===e.market_type)}))&&!L&&x===l.CFD_PLATFORMS.MT5}),[h,v,y,ae,L,T,x]),re=n.useMemo((function(){return!!Z&&(ne?(0,l.isDesktop)():!!V||(0,l.isDesktop)())}),[V,Z,ne]),oe=n.useMemo((function(){return!(!Z||!ne&&V)&&(0,l.isMobile)()}),[V,Z,ne]),ie=h&&!b,le=n.useMemo((function(){return"real"===o.category?ie?(0,c.localize)("Submit proof"):(0,c.localize)("Transfer now"):(0,c.localize)("Continue")}),[o,ie]);n.useEffect((function(){(!X&&!q&&S||E)&&j("")}),[S,E,X,q]);var ce=n.createElement(wt,{is_bvi:U,account_title:r,closeModal:G,error_type:m,error_message:_,has_mt5_account:W,form_error:f,should_set_trading_password:V,is_real_financial_stp:te,validatePassword:function(e){var t,a={};return(0,l.validLength)(e.password,{min:8,max:25})?(0,l.validPassword)(e.password)||(a.password=(0,l.getErrorMessages)().password()):a.password=(0,c.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),(null===(t=e.password)||void 0===t?void 0:t.toLowerCase())===d.toLowerCase()&&(a.password=(0,c.localize)("Your password cannot be the same as your email address.")),a},should_show_server_form:ne,onForgotPassword:J,submitPassword:function(e,t){x===l.CFD_PLATFORMS.MT5?P(st(st({},e),{},{server:L}),t):(e.platform=x,A(e,t))},platform:x,is_dxtrade_allowed:z,onCancel:G}),se=n.createElement(zt,{mt5_trading_servers:k,mt5_login_list:T,account_title:r,closeModal:G,submitMt5Server:j,platform:x,has_error:M}),ue=n.createElement(i.Modal,{className:"cfd-password-modal",has_close_icon:!ne||V,is_open:re,toggleModal:G,should_header_stick_body:!0,renderTitle:function(){return n.createElement(pt,{should_show_server_form:ne,should_set_trading_password:V,account_title:r,is_password_reset_error:q,platform:x})},onUnmount:function(){return p(x)},onExited:function(){return B(!0)},onEntered:function(){return B(!1)},width:(0,l.isMobile)()?"32.8rem":"auto"},ne?se:ce),de=n.createElement(i.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:oe,onClose:G,wrapper_classname:"cfd-password-modal"},n.createElement(pt,{should_show_server_form:ne,should_set_trading_password:V,account_title:r,has_mt5_account:W,is_password_reset_error:q,platform:x}),ne?se:ce),_e=ie?n.createElement(i.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},(0,c.localize)("Your account is ready")):"";return n.createElement(n.Fragment,null,ue,de,n.createElement(lt,{is_open:Q,toggleModal:G,onCancel:G,onSubmit:function(){u(),K(),"real"===o.category&&(ie?g.push(l.routes.proof_of_identity):(sessionStorage.setItem("cfd_transfer_to_login_id",C.login||""),g.push(l.routes.cashier_acc_transfer)))},classNameMessage:"cfd-password-modal__message",heading:_e,message:gt(x,h,ie,o.type,o.category),icon:n.createElement(ht,{platform:x,type:o.type,is_eu:h}),icon_size:"xlarge",text_submit:le,has_cancel:"real"===o.category,has_close_icon:!1,width:(0,l.isMobile)()?"32.8rem":"auto",is_medium_button:(0,l.isMobile)()}),n.createElement(at(),{is_open:ee,identifier_title:"trading_password",onClose:function(){return Y(!1)},onClickSendEmail:J}))}))),St=(0,d.$j)((function(e){var t=e.ui,a=e.modules;return{clearCFDError:a.cfd.clearCFDError,disableApp:t.disableApp,enableApp:t.enableApp,error_message:a.cfd.error_message,error_type:a.cfd.error_type,has_cfd_error:a.cfd.has_cfd_error,is_cfd_success_dialog_enabled:a.cfd.is_cfd_success_dialog_enabled}}))((function(e){var t=e.clearCFDError,a=e.disableApp,r=e.enableApp,o=e.error_message,l=e.error_type,s=e.has_cfd_error,u=e.is_cfd_success_dialog_enabled,d=s&&!u&&l&&!["PasswordReset","PasswordError"].includes(l);return n.createElement(i.Dialog,{title:(0,c.localize)("Something’s not right"),confirm_button_text:(0,c.localize)("OK"),onConfirm:t,disableApp:a,enableApp:r,is_visible:d},o||n.createElement(c.Localize,{i18n_default_text:"Sorry, an error occured while processing your request."}))})),Mt=(0,d.$j)((function(e){var t=e.ui,a=e.modules;return{is_top_up_virtual_open:t.is_top_up_virtual_open,is_top_up_virtual_in_progress:t.is_top_up_virtual_in_progress,is_top_up_virtual_success:t.is_top_up_virtual_success,closeTopUpModal:t.closeTopUpModal,closeSuccessTopUpModal:t.closeSuccessTopUpModal,current_account:a.cfd.current_account,dxtrade_companies:a.cfd.dxtrade_companies,mt5_companies:a.cfd.mt5_companies,topUpVirtual:a.cfd.topUpVirtual}}))((function(e){var t=e.dxtrade_companies,a=e.mt5_companies,r=e.current_account,o=e.closeSuccessTopUpModal,s=e.closeTopUpModal,u=e.is_top_up_virtual_open,d=e.is_top_up_virtual_in_progress,_=e.is_top_up_virtual_success,m=e.platform,f=e.topUpVirtual,p=n.useCallback((function(){return(a||t)&&r?a[r.category][r.type].title:""}),[a,t,r]),g=(0,l.getCFDPlatformLabel)(m);if(!a&&!t||!r)return null;var h=1e3,v=1e4;return n.createElement(n.Fragment,null,n.createElement(i.Modal,{toggleModal:s,is_open:u,className:"top-up-virtual",title:(0,c.localize)("Fund top up"),width:"384px"},n.createElement("div",{className:"dc-modal__container_top-up-virtual__body"},n.createElement(i.Text,{as:"p",align:"center",size:"xxs",line_height:"xs",className:"dc-modal__container_top-up-virtual__description"},n.createElement(c.Localize,{i18n_default_text:"You can top up your demo account with an additional <0></0> if your balance is <1></1> or less.",components:[n.createElement(i.Money,{key:0,amount:v,currency:r.currency,show_currency:!0}),n.createElement(i.Money,{key:1,amount:h,currency:r.currency,show_currency:!0})]})),n.createElement("h4",{className:"dc-modal__container_top-up-virtual--h4"},n.createElement(c.Localize,{i18n_default_text:"{{ platform }} {{ account_title }} account",values:{platform:g,account_title:p()}})),n.createElement("div",null,n.createElement(i.Text,{as:"p",align:"center",size:"xxs"},n.createElement(c.Localize,{i18n_default_text:"Current balance"})),n.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},n.createElement(i.Money,{amount:r.display_balance,currency:r.currency,has_sign:r.balance<0}))),n.createElement("div",{className:"dc-modal__container_top-up-virtual--button"},n.createElement(i.Button,{is_disabled:r.balance>1e3||d,type:"button",is_loading:d,onClick:function(){return f(m)},primary:!0,large:!0},!d&&n.createElement(c.Localize,{i18n_default_text:"Top up  <0></0>",components:[n.createElement(i.Money,{key:0,amount:v,currency:r.currency,show_currency:!0})]}))))),n.createElement(lt,{is_open:_,toggleModal:function(){o()},has_close_icon:!0,title:(0,c.localize)("Fund top up"),icon:n.createElement(i.Icon,{icon:"IcCashierWallet",size:128}),heading:n.createElement("h3",{className:"cfd-success-topup__heading"},n.createElement(c.Localize,{i18n_default_text:"<0></0> has been credited into your {{platform}} {{title}} account.",values:{platform:g,title:p()},components:[n.createElement(i.Money,{key:0,amount:v,currency:r.currency,show_currency:!0})]})),message:n.createElement("div",{className:"cfd-success-topup__description"},n.createElement("p",null,n.createElement(c.Localize,{i18n_default_text:"New current balance"})),n.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},n.createElement(i.Money,{amount:r.balance,currency:r.currency}))),icon_size:"large",has_cancel:!1,has_submit:!1,width:"384px"}))}));var Dt=["current_list","children","is_eu"];function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ct(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(a),!0).forEach((function(t){Nt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Nt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Pt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var At=function(e){var t,a,n,r,o,i=e.current_list,l=e.children,c=e.is_eu,s=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Dt),u=localStorage.getItem("cfd_reset_password_intent"),d=localStorage.getItem("cfd_reset_password_type")||"main";if(u&&/(real|demo)\.(financial_stp|financial|synthetic)/.test(u)&&i){var _=Ft(u.split("."),3);o=_[0],t=_[1],a=_[2],n=i["mt5.".concat(t,".").concat(a,"@").concat(o)].login,r=(0,nt.o)(c)[t][a].title}else if(i){var m,f,p,g,h,v,b=Ft(Object.keys(i).pop().split("."),3);o=b[0],t=b[1],a=b[2],n=null!==(m=null===(f=i["mt5.".concat(t,".").concat(a,"@").concat(o)])||void 0===f?void 0:f.login)&&void 0!==m?m:"",r=null!==(p=null===(g=(0,nt.o)(c))||void 0===g||null===(h=g[t])||void 0===h||null===(v=h[a])||void 0===v?void 0:v.title)&&void 0!==p?p:""}else n="",r="";return l(Ct({login:n,title:r,type:d},s))};const kt=n.memo((0,o.withRouter)((0,d.$j)((function(e){var t=e.modules.cfd,a=e.client;return{email:a.email,is_eu:a.is_eu,is_cfd_reset_password_modal_enabled:t.is_cfd_reset_password_modal_enabled,setCFDPasswordResetModal:t.setCFDPasswordResetModal,current_list:t.current_list,is_logged_in:a.is_logged_in}}))((function(e){var t=e.current_list,a=e.email,r=e.is_cfd_reset_password_modal_enabled,o=e.is_eu,s=e.is_logged_in,u=e.platform,d=e.setCFDPasswordResetModal,_=e.history,m=Ft(n.useState({error_code:void 0,has_error:!1,error_message:void 0,is_finished:!1,changed_password_type:""}),2),f=m[0],g=m[1],h=function(){localStorage.removeItem("cfd_reset_password_intent"),localStorage.removeItem("cfd_reset_password_type"),localStorage.removeItem("cfd_reset_password_code"),_.push("".concat(l.routes.mt5))},v=function(e){var t={};return(0,l.validLength)(e.new_password,{min:8,max:25})?(0,l.validPassword)(e.new_password)||(t.new_password=(0,l.getErrorMessages)().password()):t.new_password=(0,c.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.new_password.toLowerCase()===a.toLowerCase()&&(t.new_password=(0,c.localize)("Your password cannot be the same as your email address.")),t},b=function(){return 0!==Object.keys(t).length},y=!b()&&localStorage.getItem("cfd_reset_password_code");return n.createElement(i.Modal,{className:"cfd-reset-password-modal",is_open:r&&!y,toggleModal:function(){return d(!1)},title:u===l.CFD_PLATFORMS.DXTRADE?(0,c.localize)("Reset Deriv X investor password"):(0,c.localize)("Reset DMT5 investor password"),onMount:function(){return(0,l.redirectToLogin)(s,(0,c.getLanguage)(),!0)},should_header_stick_body:!1},!b()&&!f.has_error&&n.createElement(i.Loading,{is_fullscreen:!1}),b()&&!f.has_error&&!f.is_finished&&n.createElement(At,{current_list:t,is_eu:o},(function(e){var t=e.type,a=e.login;return n.createElement(p.J9,{initialValues:{new_password:""},validate:v,onSubmit:function(e,n){return function(e,t,a,n){var r=n.setSubmitting;r(!0);var o={account_id:a,platform:l.CFD_PLATFORMS.MT5,new_password:e.new_password,verification_code:localStorage.getItem("cfd_reset_password_code")};l.WS.tradingPlatformInvestorPasswordReset(o).then((function(e){var a;!e.error||"InvalidToken"!==e.error.code&&"BadSession"!==e.error.code?(g(Ct(Ct({},f),{},{is_finished:!0,changed_password_type:t})),h()):(a=e.error,g(Ct(Ct({},f),{},{error_code:a.code,has_error:!0,error_message:a.message}))),r(!1)}))}(e,t,a,n)}},(function(e){var a=e.handleSubmit,r=e.errors,o=e.values,s=e.isSubmitting,u=e.handleChange,d=e.handleBlur,_=e.touched;return n.createElement("form",{autoComplete:"off",onSubmit:a},n.createElement("div",{className:"cfd-reset-password"},n.createElement("div",{className:"cfd-reset-password__container"},n.createElement("div",{className:"cfd-reset-password__password-area"},n.createElement(i.PasswordMeter,{input:o.new_password,has_error:!(!_.new_password||!r.new_password),custom_feedback_messages:(0,l.getErrorMessages)().password_warnings},(function(e){var a=e.has_warning;return n.createElement(i.PasswordInput,{autoComplete:"new-password",className:"cfd-reset-password__password-field",name:"new_password",label:(0,c.localize)("New {{type}} password",{type:t}),onChange:u,onBlur:d,error:_.new_password&&r.new_password,value:o.new_password,"data-lpignore":"true",required:!0,hint:!a&&(0,c.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols.")})}))),s&&n.createElement(i.Loading,{is_fullscreen:!1}),!s&&n.createElement(i.FormSubmitButton,{is_disabled:s||!o.new_password||Object.keys(r).length>0,errors:r,is_center:!0,large:!0,label:(0,c.localize)("Create {{type}} password",{type:t})}))))}))})),f.has_error&&n.createElement("div",{className:"cfd-reset-password__error"},n.createElement(i.Icon,{icon:"IcMt5Expired",size:128}),n.createElement(i.Text,{as:"p",size:"xs",weight:"bold",align:"center",className:"cfd-reset-password__heading"},f.error_message),"InvalidToken"===f.error_code&&n.createElement(i.Text,{as:"p",color:"prominent",size:"xs",align:"center",className:"cfd-reset-password__description--is-centered"},n.createElement(c.Localize,{i18n_default_text:"Please request a new password and check your email for the new token."})),n.createElement(i.Button,{primary:!0,large:!0,className:"cfd-reset-password__confirm-button",onClick:function(){h(),d(!1)}},n.createElement(c.Localize,{i18n_default_text:"Ok"}))),f.is_finished&&n.createElement("div",{className:"cfd-reset-password__success"},n.createElement(i.Icon,{icon:"IcMt5PasswordUpdated",size:128}),n.createElement("div",{className:"cfd-reset-password__description"},n.createElement(i.Text,{as:"p",size:"xs",align:"center",weight:"bold",line_height:"xxl"},n.createElement(c.Localize,{i18n_default_text:"Password saved"})),n.createElement(c.Localize,{i18n_default_text:"Your {{account_type}} password has been changed.",values:{account_type:"main"===f.changed_password_type?(0,c.localize)("main"):(0,c.localize)("investor")}})),n.createElement(i.Button,{primary:!0,large:!0,onClick:function(){return d(!1)}},n.createElement(c.Localize,{i18n_default_text:"Ok"}))))})))),Ot=(0,d.$j)((function(e){var t=e.ui,a=e.client,n=e.modules.cfd;return{is_fully_authenticated:a.is_fully_authenticated,enableApp:t.enableApp,disableApp:t.disableApp,toggleModal:n.closeCFDPendingDialog,is_cfd_pending_dialog_open:n.is_cfd_pending_dialog_open}}))((function(e){var t=e.enableApp,a=e.disableApp,r=e.toggleModal,o=e.is_cfd_pending_dialog_open,l=e.is_fully_authenticated;return n.createElement(i.Modal,{title:l?" ":(0,c.localize)("Thanks for submitting your documents!"),className:"cfd-pending-dialog",is_open:o,disableApp:a,enableApp:t,toggleModal:r,has_close_icon:!1,small:!0},n.createElement(i.Modal.Body,null,l?n.createElement(c.Localize,{i18n_default_text:"Your MT5 Financial STP account is almost ready, please set your password now."}):n.createElement(c.Localize,{i18n_default_text:"We’ll process your documents within 1-3 days. Once they are verified, we’ll notify you via email."})),n.createElement(i.Modal.Footer,null,n.createElement(i.Button,{has_effect:!0,text:(0,c.localize)("OK"),onClick:r,primary:!0})))})),Lt={mt5:{real_synthetic_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("20+")}}},real_financial_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("150+")}}},eu_real_financial_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("50+")}}},real_financial_stp_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:100")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("70+")}}},au_real_financial_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("100+")}}},demo_financial_stp_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:100")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("70+")}}}},dxtrade:{real_synthetic_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("20+")}}},real_financial_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("90+")}}},eu_real_financial_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("90+")}}},au_real_financial_specs:{leverage:{key:function(){return(0,c.localize)("Leverage")},value:function(){return(0,c.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,c.localize)("Margin call")},value:function(){return(0,c.localize)("100%")}},"stop-out-level":{key:function(){return(0,c.localize)("Stop out level")},value:function(){return(0,c.localize)("50%")}},"number-of-assets":{key:function(){return(0,c.localize)("Number of assets")},value:function(){return(0,c.localize)("90+")}}}}};var jt=a("../../node_modules/react-transition-group/esm/CSSTransition.js"),It=function(e){var t=e.text,a=e.className;return n.createElement("div",{className:a},n.createElement(i.Clipboard,{text_copy:t,info_message:(0,l.isMobile)()?"":(0,c.localize)("copy"),success_message:(0,c.localize)("copied!"),popoverAlignment:(0,l.isMobile)()?"left":"bottom"}))},Rt={mt5:{synthetic:"IcMt5SyntheticPlatform",financial:"IcMt5FinancialPlatform",financial_stp:"IcMt5FinancialStpPlatform",cfd:"IcMt5CfdPlatform"},dxtrade:{synthetic:"IcDxtradeSyntheticPlatform",financial:"IcDxtradeFinancialPlatform",cfd:"IcMt5CfdPlatform"}},Bt=n.forwardRef((function(e,t){var a=e.onSelectAccount,r=e.is_disabled;return n.createElement("div",{onClick:r?function(){}:a,className:Oe()("cfd-account-card__add-server",{"cfd-account-card__add-server--disabled":r}),ref:t},n.createElement("span",{className:"cfd-account-card__add-server--icon"},"+"),n.createElement(c.Localize,{i18n_default_text:"Add region"}))}));Bt.displayName="AddTradeServerButton";var Ut=function(e){var t=e.value,a=e.is_bold;return n.createElement("div",{className:"cfd-account-card__spec-box"},n.createElement(i.Text,{size:"xs",weight:a?"bold":"",className:"cfd-account-card__spec-text"},t),n.createElement(It,{text:t,className:"cfd-account-card__spec-copy"}))},Wt=function(e){var t=e.platform,a=e.onClick;return n.createElement("div",{className:"cfd-account-card__password-box"},n.createElement("div",{className:"cfd-account-card__password-text"},n.createElement(i.Popover,{alignment:"right",message:(0,c.localize)("Use these credentials to log in to your {{platform}} account on the website and mobile apps.",{platform:(0,l.getCFDPlatformLabel)(t)}),classNameBubble:"cfd-account-card__password-tooltip"},n.createElement(i.Text,{size:"xs"},"•••••••••••••••"))),n.createElement(i.Popover,{alignment:"bottom",message:(0,c.localize)("Change Password")},n.createElement(i.Button,{className:"cfd-account-card__password-action toolbar__btn--icon",transparent:!0,onClick:a,icon:n.createElement(i.Icon,{icon:"IcEdit",className:"da-article__learn-more-icon",custom_color:"var(--text-less-prominent)"})})))},Vt=function(e){var t=e.button_label,a=e.handleClickSwitchAccount,r=e.has_real_account,o=e.is_accounts_switcher_on,s=e.is_button_primary,u=e.is_disabled,d=e.is_virtual,_=e.onSelectAccount,m=e.type,f=e.platform,p=e.title;if(d&&"real"===m.category&&"function"==typeof a&&(f!==l.CFD_PLATFORMS.MT5||r&&"financial_stp"===m.type))return n.createElement("div",{className:"cfd-account-card__action-wrapper"},n.createElement(c.Localize,{i18n_default_text:"<0>Switch to your real account</0><1> to create a {{platform}} {{account_title}} account.</1>",values:{platform:(0,l.getCFDPlatformLabel)(f),account_title:p},components:[n.createElement("a",{className:Oe()("cfd-account-card__action-wrapper__link link link--orange",{"cfd-account-card__action-wrapper__link--disabled":o}),key:0,onClick:a}),n.createElement(i.Text,{key:1,line_height:"s",size:"xxs"})]}));var g="real"===m.category?n.createElement(c.Localize,{i18n_default_text:"Add real account"}):n.createElement(c.Localize,{i18n_default_text:"Add demo account"}),h=t||g;return n.createElement(i.Button,{className:"cfd-account-card__account-selection",onClick:_,type:"button",is_disabled:u,primary:s,secondary:!s,large:!0},h)},Xt=function(e){var t,a,r,o,s,u=e.button_label,d=e.commission_message,_=e.descriptor,m=e.is_hovered,f=e.existing_data,p=e.has_banner,g=e.has_cfd_account,h=e.has_cfd_account_error,v=e.has_real_account,b=e.is_accounts_switcher_on,y=e.is_button_primary,w=e.is_disabled,E=e.is_logged_in,z=e.is_virtual,x=e.is_eu,S=e.onHover,M=e.platform,D=e.specs,T=e.title,C=e.type,N=e.onSelectAccount,F=e.onClickFund,P=e.onPasswordManager,A=e.should_show_trade_servers,k=e.toggleAccountsDialog,O=e.toggleShouldShowRealAccountsList,L=x?"cfd":C.type,j=C.type?n.createElement(i.Icon,{icon:Rt[C.platform][L],size:64}):null,I="synthetic"===C.type&&"real"===C.category&&(M!==l.CFD_PLATFORMS.MT5||!f),R="demo"===C.category,B=E&&f&&"real"===C.category&&"synthetic"===C.type&&(null==f?void 0:f.server_info),U="synthetic"===C.type&&"real"===C.category&&"mt5"===C.platform,W=null==f||null===(t=f.server_info)||void 0===t||null===(a=t.geolocation)||void 0===a?void 0:a.region,V=null==f||null===(r=f.server_info)||void 0===r?void 0:r.environment,X=n.useRef(null),q=n.useRef(null),$=n.useRef(null);n.useEffect((function(){var e=null==X?void 0:X.current,t=null==$?void 0:$.current;if(f){var a=function(){null==S||S(f.group)};return null==e||e.addEventListener("mouseenter",a),null==t||t.addEventListener("mouseenter",a),function(){null==e||e.removeEventListener("mouseenter",a),null==t||t.removeEventListener("mouseenter",(function(){return a}))}}return function(){}}),[S,f]);var H,Y,K,G,J=n.useCallback((function(e){if(e){var t,a,n,r,o,i,l=null===(t=e.server_info)||void 0===t||null===(a=t.geolocation)||void 0===a?void 0:a.region;if(l)return"".concat(l," ").concat(1===(null==e||null===(n=e.server_info)||void 0===n||null===(r=n.geolocation)||void 0===r?void 0:r.sequence)?"":null==e||null===(o=e.server_info)||void 0===o||null===(i=o.geolocation)||void 0===i?void 0:i.sequence)}return""}),[]),Z=(0,l.isMobile)()&&M===l.CFD_PLATFORMS.DXTRADE,Q=M===l.CFD_PLATFORMS.MT5?n.createElement(n.Fragment,null,n.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},n.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},n.createElement("div",{className:"cfd-account-card--paragraph"},(0,c.localize)("Broker"))),n.createElement("td",{className:"cfd-account-card__login-specs-table-data"},n.createElement("div",{className:"cfd-account-card--paragraph"},n.createElement(Ut,{value:"Deriv Limited"})))),n.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},n.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},n.createElement("div",{className:"cfd-account-card--paragraph"},(0,c.localize)("Server"))),n.createElement("td",{className:"cfd-account-card__login-specs-table-data"},n.createElement("div",{className:"cfd-account-card--paragraph"},n.createElement(Ut,{value:null==f||null===(o=f.server_info)||void 0===o?void 0:o.environment})))),n.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},n.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},n.createElement("div",{className:"cfd-account-card--paragraph"},(0,c.localize)("Login ID"))),n.createElement("td",{className:"cfd-account-card__login-specs-table-data"},n.createElement("div",{className:"cfd-account-card--paragraph"},n.createElement(Ut,{value:null==f?void 0:f.display_login}))))):n.createElement(n.Fragment,null,n.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},n.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},n.createElement("div",{className:"cfd-account-card--paragraph"},(0,c.localize)("Username"))),n.createElement("td",{className:"cfd-account-card__login-specs-table-data"},n.createElement("div",{className:"cfd-account-card--paragraph"},n.createElement(Ut,{value:null==f?void 0:f.login,is_bold:!0})))));return n.createElement("div",{ref:q,className:"cfd-account-card__wrapper"},n.createElement("div",{className:Oe()("cfd-account-card",{"cfd-account-card__logged-out":!E}),ref:X,id:(Y="",K="",G=V?V.toLowerCase():"",U&&W&&(Y="-".concat(W.toLowerCase())),""!==G&&U&&(K=G.split("server")[1]),"".concat(C.category,"-").concat(C.type).concat(Y).concat(K))},I&&n.createElement("div",{className:"cfd-account-card__banner"},n.createElement(c.Localize,{i18n_default_text:"Most popular"})),R&&n.createElement("div",{className:"cfd-account-card__banner cfd-account-card__banner--demo"},n.createElement(c.Localize,{i18n_default_text:"DEMO"})),B&&n.createElement("div",{className:"cfd-account-card__banner cfd-account-card__banner--server"},J(f)),n.createElement("div",{className:Oe()("cfd-account-card__type",{"cfd-account-card__type--has-banner":p||I||B}),id:"".concat(M===l.CFD_PLATFORMS.DXTRADE?l.CFD_PLATFORMS.DXTRADE:l.CFD_PLATFORMS.MT5,"_").concat(C.category,"_").concat(C.type)},j,n.createElement("div",{className:"cfd-account-card__type--description"},n.createElement(i.Text,{size:"xxl",className:"cfd-account-card--heading"},T),(!f||!E)&&n.createElement("p",{className:"cfd-account-card--paragraph"},_),(null==f?void 0:f.display_balance)&&E&&n.createElement(i.Text,{size:"xxl",className:"cfd-account-card--balance"},n.createElement(i.Money,{amount:f.display_balance,currency:f.currency,has_sign:f.balance&&f.balance<0,show_currency:!0})),(null==f?void 0:f.display_login)&&E&&n.createElement(i.Text,{color:"less-prominent",size:"xxxs",line_height:"s"},null==f?void 0:f.display_login))),f&&n.createElement("div",{className:"cfd-account-card__divider"}),n.createElement("div",{className:"cfd-account-card__cta"},n.createElement("div",{className:"cfd-account-card__cta-wrapper"},null!=f&&f.login&&E?n.createElement(n.Fragment,null,n.createElement("div",{className:"cfd-account-card__login-specs"},n.createElement("table",{className:"cfd-account-card__login-specs-table"},n.createElement("tbody",null,Q,n.createElement("tr",{className:"cfd-account-card__login-specs-table-row cfd-account-card__login-specs-table-row--account-id"},n.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},n.createElement("div",{className:"cfd-account-card--paragraph"},(0,c.localize)("Password"))),n.createElement("td",{className:"cfd-account-card__login-specs-table-data"},n.createElement("div",{className:"cfd-account-card--paragraph"},n.createElement(Wt,{platform:M,onClick:function(){P(null==f?void 0:f.login,T,C.category,C.type,null==f?void 0:f.server)}})))))))):n.createElement("div",{className:"cfd-account-card__specs"},n.createElement("table",{className:"cfd-account-card__specs-table"},n.createElement("tbody",null,void 0!==D&&Object.keys(D).map((function(e,t){return n.createElement("tr",{key:t,className:"cfd-account-card__specs-table-row"},n.createElement("td",{className:"cfd-account-card__specs-table-attribute"},n.createElement("p",{className:"cfd-account-card--paragraph"},D[e].key())),n.createElement("td",{className:"cfd-account-card__specs-table-data"},n.createElement("p",{className:"cfd-account-card--paragraph"},D[e].value())))})),B&&f&&"synthetic"===C.type&&"real"===C.category&&n.createElement("tr",{key:f.server,className:"cfd-account-card__specs-table-row"},n.createElement("td",{className:"cfd-account-card__specs-table-attribute"},n.createElement("p",{className:"cfd-account-card--paragraph"},n.createElement(c.Localize,{i18n_default_text:"Trade server: "}))),n.createElement("td",{className:"cfd-account-card__specs-table-data"},n.createElement("p",{className:"cfd-account-card--paragraph"},J(f))))))),(!f&&d||!E)&&n.createElement("div",{className:"cfd-account-card__commission"},n.createElement(i.Text,{as:"p",color:"general",size:"xs",styles:{margin:"1.6rem auto"}},d)),f&&E&&n.createElement("div",{className:"cfd-account-card__manage"},n.createElement(i.Button,{onClick:function(){return F(f)},type:"button",secondary:!0},"real"===C.category&&n.createElement(c.Localize,{i18n_default_text:"Fund transfer"}),"demo"===C.category&&n.createElement(c.Localize,{i18n_default_text:"Fund top up"}))),!f&&g&&n.createElement(i.Button,{className:"cfd-account-card__account-selection",onClick:N,type:"button"},n.createElement(c.Localize,{i18n_default_text:"Select"})),f&&E&&!Z&&n.createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:M===l.CFD_PLATFORMS.DXTRADE?Te(C.category):Ce({category:C.category,loginid:f.display_login,server_name:null==f||null===(s=f.server_info)||void 0===s?void 0:s.environment}),target:"_blank",rel:"noopener noreferrer"},n.createElement(c.Localize,{i18n_default_text:"Trade on web terminal"})),f&&E&&Z&&n.createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:(H=(0,l.mobileOSDetect)(),Me("iOS"===H?"ios":"android")),target:"_blank",rel:"noopener noreferrer"},n.createElement(c.Localize,{i18n_default_text:"Download the app"})),!f&&!g&&E&&n.createElement(Vt,{button_label:u,handleClickSwitchAccount:function(){null==O||O(!0),null==k||k(!0)},has_real_account:v,is_accounts_switcher_on:b,is_button_primary:y,is_disabled:w,is_virtual:z,onSelectAccount:N,type:C,platform:M,title:T}))),n.createElement(n.Fragment,null,A&&n.createElement(i.MobileWrapper,null,n.createElement(Bt,{ref:$,onSelectAccount:N,is_disabled:h})))),n.createElement(i.DesktopWrapper,null,n.createElement(jt.Z,{in:m&&A,timeout:0,classNames:"cfd-account-card__add-server",unmountOnExit:!0},n.createElement(Bt,{ref:$,onSelectAccount:N,is_disabled:h}))))},qt=function(e){var t=e.is_eu,a=e.is_eu_country,r=e.has_maltainvest_account,o=e.has_cfd_account_error,i=e.openAccountNeededModal,l=e.standpoint,s=e.is_loading,u=e.is_logged_in,d=e.isSyntheticCardVisible,_=e.isFinancialCardVisible,f=e.isFinancialStpCardVisible,p=e.onSelectAccount,g=e.openAccountTransfer,h=e.platform,v=e.current_list,b=e.has_cfd_account,y=e.openPasswordManager,w=e.residence,E=u&&t||!u&&a,z=n.useMemo((function(){var e=u&&t||!u&&a;return"au"===w?Lt[h].au_real_financial_specs:e?Lt[h].eu_real_financial_specs:Lt[h].real_financial_specs}),[u,t,a,w,h]);return s?n.createElement("div",{className:"cfd-demo-accounts-display"},n.createElement(m.Z,null)):n.createElement("div",{className:"cfd-demo-accounts-display"},d("demo")&&n.createElement(Xt,{has_cfd_account:b,title:(0,c.localize)("Synthetic"),type:{category:"demo",type:"synthetic",platform:h},is_disabled:o||l.malta,is_logged_in:u,existing_data:v[Object.keys(v).find((function(e){return e.startsWith("".concat(h,".demo.synthetic"))}))||""],commission_message:(0,c.localize)("No commission"),onSelectAccount:function(){return p({category:"demo",type:"synthetic"})},onPasswordManager:y,onClickFund:function(){return g(v[Object.keys(v).find((function(e){return e.startsWith("".concat(h,".demo.synthetic"))}))||""],{category:"demo",type:"synthetic"})},platform:h,descriptor:(0,c.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:Lt[h].real_synthetic_specs,has_banner:!0}),_()&&n.createElement(Xt,{has_cfd_account:b,title:E?(0,c.localize)("CFDs"):(0,c.localize)("Financial"),is_disabled:o,is_logged_in:u,is_eu:E,type:{category:"demo",type:"financial",platform:h},existing_data:v[Object.keys(v).find((function(e){return e.startsWith("".concat(h,".demo.financial@"))}))||""],commission_message:(0,c.localize)("No commission"),onSelectAccount:function(){t&&!r&&l.iom?i("maltainvest",(0,c.localize)("Deriv Multipliers"),(0,c.localize)("demo CFDs")):p({category:"demo",type:"financial"})},onPasswordManager:y,onClickFund:function(){return g(v[Object.keys(v).find((function(e){return e.startsWith("".concat(h,".demo.financial@"))}))||""],{category:"demo",type:"financial"})},platform:h,descriptor:ze(h,E),specs:z,has_banner:!0}),f()&&n.createElement(Xt,{has_cfd_account:b,title:(0,c.localize)("Financial STP"),type:{category:"demo",type:"financial_stp",platform:h},is_disabled:o,is_logged_in:u,existing_data:v[Object.keys(v).find((function(e){return e.startsWith("".concat(h,".demo.financial_stp@"))}))||""],commission_message:(0,c.localize)("No commission"),onSelectAccount:function(){return p({category:"demo",type:"financial_stp"})},onPasswordManager:y,onClickFund:function(){return g(v[Object.keys(v).find((function(e){return e.startsWith("".concat(h,".demo.financial_stp@"))}))||""],{category:"demo",type:"financial_stp"})},descriptor:(0,c.localize)("Trade popular currency pairs and cryptocurrencies with straight-through processing order (STP)."),specs:Lt[h].demo_financial_stp_specs,platform:h,has_banner:!0}))};function $t(e,t){if(e){if("string"==typeof e)return Ht(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ht(e,t):void 0}}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Yt=function(e){var t=e.has_real_account,a=e.is_accounts_switcher_on,r=e.is_eu,o=e.is_eu_country,s=e.has_malta_account,u=e.has_maltainvest_account,d=e.has_cfd_account_error,_=e.is_fully_authenticated,m=e.is_pending_authentication,f=e.is_virtual,p=e.isSyntheticCardVisible,g=e.isFinancialCardVisible,h=e.isFinancialStpCardVisible,v=e.landing_companies,b=e.onSelectAccount,y=e.openAccountTransfer,w=e.openPasswordModal,E=e.isAccountOfTypeDisabled,z=e.current_list,x=e.has_cfd_account,S=e.openPasswordManager,M=e.account_settings,D=e.openAccountNeededModal,T=e.platform,C=e.standpoint,N=e.is_logged_in,F=e.toggleAccountsDialog,P=e.toggleShouldShowRealAccountsList,A=e.can_have_more_real_synthetic_mt5,k=e.residence,O=e.residence_list,L=N&&!r&&t&&A&&T===l.CFD_PLATFORMS.MT5,j=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||$t(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.useState(0),2),I=j[0],R=j[1],B=n.useMemo((function(){var e,t,a=M.citizen,n=M.tax_identification_number,r=M.tax_residence;return!!(a&&n&&r)||!(!a||!r)&&(null!==(e=null==v||null===(t=v.config)||void 0===t?void 0:t.tax_details_required)&&void 0!==e&&e||!O.filter((function(e){return e.value===r&&e.tin_format})).length)}),[M,O,v]),U=function(e,t,a){return e&&a?n.createElement(c.Localize,{i18n_default_text:"Set your password"}):t?n.createElement(c.Localize,{i18n_default_text:"Pending verification"}):n.createElement(c.Localize,{i18n_default_text:"Add real account"})}(_,m,B),W=N&&r||!N&&o,V=!t||m,X=n.useMemo((function(){var e=N&&r||!N&&o;return"au"===k?Lt[T].au_real_financial_specs:e?Lt[T].eu_real_financial_specs:Lt[T].real_financial_specs}),[k,N,r,o,T]),q=function(){r&&C.malta&&!s?D("malta",(0,c.localize)("Deriv Synthetic"),(0,c.localize)("DMT5 Synthetic")):b({type:"synthetic",category:"real"})},$=function(e){return y(z[(0,l.getAccountListKey)(e,T)],{category:e.account_type,type:(0,l.getCFDAccountKey)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:T})})},H=function(e){var t=Object.keys(z).filter((function(e){return e.startsWith("".concat(T,".real.synthetic"))}));R(t.findIndex((function(t){return z[t].group===e})))},Y=function(e){if(d)return!0;if("synthetic"===e&&C.malta)return!0;if(r){var a=(0,l.getAccountTypeFields)({category:"real",type:e});return E(null==a?void 0:a.account_type)}switch(e){case"synthetic":case"financial":return!t;case"financial_stp":return V;default:return!1}},K=p("real")&&(Object.keys(z).some((function(e){return e.startsWith("".concat(T,".real.synthetic"))}))?Object.keys(z).filter((function(e){return e.startsWith("".concat(T,".real.synthetic"))})).reduce((function(e,t){return e.push(z[t]),e}),[]).map((function(e,t){return n.createElement(Xt,{key:t,has_cfd_account:x,has_cfd_account_error:d,title:(0,c.localize)("Synthetic"),is_hovered:t===I,is_disabled:Y("synthetic"),type:{category:"real",type:"synthetic",platform:T},is_logged_in:N,should_show_trade_servers:L,existing_data:e,commission_message:(0,c.localize)("No commission"),onSelectAccount:q,onPasswordManager:S,onClickFund:$,platform:T,descriptor:(0,c.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:Lt[T].real_synthetic_specs,onHover:H})})):[n.createElement(Xt,{key:"real.synthetic",has_cfd_account:x,title:(0,c.localize)("Synthetic"),is_disabled:Y("synthetic"),type:{category:"real",type:"synthetic",platform:T},is_logged_in:N,should_show_trade_servers:L,existing_data:void 0,commission_message:(0,c.localize)("No commission"),onSelectAccount:q,onPasswordManager:S,onClickFund:$,platform:T,descriptor:(0,c.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:Lt[T].real_synthetic_specs,onHover:H,is_virtual:f,toggleShouldShowRealAccountsList:P,toggleAccountsDialog:F})]),G=h()&&n.createElement(Xt,{key:"real.financial_stp",has_cfd_account:x,title:(0,c.localize)("Financial STP"),type:{category:"real",type:"financial_stp",platform:T},is_logged_in:N,existing_data:z[Object.keys(z).find((function(e){return e.startsWith("".concat(T,".real.financial_stp@"))}))||""],commission_message:(0,c.localize)("No commission"),onSelectAccount:function(){var e={category:"real",type:"financial_stp"};_&&B?w(e):(_||V)&&B||b(e)},button_label:U,is_button_primary:m,onPasswordManager:S,onClickFund:$,platform:T,descriptor:(0,c.localize)("Trade popular currency pairs and cryptocurrencies with straight-through processing order (STP)."),specs:Lt[T].real_financial_stp_specs,is_disabled:Y("financial_stp"),is_virtual:f,has_real_account:t,toggleAccountsDialog:F,toggleShouldShowRealAccountsList:P,is_accounts_switcher_on:a}),J=g()&&n.createElement(Xt,{key:"real.financial",has_cfd_account:x,is_disabled:Y("financial"),title:W?(0,c.localize)("CFDs"):(0,c.localize)("Financial"),type:{category:"real",type:"financial",platform:T},existing_data:z[Object.keys(z).find((function(e){return e.startsWith("".concat(T,".real.financial@"))}))||""],commission_message:(0,c.localize)("No commission"),onSelectAccount:function(){r&&!u?D("maltainvest",(0,c.localize)("Deriv Multipliers"),(0,c.localize)("real CFDs")):b({type:"financial",category:"real"})},onPasswordManager:S,onClickFund:$,platform:T,descriptor:ze(T,W),specs:X,is_eu:W,is_logged_in:N,is_virtual:f,toggleShouldShowRealAccountsList:P,toggleAccountsDialog:F}),Z=[].concat(function(e){return function(e){if(Array.isArray(e))return Ht(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(K||[]),[J,G]).filter(Boolean);return n.createElement("div",{className:Oe()("cfd-real-accounts-display",{"cfd-real-accounts-display--has-trade-servers":L})},n.createElement(i.DesktopWrapper,null,n.createElement(i.Carousel,{list:Z,width:328,nav_position:"middle",show_bullet:!1,item_per_window:3,is_mt5:!0})),n.createElement(i.MobileWrapper,null,Z.map((function(e){return e}))))},Kt=["children","is_loading","loading_component"];function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Zt=function(e){var t=e.children,a=e.is_loading,r=e.loading_component,o=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Kt),l=r;return a?n.createElement(l,null):n.createElement(i.Tabs,o,t)};const Qt=(0,r.withRouter)((0,d.$j)((function(e){var t=e.client,a=e.modules,n=e.ui;return{beginRealSignupForMt5:a.cfd.beginRealSignupForMt5,checkShouldOpenAccount:a.cfd.checkShouldOpenAccount,country:t.account_settings.residence,client_email:t.email_address,createCFDAccount:a.cfd.createCFDAccount,current_list:a.cfd.current_list,landing_companies:t.landing_companies,isAccountOfTypeDisabled:t.isAccountOfTypeDisabled,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_virtual:t.is_virtual,is_mt5_allowed:t.is_mt5_allowed,is_dxtrade_allowed:t.is_dxtrade_allowed,mt5_disabled_signup_types:t.mt5_disabled_signup_types,dxtrade_disabled_signup_types:t.dxtrade_disabled_signup_types,has_maltainvest_account:t.has_maltainvest_account,has_malta_account:t.has_malta_account,can_upgrade_to:t.can_upgrade_to,account_settings:t.account_settings,disableCFDPasswordModal:a.cfd.disableCFDPasswordModal,dxtrade_accounts_list_error:t.dxtrade_accounts_list_error,is_pending_authentication:t.is_pending_authentication,is_compare_accounts_visible:a.cfd.is_compare_accounts_visible,is_fully_authenticated:t.is_fully_authenticated,openPasswordModal:a.cfd.enableCFDPasswordModal,openAccountNeededModal:n.openAccountNeededModal,is_loading:t.is_populating_mt5_account_list,residence:t.residence,residence_list:t.residence_list,has_cfd_account:a.cfd.has_cfd_account,has_mt5_real_account_error:t.has_account_error_in_mt5_real_list,has_mt5_demo_account_error:t.has_account_error_in_mt5_demo_list,has_dxtrade_real_account_error:t.has_account_error_in_dxtrade_real_list,has_dxtrade_demo_account_error:t.has_account_error_in_dxtrade_demo_list,has_real_account:t.has_active_real_account,setAccountType:a.cfd.setAccountType,setCFDPasswordResetModal:a.cfd.setCFDPasswordResetModal,setCurrentAccount:a.cfd.setCurrentAccount,standpoint:t.standpoint,toggleCompareAccounts:a.cfd.toggleCompareAccountsModal,is_accounts_switcher_on:n.is_accounts_switcher_on,openTopUpModal:n.openTopUpModal,NotificationMessages:n.notification_messages_ui,onMount:a.cfd.onMount,onUnmount:a.cfd.onUnmount,toggleAccountsDialog:n.toggleAccountsDialog,toggleShouldShowRealAccountsList:n.toggleShouldShowRealAccountsList,can_have_more_real_synthetic_mt5:t.can_have_more_real_synthetic_mt5,upgradeable_landing_companies:t.upgradeable_landing_companies,is_dark_mode_on:n.is_dark_mode_on,disableApp:n.disableApp,enableApp:n.enableApp,is_reset_trading_password_modal_visible:n.is_reset_trading_password_modal_visible,toggleResetTradingPasswordModal:n.setResetTradingPasswordModalOpen,mt5_verification_code:t.verification_code.trading_platform_mt5_password_reset,dxtrade_verification_code:t.verification_code.trading_platform_dxtrade_password_reset}}))((function(e){var t=Gt(n.useState(!1),2),a=t[0],r=t[1],s=Gt(n.useState(!1),2),d=s[0],m=s[1],p=Gt(n.useState(0),2),g=p[0],h=p[1],v=Gt(n.useState(!0),2),b=v[0],y=v[1],w=Gt(n.useState(!1),2),E=w[0],z=w[1],x=Gt(n.useState({is_visible:!1,selected_login:"",selected_account:"",selected_account_type:"",selected_account_group:"",selected_server:""}),2),S=x[0],M=x[1];n.useEffect((function(){return C(T()),D(),e.onMount(),function(){e.onUnmount()}}),[]),n.useEffect((function(){C(),e.checkShouldOpenAccount(),e.is_logged_in&&["demo","real"].forEach((function(e){var t=P(e)||A()||k();"real"===e&&d!==t&&m(t),"demo"===e&&a!==t&&r(t)})),e.is_logged_in||d&&a||(m(!0),r(!0))}));var D=function(){/reset-password/.test(e.location.hash)&&e.setCFDPasswordResetModal(!0)},T=function(){return d?0:a?1:e.location.hash?/demo/.test(e.location.hash)?1:0:void 0},C=function(e){if(e){var t={};1===e?t.is_demo_tab=!0:0===e&&(t.is_demo_tab=!1),g!==e&&(t.active_index=e),(0,l.isEmptyObject)(t)||(h(t.active_index),y(t.is_demo_tab))}},N=function(t,a){"real"===a.category?(sessionStorage.setItem("cfd_transfer_to_login_id",t.login),e.disableCFDPasswordModal(),e.history.push(l.routes.cashier_acc_transfer)):(e.setCurrentAccount(t,a),e.openTopUpModal())},F=function(e,t,a,n,r){M((function(o){return{is_visible:!o.is_visible,selected_login:"string"==typeof e?e:"",selected_account:"string"==typeof t?t:"",selected_account_group:a,selected_account_type:n,selected_server:r}}))},P=function(t){var a=e.current_list,n=e.platform,r=e.is_eu,o=e.is_eu_country,i=e.landing_companies,c=e.is_logged_in,s=Object.keys(a).some((function(e){return e.startsWith("".concat(n,".").concat(t,".synthetic"))}));return!(!c&&o)&&!(r&&!s)&&((0,l.isLandingCompanyEnabled)({landing_companies:i,platform:n,type:"gaming"})||!c)},A=function(){var t=e.platform,a=e.landing_companies;return!e.is_logged_in||(0,l.isLandingCompanyEnabled)({landing_companies:a,platform:t,type:"financial"})},k=function(){var t,a=e.platform,n=e.landing_companies,r=e.is_logged_in,o=e.is_eu_country;return!(!r&&o)&&((null==n||null===(t=n.mt_financial_company)||void 0===t?void 0:t.financial_stp)||!r)&&a===l.CFD_PLATFORMS.MT5},O=e.account_settings,L=e.account_status,j=e.beginRealSignupForMt5,I=e.country,R=e.createCFDAccount,B=e.current_list,U=e.dxtrade_accounts_list_error,W=e.isAccountOfTypeDisabled,V=e.is_accounts_switcher_on,X=e.is_dark_mode_on,q=e.is_eu,$=e.is_eu_country,H=e.is_fully_authenticated,Y=e.is_loading,K=e.is_logged_in,G=e.is_logging_in,J=e.is_mt5_allowed,Z=e.is_dxtrade_allowed,Q=e.is_pending_authentication,ee=e.is_virtual,te=e.landing_companies,ae=e.has_malta_account,ne=e.has_maltainvest_account,re=e.has_cfd_account,oe=e.has_mt5_real_account_error,ie=e.has_mt5_demo_account_error,le=e.has_dxtrade_real_account_error,ce=e.has_dxtrade_demo_account_error,se=e.mt5_disabled_signup_types,ue=e.dxtrade_disabled_signup_types,_e=e.has_real_account,me=e.NotificationMessages,fe=e.platform,pe=e.openAccountNeededModal,ge=e.residence,he=e.residence_list,ve=e.standpoint,be=e.toggleAccountsDialog,ye=e.toggleShouldShowRealAccountsList,we=e.can_have_more_real_synthetic_mt5,ze=e.upgradeable_landing_companies,xe=e.is_reset_trading_password_modal_visible,Se=e.toggleResetTradingPasswordModal,Te=e.enableApp,Ce=e.disableApp,Fe=e.mt5_verification_code,Pe=e.dxtrade_verification_code,Ae=!q&&K&&!_e&&(null==ze?void 0:ze.length)>0;if(!I&&K||G)return n.createElement(i.Loading,null);var ke=b?ie||se.demo:oe||se.real,Oe=b?ce||ue.demo:le||ue.real,Le=fe===l.CFD_PLATFORMS.MT5?ke:Oe||!!U,je=fe===l.CFD_PLATFORMS.MT5?Fe:Pe;return fe!==l.CFD_PLATFORMS.DXTRADE||Z?K&&!te||Y?n.createElement(i.Loading,null):n.createElement(n.Fragment,null,J||fe===l.CFD_PLATFORMS.DXTRADE||!K?n.createElement("div",{className:"cfd-dashboard__container"},n.createElement(me,{is_mt5:!0,is_notification_loaded:E,stopNotificationLoading:function(){z(!0)}}),n.createElement("div",{className:"cfd-dashboard"},n.createElement("div",{className:"cfd-dashboard__welcome-message"},n.createElement("h1",{className:"cfd-dashboard__welcome-message--heading"},function(e,t){return t===l.CFD_PLATFORMS.DXTRADE?e?(0,c.localize)("Welcome to your Deriv X dashboard"):(0,c.localize)("Welcome to Deriv X"):t===l.CFD_PLATFORMS.MT5?(0,c.localize)("Welcome to Deriv MT5 (DMT5) dashboard"):(0,c.localize)("")}(K,fe))),K&&Le&&n.createElement("div",{className:"cfd-dashboard__accounts-error"},n.createElement(i.Text,{as:"p",className:"cfd-dashboard__accounts-error-message",lineHeight:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},n.createElement(c.Localize,{i18n_default_text:"Due to an issue on our server, some of your {{platform}} accounts are unavailable at the moment. Please bear with us and thank you for your patience.",values:{platform:(0,l.getCFDPlatformLabel)(fe)}}))),n.createElement("div",{className:"cfd-dashboard__accounts-display"},n.createElement(et,{is_visible:S.is_visible,platform:fe,selected_login:S.selected_login,selected_account:S.selected_account,selected_account_group:S.selected_account_group,selected_account_type:S.selected_account_type,selected_server:S.selected_server,toggleModal:F}),n.createElement(Zt,{active_index:g,top:!0,center:!0,is_loading:Y,is_logged_in:K,loading_component:f,onTabItemClick:C,should_update_hash:!0},d&&n.createElement("div",{label:(0,c.localize)("Real account"),hash:"real"},n.createElement(n.Fragment,null,Ae&&n.createElement(_,{onClickSignup:j,platform:fe}),n.createElement(Yt,{is_accounts_switcher_on:V,is_eu:q,is_eu_country:$,is_logged_in:K,has_maltainvest_account:ne,has_malta_account:ae,has_cfd_account_error:fe===l.CFD_PLATFORMS.MT5?se.real:ue.real||!!U,openAccountNeededModal:pe,current_list:B,account_status:L,has_cfd_account:re,onSelectAccount:R,account_settings:O,landing_companies:te,is_pending_authentication:Q,is_fully_authenticated:H,is_virtual:ee,isSyntheticCardVisible:P,isFinancialCardVisible:A,isFinancialStpCardVisible:k,openAccountTransfer:N,openPasswordManager:F,openPasswordModal:function(t){e.setAccountType(t),e.openPasswordModal()},platform:fe,isAccountOfTypeDisabled:W,has_real_account:_e,standpoint:ve,toggleAccountsDialog:be,toggleShouldShowRealAccountsList:ye,can_have_more_real_synthetic_mt5:we,residence:ge,residence_list:he}))),a&&n.createElement("div",{label:(0,c.localize)("Demo account"),hash:"demo"},n.createElement(qt,{is_eu:q,is_eu_country:$,is_logged_in:K,has_maltainvest_account:ne,has_cfd_account_error:fe===l.CFD_PLATFORMS.MT5?se.demo:ue.demo||!!U,openAccountNeededModal:pe,standpoint:ve,is_loading:Y,isSyntheticCardVisible:P,isFinancialCardVisible:A,isFinancialStpCardVisible:k,has_cfd_account:re,current_list:B,onSelectAccount:R,landing_companies:te,openAccountTransfer:N,openPasswordManager:F,platform:fe,residence:ge}))),n.createElement(Ee,{platform:fe}),n.createElement("div",{className:"cfd-dashboard__maintenance"},n.createElement(i.Icon,{icon:"IcAlertWarning",size:(0,l.isMobile)()?28:16,className:"cfd-dashboard__maintenance-icon"}),n.createElement("div",{className:"cfd-dashboard__maintenance-text"},fe===l.CFD_PLATFORMS.DXTRADE&&n.createElement(c.Localize,{i18n_default_text:"Server maintenance starts at 06:00 GMT every Sunday and may last up to 2 hours. Service may be disrupted during this time."}),fe===l.CFD_PLATFORMS.MT5&&n.createElement(c.Localize,{i18n_default_text:"Server maintenance starting 01:00 GMT every Sunday. This process may take up to 2 hours to complete. Service may be disrupted during this time."})))),n.createElement(i.DesktopWrapper,null,n.createElement(Ne,{platform:fe,active_index:g,is_dark_mode_on:X})),n.createElement(i.MobileWrapper,null,n.createElement("div",{className:"cfd-dashboard__download-center"},n.createElement("h1",{className:"cfd-dashboard__download-center--heading"},fe===l.CFD_PLATFORMS.MT5&&n.createElement(c.Localize,{i18n_default_text:"Download the MT5 app"}),fe===l.CFD_PLATFORMS.DXTRADE&&n.createElement(c.Localize,{i18n_default_text:"Download the Deriv X app"})),n.createElement("div",{className:"cfd-dashboard__download-center-options--mobile"},n.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-devices"},fe===l.CFD_PLATFORMS.MT5&&n.createElement(n.Fragment,null,n.createElement(i.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),n.createElement(i.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),fe===l.CFD_PLATFORMS.DXTRADE&&n.createElement(n.Fragment,null,n.createElement(i.Icon,{icon:"IcDxtradeDeviceTablet",width:133,height:106}),n.createElement(i.Icon,{icon:"IcDxtradeDevicePhone",width:48,height:74}))),n.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-links"},n.createElement("a",{href:fe===l.CFD_PLATFORMS.MT5?De("android"):Me("android"),target:"_blank",rel:"noopener noreferrer"},n.createElement(i.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),n.createElement("a",{href:fe===l.CFD_PLATFORMS.MT5?De("ios"):Me("ios"),target:"_blank",rel:"noopener noreferrer"},n.createElement(i.Icon,{icon:"IcInstallationApple",width:135,height:40})))))),n.createElement(Mt,{platform:fe}),n.createElement(xt,{platform:fe,has_suspended_account:Le}),n.createElement(St,null),fe===l.CFD_PLATFORMS.MT5&&n.createElement(n.Fragment,null,n.createElement(de,null),n.createElement(Ot,null)),n.createElement(kt,{platform:fe}),n.createElement(u(),{platform:fe,enableApp:Te,disableApp:Ce,toggleResetTradingPasswordModal:Se,is_visible:xe,is_loading:Y,verification_code:je}))):n.createElement(i.PageError,{buttonSize:"medium",header:n.createElement(c.Localize,{i18n_default_text:"DMT5 is not available in {{country}}",values:{country:O.residence},components:[n.createElement("br",{key:0})]}),messages:[n.createElement(c.Localize,{key:0,i18n_default_text:"Please explore our other platforms."})],redirect_urls:[l.routes.trade,l.routes.bot],redirect_labels:[n.createElement(c.Localize,{key:0,i18n_default_text:"Explore DTrader"}),n.createElement(c.Localize,{key:1,i18n_default_text:"Explore DBot"})]})):n.createElement(o.Redirect,{to:l.routes.mt5})})))},"./src/templates/_common/components/loading.tsx":(e,t,a)=>{a.d(t,{Z:()=>i});var n=a("../../node_modules/classnames/index.js"),r=a.n(n),o=a("react");const i=function(e){var t=e.className,a=e.is_invisible,n=e.theme,i=e.id;return o.createElement("div",{id:i,className:r()("barspinner","barspinner--".concat(n||"dark"),{invisible:a},t)},Array.from(new Array(5)).map((function(e,t){return o.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);